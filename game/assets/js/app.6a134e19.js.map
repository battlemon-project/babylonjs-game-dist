{"version":3,"file":"assets/js/app.6a134e19.js","mappings":"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","sources":["webpack://babylon_js/./src/App.vue?0fd5","webpack://babylon_js/./src/store/controller_move/mutations.ts","webpack://babylon_js/./src/store/controller_move/index.ts","webpack://babylon_js/./src/store/controller_rotate/mutations.ts","webpack://babylon_js/./src/store/controller_rotate/index.ts","webpack://babylon_js/./src/models/storage/Settings.ts","webpack://babylon_js/./src/store/settings/mutations.ts","webpack://babylon_js/./src/store/settings/index.ts","webpack://babylon_js/./src/models/storage/Level.ts","webpack://babylon_js/./src/store/level/mutations.ts","webpack://babylon_js/./src/store/level/index.ts","webpack://babylon_js/./src/store/players/mutations.ts","webpack://babylon_js/./src/store/players/index.ts","webpack://babylon_js/./src/store/index.ts","webpack://babylon_js/./src/models/scene/Environment.ts","webpack://babylon_js/./src/models/Helpers.ts","webpack://babylon_js/./src/models/scene/Scene.ts","webpack://babylon_js/./src/models/sounds/SoundMain.ts","webpack://babylon_js/./src/models/sounds/Music.ts","webpack://babylon_js/./src/models/sounds/Background.ts","webpack://babylon_js/./src/models/sounds/Audio.ts","webpack://babylon_js/./src/models/сommon/SubscribeStore.ts","webpack://babylon_js/./src/models/ServerClient.ts","webpack://babylon_js/./src/models/scene/DevMode.ts","webpack://babylon_js/./src/models/сommon/Body.ts","webpack://babylon_js/./src/models/сommon/Move.ts","webpack://babylon_js/./src/models/playerSelf/Move.ts","webpack://babylon_js/./src/models/playerSelf/Controller.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Idle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Run.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpMiddle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpFinish.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Sprint.ts","webpack://babylon_js/./src/models/сommon/character/Animation.ts","webpack://babylon_js/./src/models/сommon/character/Rotation.ts","webpack://babylon_js/./src/models/scene/LODs.ts","webpack://babylon_js/./src/models/scene/ContainerManager.ts","webpack://babylon_js/./src/models/сommon/character/Items.ts","webpack://babylon_js/./src/models/сommon/character/Character.ts","webpack://babylon_js/./src/models/playerSelf/Camera.ts","webpack://babylon_js/./src/models/playerSelf/Player.ts","webpack://babylon_js/./src/models/player/Move.ts","webpack://babylon_js/./src/models/player/Controller.ts","webpack://babylon_js/./src/models/player/Player.ts","webpack://babylon_js/./src/models/scene/Prefabs.ts","webpack://babylon_js/./src/models/scene/TagsExtansion.ts","webpack://babylon_js/./src/models/mehanics/Collisions.ts","webpack://babylon_js/./src/models/Game.ts","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue","webpack://babylon_js/./src/views/gui/topbar/MetaMask.vue","webpack://babylon_js/./src/views/gui/topbar/MetaMask.vue?f535","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue?ecd8","webpack://babylon_js/./src/views/LevelPreview.vue?7c7b","webpack://babylon_js/./src/views/LevelPreview.vue?526f","webpack://babylon_js/./src/views/LevelPreview.vue","webpack://babylon_js/./src/views/gui/MenuLevel.vue?c446","webpack://babylon_js/./src/views/gui/MenuLevel.vue?7df6","webpack://babylon_js/./src/views/gui/MenuLevel.vue","webpack://babylon_js/./src/views/gui/Settings.vue?9ce8","webpack://babylon_js/./src/views/gui/Settings.vue?74aa","webpack://babylon_js/./src/views/gui/Settings.vue","webpack://babylon_js/./src/App.vue?847a","webpack://babylon_js/./src/App.vue","webpack://babylon_js/./src/main.ts","webpack://babylon_js/webpack/bootstrap","webpack://babylon_js/webpack/runtime/chunk loaded","webpack://babylon_js/webpack/runtime/compat get default export","webpack://babylon_js/webpack/runtime/define property getters","webpack://babylon_js/webpack/runtime/global","webpack://babylon_js/webpack/runtime/hasOwnProperty shorthand","webpack://babylon_js/webpack/runtime/make namespace object","webpack://babylon_js/webpack/runtime/node module decorator","webpack://babylon_js/webpack/runtime/jsonp chunk loading","webpack://babylon_js/webpack/startup"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-340def46\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"level\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", { id: \"canvas\" }, null, -1))\nconst _hoisted_3 = {\n  key: 0,\n  id: \"loading_overlay\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { id: \"loading_overlay_text\" }, \"Loading...\", -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TopBar = _resolveComponent(\"TopBar\")!\n  const _component_MenuLevel = _resolveComponent(\"MenuLevel\")!\n  const _component_Settings = _resolveComponent(\"Settings\")!\n  const _component_LevelPreview = _resolveComponent(\"LevelPreview\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createVNode(_component_TopBar),\n      _createVNode(_component_MenuLevel),\n      _createVNode(_component_Settings),\n      (this.$store.state.level.loading)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _hoisted_5))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_LevelPreview)\n    ])\n  ]))\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_move/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_MOVE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_MOVE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_MOVE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_MOVE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_MOVE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_MOVE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_move/types'\nimport { mutations } from '@/store/controller_move/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nconst getters = {\n  controllerMoveIsUsed: (state: ControllerState) => state.isUsed,\n}\n\nexport const controllerMove: Module<ControllerState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_rotate/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_ROTATE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_ROTATE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_ROTATE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_ROTATE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_ROTATE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_ROTATE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_rotate/types'\nimport { mutations } from '@/store/controller_rotate/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nexport const controllerRotate: Module<ControllerState, RootState> = {\n  state,\n  mutations\n}","export interface Field {\n  name: string;\n  value: any;\n  label: string;\n}\n\nexport const Settings = {\n  fields: [\n    {\n      name: 'music',\n      value: true,\n      label: 'Music'\n    },\n    {\n      name: 'sound',\n      value: true,\n      label: 'Sound'\n    },\n    {\n      name: 'dev_mode',\n      value: false,\n      label: 'Dev mode'\n    }\n  ],\n  validateFieldName(name: string) {\n    const field = this.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return true\n  },\n  setValueByName (name: string, value: any) {\n    this.validateFieldName(name)\n    const fields = this.getFields()\n\n    const settings = fields.map((field: Field) => {\n      if (field.name == name) {\n        field.value = value\n      }\n\n      return field\n    })\n\n    localStorage.setItem('settings', JSON.stringify(settings))\n\n    return true\n  },\n  getValueByName (name: string) {\n    const fields = this.getFields()\n    const field = fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return field.value\n  },\n  getFields () {\n    const settingsStorage = localStorage.getItem('settings')\n    if (settingsStorage) {\n      const settings = JSON.parse(String(settingsStorage))\n      return this.fields.map(field => {\n        const oldField = settings.find((settingField: any) => settingField.name == field.name)\n        if (oldField) {\n          field.value = oldField.value\n        }\n\n        return field\n      })\n    }\n\n    return this.fields\n  }\n}","import { MutationTree } from 'vuex'\nimport { Settings } from '@/store/settings/types'\nimport { Settings as SettingsStorage } from '@/models/storage/Settings'\n\nexport const mutations: MutationTree<Settings> = {\n  SET_SETTINGS_OPEN (state, payload) {\n    state.open = payload\n  },\n  SET_SETTING_FIELD_VALUE (state, payload) {\n    if (SettingsStorage.validateFieldName(payload.name)) {\n      SettingsStorage.setValueByName(payload.name, payload.value)\n      state.fields.forEach((field) => {\n        if (field.name === payload.name) {\n          field.value = payload.value\n        }\n      })\n    }\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/settings/mutations'\nimport { Settings } from '@/store/settings/types'\nimport { Field, Settings as SettingsLocalStorage } from '@/models/storage/Settings'\n\n\nconst state: Settings = {\n  fields: SettingsLocalStorage.getFields(),\n  open: false\n}\n\nconst getters = {\n  settingFields: (state: Settings) => state.fields,\n  getSettingsFieldByName: (state: Settings) => (name: string) => {\n    return state.fields.find(field => field.name == name)\n  },\n  getSettingsValueByName: (state: Settings) => (name: string) => {\n    const field = state.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field in Store state'\n    }\n\n    return field.value\n  }\n}\n\nexport const settings: Module<Settings, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","export const Level = {\n  saveCompletedLevel (levelId: number | string) {\n    if (!this.checkCompletedLevelId(levelId)) {\n      const levelsIds = this.getCompletedLevelsIds()\n      levelsIds.push(String(levelId))\n\n      localStorage.setItem('completedLevelsIds', levelsIds.join(','))\n    }\n\n    this.setLastCompletedLevelId(String(levelId))\n  },\n  getCompletedLevelsIds () {\n    const completedLevels = localStorage.getItem('completedLevelsIds')\n    return completedLevels ? completedLevels.split(',') : []\n  },\n  getLastCompletedLevelId () {\n    return Number(localStorage.getItem('lastCompletedLevelsId'))\n  },\n  setLastCompletedLevelId(levelId: string) {\n    return localStorage.setItem('lastCompletedLevelsId', levelId)\n  },\n  checkCompletedLevelId(levelId: number | string) {\n    const ids = this.getCompletedLevelsIds()\n    return ids.find(id => id == levelId)\n  }\n}","import { MutationTree } from 'vuex'\nimport { LevelState } from '@/store/level/types'\nimport { Level as LevelStorage } from '@/models/storage/Level'\n\nexport const mutations: MutationTree<LevelState> = {\n  SET_LEVEL (state, payload) {\n    state.levelId = payload\n  },\n  SET_PLAY (state) {\n    state.play = true\n  },\n  SET_OPEN_MENU (state, payload) {\n    state.isMenuOpen = payload\n  },\n  SET_DATE_LAST_USED_CONTROLLERS (state, payload) {\n    state.dateLastUsedControllers = payload\n  },\n  SET_IS_USED_CONTROLLERS (state, payload) {\n    state.isUsedControllers = payload\n  },\n  MAP_TOGGLE (state) {\n    state.isMapOpen = !state.isMapOpen\n  },\n  LOADING_TOGGLE (state) {\n    state.loading = !state.loading\n  },\n  SET_LOWER_FLOOR_POSITION (state, payload) {\n    state.lowerFloorPosition.x = payload.x\n    state.lowerFloorPosition.y = payload.y\n    state.lowerFloorPosition.z = payload.z\n  },\n  SET_LOWER_FLOOR_SIZE (state, payload) {\n    state.lowerFloorSize.width = payload.width\n    state.lowerFloorSize.height = payload.height\n  },\n  ADD_KEY (state, payload) {\n    state.keys.push(payload)\n  },\n  SET_ACTIVE_KEY (state, payload) {\n    const key = state.keys.find(key => key.id == payload)\n\n    if (key) {\n      key.status = true\n    }\n\n    state.keysActiveCount = state.keys.filter(key => key.status).length\n  },\n  CHARGE_BATTERY_UP (state, payload) {\n    if (state.batteryCharge < 100) {\n      if (state.batteryCharge + payload <= 100) {\n        state.batteryCharge += payload\n      } else {\n        state.batteryCharge = 100\n      }\n    }\n  },\n  CHARGE_BATTERY_DOWN (state, payload) {\n    if (state.batteryCharge != 0) {\n      if (state.batteryCharge - payload >= 0) {\n        state.batteryCharge -= payload\n      } else {\n        state.batteryCharge = 0\n      }\n    }\n  },\n  SET_FINISH (state) {\n    LevelStorage.saveCompletedLevel(state.levelId)\n    state.finish = true\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { LevelState } from '@/store/level/types'\nimport { mutations } from '@/store/level/mutations'\n\nconst state: LevelState = {\n  levelId: 0,\n  play: false,\n  loading: true,\n  dateLastUsedControllers: 0,\n  isUsedControllers: false,\n  isMapOpen: false,\n  isMenuOpen: false,\n  playerPosition: {x: 0, y: 0, z: 0},\n  playerRotate: {x: 0, y: 0},\n  lowerFloorPosition: {x: 0, y: 0, z: 0},\n  lowerFloorSize: {width: 0, height: 0},\n  keys: [],\n  keysActiveCount: 0,\n  batteryCharge: 0,\n  finish: false\n}\n\nconst getters = {\n  batteryCharge: (state: LevelState) => state.batteryCharge,\n  finish: (state: LevelState) => state.finish\n}\n\nexport const level: Module<LevelState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree } from 'vuex'\nimport { Player, Players } from '@/store/players/types'\n\nconst getPlayerById = (state: Players, playerId: string) => {\n  return state.list.find(player => player.id == playerId) as Player\n}\n\nconst playerExample: Player = {\n  id: 'new',\n  character: '',\n  items: [],\n  properties: [],\n  move: {\n    forward: {\n      front: false,\n      back: false,\n      left: false,\n      right: false,\n      isMoving: false,\n      sprint: false\n    },\n    rotate: { x: 0, y: 0 },\n    jump: false,\n    isFly: false,\n    isFlyUp: false,\n    syncData: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0 }\n    }\n  }\n}\n\nexport const mutations: MutationTree<Players> = {\n  ADD_PLAYER (state, payload) {\n    if (!getPlayerById(state, payload.id)) {\n      const newPlayer = JSON.parse(JSON.stringify(playerExample))\n      newPlayer.id = payload.id\n      newPlayer.character = 'BTLMN_Lemon.gltf'\n      newPlayer.items = payload.items\n      newPlayer.properties = payload.properties\n  \n      state.list.push(newPlayer)\n    }\n  },\n  REMOVE_PLAYER (state, playerId) {\n    state.list.splice(state.list.findIndex(player => player.id == playerId), 1)\n  },\n  FLY_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = true\n  },\n  FLY_UP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = true\n  },\n  FLY_UP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = false\n  },\n  FLY_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = false\n  },\n  SET_FORWARD (state, payload) {\n    getPlayerById(state, payload.playerId).move.forward = {...payload.forward}\n  },\n  UPDATE_ROTATE (state, payload) {\n    getPlayerById(state, payload.playerId).move.rotate = payload.rotate\n  },\n  UPDATE_ROTATION (state, payload) {\n    const playerState = getPlayerById(state, payload.playerId)\n    playerState.move.syncData.rotation.x = payload.x\n    playerState.move.syncData.rotation.y = payload.y\n  },\n  UPDATE_POSITION (state, payload) {\n    getPlayerById(state, payload.playerId).move.syncData.position = payload.position\n  },\n  JUMP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = false\n  },\n  JUMP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = true\n  },\n  JUMP_SET (state, payload) {\n    getPlayerById(state, payload.playerId).move.jump = payload.jump\n  },\n  SYNC_PLAYER (state, player) {\n    const statePlayer = getPlayerById(state, player.id)\n    \n    if (statePlayer) {\n      statePlayer.move = player.move\n    }\n  }\n}\n\n","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/players/mutations'\nimport { Players } from '@/store/players/types'\n\nconst state: Players = {\n  list: []\n}\n\nconst getters = {\n  getPlayerById: (state: Players) => (id: string) => {\n    return state.list.find(player => player.id === id)\n  }\n}\n\nexport const players: Module<Players, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","import Vuex, { StoreOptions } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { controllerMove } from '@/store/controller_move'\nimport { controllerRotate } from '@/store/controller_rotate'\nimport { settings } from '@/store/settings'\nimport { level } from '@/store/level'\nimport { players } from '@/store/players'\n\nconst store: StoreOptions<RootState> = {\n  strict: false,\n  state: {\n    player: {\n      id: ''\n    },\n    levels: [\n      {id: 1, finish: false},\n      {id: 2, finish: false},\n      {id: 3, finish: false},\n    ],\n  },\n  mutations: {\n    SET_SELF_PLAYER_ID (state, playerId) {\n      state.player.id = playerId\n    },\n  },\n  modules: {\n    players,\n    controllerMove,\n    controllerRotate,\n    level,\n    settings\n  }\n}\n\nexport default new Vuex.Store<RootState>(store)","import {\n  CubeTexture,\n  GlowLayer,\n  Matrix,\n  Tools,\n  Scene,\n  Color3,\n  DirectionalLight,\n  ShadowGenerator\n} from '@babylonjs/core'\n\nexport default class Environment {\n  shadowGenerator: ShadowGenerator | null\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.shadowGenerator = null\n  }\n\n  setupHDR () {\n    const url = process.env.VUE_APP_RESOURCES_PATH  + 'graphics/textures/environment.env'\n    const hdrTexture = CubeTexture.CreateFromPrefilteredData(url, this.scene)\n    const hdrRotation = 0\n    \n    hdrTexture.setReflectionTextureMatrix(\n      Matrix.RotationY(\n        Tools.ToRadians(hdrRotation)\n      )\n    )\n\n    hdrTexture.gammaSpace = false\n    this.scene.environmentTexture = hdrTexture\n  }\n\n  setupGlow () {\n    const gl = new GlowLayer('glow', this.scene, {\n      mainTextureFixedSize: 1054,\n      blurKernelSize: 70\n    })\n    \n    gl.intensity = 0.4\n  }\n  \n  setupFog () {\n    this.scene.fogColor = new Color3(0, 0, 0)\n    this.scene.fogDensity = 0.04\n    this.scene.fogMode = Scene.FOGMODE_EXP\n  }\n  \n  setupLightAndShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (!light) {\n      console.info('Add a light with the ID MainDirectionLight to display the shadow')\n      return\n    }\n    \n    this.shadowGenerator = new ShadowGenerator(2064, light)\n  }\n}\n","import {\n  Mesh,\n  Scene,\n  Camera,\n  Engine,\n  Vector3,\n  Matrix,\n  AbstractMesh,\n  RollingAverage, MeshBuilder, StandardMaterial, Color3, Tags,\n} from '@babylonjs/core'\nimport axios from 'axios'\n\n// TODO: разбить хелперы по категориям\n\nexport const Helpers = {\n  getRandomInt (min: number, max: number) {\n    min = Math.ceil(min)\n    max = Math.floor(max)\n    return Math.floor(Math.random() * (max - min + 1)) + min\n  },\n\n  get2DCoordinatesFromMesh (mesh: Mesh, camera: Camera, scene: Scene, engine: Engine) {\n    const pos = Vector3.Project(\n      mesh.getAbsolutePosition(),\n      Matrix.IdentityReadOnly,\n      scene.getTransformMatrix(),\n      camera.viewport.toGlobal(\n        engine.getRenderWidth(),\n        engine.getRenderHeight(),\n      ),\n    )\n\n    return {\n      top: pos.y,\n      left: pos.x\n    }\n  },\n\n  getIsSuffix (mesh: AbstractMesh, suffix: string) {\n    const nameArray = mesh.id.split('_')\n\n    if (nameArray.length) {\n      if (nameArray.find(item => item === suffix)) {\n        return true\n      }\n    }\n\n    return false\n  },\n\n  IsName (text: string, find: string, partly = false) {\n    if (text === find) {\n      return true\n    }\n\n    if (partly) {\n      return text.search(find) !== -1\n    }\n\n    return false\n  },\n\n  getMeshesByName (name: string, partly = false) {\n    return globalThis.scene.meshes.filter(mesh => Helpers.IsName(mesh.name, name, partly)) as Array<Mesh>\n  },\n\n  getMeshByName (scene: Scene, name: string, partly = false) {\n    return scene.meshes.find(mesh => Helpers.IsName(mesh.name, name, partly)) as Mesh\n  },\n\n  getTime () {\n    const date = new Date()\n    return date.getTime()\n  },\n\n  getAverage () {\n    const rollingAverage = new RollingAverage(60)\n    rollingAverage.add(scene.getAnimationRatio())\n    return rollingAverage.average\n  },\n\n  numberFixed (number: string | number, length = 10): number {\n    return Number(Number(number).toFixed(length))\n  },\n\n  getNameId (meshId: string) {\n    return meshId.split('.')[1]\n  },\n  \n  drawEllipsoid (mesh: Mesh) {\n    const scene = mesh.getScene()\n    const ellipsoid = MeshBuilder.CreateSphere('debug', { diameterX: (mesh.ellipsoid.x * 2), diameterY: (mesh.ellipsoid.y * 2), diameterZ: (mesh.ellipsoid.z * 2), segments: 16 }, scene)\n    \n    scene.onBeforeRenderObservable.add(() => {\n      ellipsoid.position.copyFrom(mesh.position)\n      ellipsoid.position.addInPlace(mesh.ellipsoidOffset)\n    })\n    \n    const debugmat = new StandardMaterial('debugmat', mesh.getScene())\n    debugmat.diffuseColor = new Color3(0, 1, 0)\n    debugmat.wireframe = true\n    ellipsoid.material = debugmat\n  },\n  isFile(url: string) {\n    if (url) {\n      const split = url.split('/')\n      if (split) {\n        const pop = split.pop()\n        if (pop) {\n          return pop.indexOf('.') > 0\n        }\n      }\n    }\n    \n    return false\n  },\n  async getFileTimestamp(filePath: string)\n  {\n    const arr = filePath.split(\"/\") // [ \"\", \"game\", \"resources\", \"graphics\", \"level_1\", \"map.babylon\" ]\n    const filePathLastFolder = arr[arr.length - 2] + \"/\" + arr[arr.length - 1] // \"level_1/map.babylon\"\n    \n    try {\n      const response = await axios.get(process.env.VUE_APP_RESOURCES_PATH + 'graphics/manifest.json')\n      const manifest = response.data\n      return manifest[filePathLastFolder] ?? new Date().getTime()\n    } catch (error) {\n      console.error('Ошибка получения manifest.json:', error)\n      return filePath\n    }\n  },\n  getTagsFromMesh(mesh: any) {\n    const rawTags = Tags.GetTags(mesh)\n    if (!rawTags || !rawTags.length) {\n      return null\n    }\n  \n    return rawTags.split(' ')\n  },\n  hasTag(mesh: any, tag: string) {\n    const tags = this.getTagsFromMesh(mesh)\n    if (tags) {\n      return tags.find((tagCheck: string) => tagCheck === tag) !== undefined\n    }\n    \n    return false\n  }\n}","import {\n  Scene as BabylonScene, Engine,\n  SceneLoader,\n  SceneOptimizerOptions,\n  SceneOptimizer,\n  AbstractMesh\n} from '@babylonjs/core'\n\nimport '@babylonjs/core/Debug/debugLayer'\nimport '@babylonjs/inspector'\nimport store from \"@/store\";\nimport Environment from '@/models/scene/Environment'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Scene {\n    scene: BabylonScene\n    engine: Engine\n    store: any\n\n    constructor (engine: Engine) {\n        this.scene = new BabylonScene(engine)\n        globalThis.scene = this.scene\n        this.store = store\n        this.engine = engine\n    }\n\n    async load (callbackLoad: () => void) {\n      window.addEventListener('resize', () => {\n        this.engine.resize()\n      })\n  \n      SceneLoader.CleanBoneMatrixWeights = true\n      SceneLoader.ShowLoadingScreen = false\n  \n      const fileName = 'map.babylon'\n      const filePath = process.env.VUE_APP_RESOURCES_PATH + 'graphics/level_' + this.store.state.level.levelId + '/'\n      \n      const timestamp = await Helpers.getFileTimestamp(filePath  + fileName)\n      const filePathWithTimestamp = fileName + '?timestamp=' + timestamp\n  \n      SceneLoader.Append(filePath, filePathWithTimestamp, this.scene, (scene) => {\n        try {\n          callbackLoad()\n        } catch (e) {\n          console.error(e)\n        }\n    \n        this.optimize(scene)\n    \n        this.engine.runRenderLoop(() => {\n          this.scene.render()\n        })\n    \n      }, null, (scene, message, error) => {\n        console.log(error, message)\n      })\n    }\n\n    private optimize (scene: BabylonScene) {\n      scene.autoClearDepthAndStencil = false\n\n      const meshNotAnimate = scene.getMeshesByTags('notAnimate')\n\n      meshNotAnimate.forEach(mesh => {\n        mesh.freezeWorldMatrix()\n        mesh.doNotSyncBoundingInfo = true\n        mesh.cullingStrategy = AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY\n      })\n\n      const options = new SceneOptimizerOptions(60, 1000)\n      const optimizer = new SceneOptimizer(scene, options)\n      optimizer.start()\n    }\n    \n    setEnvironment()\n    {\n      const environment = new Environment()\n      environment.setupHDR()\n      environment.setupGlow()\n      environment.setupLightAndShadow()\n    }\n}\n","import { Store } from 'vuex'\nimport { Sound } from '@babylonjs/core'\n\nexport default class SoundMain {\n  path: string\n\n  constructor () {\n    this.path = process.env.VUE_APP_RESOURCES_PATH + 'audio'\n  }\n\n  subscribe(store: Store<any>, sound: Sound, type: string) {\n    store.subscribe(mutation => {\n      if (mutation.type == 'SET_SETTING_FIELD_VALUE') {\n        if (mutation.payload.name == type) {\n          if (store.getters.getSettingsValueByName(type)) {\n            if (sound && !sound.isPlaying) {\n              sound.play()\n            }\n          } else {\n            if (sound && sound.isPlaying) {\n              sound.stop()\n            }\n          }\n        }\n      }\n    })\n  }\n}","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\nimport { Store } from 'vuex'\n\nexport default class Music extends SoundMain {\n  filePath: string\n  sound: Sound\n  store: Store<any>\n  \n  constructor () {\n    super()\n    this.store = store\n    this.filePath = this.path + '/level_' + this.store.state.level.levelId + '/music.wav'\n\n    this.sound = new Sound('Music', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'music')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('music'),\n      volume: 0.5\n    })\n  }\n}\n\n","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\n\nexport default class Background extends SoundMain {\n  filePath: string\n  sound: Sound\n\n  constructor () {\n    super()\n    this.filePath = this.path + '/' + 'cosmos.wav'\n\n    this.sound = new Sound('Cosmos', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'sound')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('sound')\n    })\n  }\n}\n\n","import { Engine } from '@babylonjs/core'\nimport Music from '@/models/sounds/Music'\nimport Background from '@/models/sounds/Background'\nimport store from '@/store'\n\nexport default class Audio {\n  music: any\n  isLevelRun: boolean\n  pathAudio: string\n\n  constructor () {\n    this.isLevelRun = false\n    this.pathAudio = 'resources/audio'\n    const audioEngine = Engine.audioEngine\n    if (audioEngine) {\n\n      audioEngine.useCustomUnlockedButton = true\n\n      store.subscribe(mutation => {\n        if (mutation.type == 'SET_PLAY' && !this.isLevelRun) {\n          const context = audioEngine.audioContext\n\n          if (context) {\n            context.resume()\n          }\n\n          this.isLevelRun = true\n          audioEngine.unlock()\n\n          new Music()\n          new Background()\n        }\n      })\n    }\n\n  }\n}","import store from \"@/store\";\nimport { isEqual } from 'lodash'\n\nexport default class SubscribeStore {\n  playerId: string\n  store: any\n  unsubscribes: Array<any>\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.unsubscribes = []\n    \n    this.dispose()\n  }\n  \n  move (callbackEvent: any) {\n    let oldMove = {}\n    \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n      const equal = isEqual(oldMove, stateMove)\n      \n      if (!equal) {\n        oldMove = { ...stateMove }\n        callbackEvent(stateMove)\n      }\n    })\n    \n    this.unsubscribes.push({\n      name: 'move',\n      unsubscribe\n    })\n  }\n\n  forward (callbackEvent: any) {\n    let oldForward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateForward = state.move.forward\n      const equal = isEqual(oldForward, stateForward)\n\n      if (!equal) {\n        oldForward = { ...stateForward }\n        callbackEvent(stateForward)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'forward',\n      unsubscribe\n    })\n  }\n\n  jump (callbackEvent: any) {\n    let oldStateJump = false\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateJump !== stateMove.jump) {\n        oldStateJump = stateMove.jump\n  \n        callbackEvent(stateMove.jump)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'jump',\n      unsubscribe\n    })\n  }\n\n  fly (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'fly',\n      unsubscribe\n    })\n  }\n\n  flyEnd (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (!stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'flyEnd',\n      unsubscribe\n    })\n  }\n\n  rotate (callbackEvent: any) {\n    const oldStateRotate = {\n      rotateX: 0,\n      rotateY: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateRotate.rotateX !== stateMove.rotate.x || oldStateRotate.rotateY !== stateMove.rotate.y) {\n        oldStateRotate.rotateX = stateMove.rotate.x\n        oldStateRotate.rotateY = stateMove.rotate.y\n        callbackEvent(stateMove.rotate.x, stateMove.rotate.y)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotate',\n      unsubscribe\n    })\n  }\n\n  position (callbackEvent: any) {\n    let oldStatePosition = {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const statePosition = stateMove.syncData.position\n\n      if (!isEqual(statePosition, oldStatePosition)) {\n        oldStatePosition = { ...statePosition }\n        callbackEvent(statePosition)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'position',\n      unsubscribe\n    })\n  }\n\n  rotation (callbackEvent: any) {\n    let oldStateRotation = {\n      x: 0,\n      y: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const stateRotation = stateMove.syncData.rotation\n\n      if (!isEqual(stateRotation, oldStateRotation)) {\n        oldStateRotation = { ...stateRotation }\n        callbackEvent(stateRotation)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotation',\n      unsubscribe\n    })\n  }\n  \n  syncData (callbackEvent: any) {\n    let oldSyncData = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const syncData = stateMove.syncData\n    \n      if (!isEqual(syncData, oldSyncData)) {\n        oldSyncData = {...syncData}\n        callbackEvent(syncData)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncData',\n      unsubscribe\n    })\n  }\n  \n  syncPlayer (callbackEvent: any) {\n    let oldPlayer = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n    \n      if (!isEqual(state, oldPlayer)) {\n        oldPlayer = JSON.parse(JSON.stringify(state))\n        callbackEvent(state)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncPlayer',\n      unsubscribe\n    })\n  }\n\n  getPlayerById () {\n    const state = store.getters.getPlayerById(this.playerId)\n    \n    if (!state) {\n      console.info('SubscribeStore: not found state by playerId: ' + this.playerId)\n      this.unsubscribeAll()\n    }\n    \n    return state\n  }\n  \n  private dispose()\n  {\n    const unsubscribe = this.store.subscribe(() => {\n      const player = store.getters.getPlayerById(this.playerId)\n      \n      if (!player) {\n        this.unsubscribeAll()\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'dispose',\n      unsubscribe\n    })\n  }\n  \n  unsubscribeAll() {\n    this.unsubscribes.forEach((item) => {\n      item.unsubscribe()\n    })\n  }\n}\n","import * as Colyseus from 'colyseus.js'\nimport store from '@/store'\nimport SubscribeStore from '@/models/сommon/SubscribeStore'\n\nexport default class ServerClient {\n  sessionId: string | null\n  playerId?: string\n  room?: Colyseus.Room | null\n  subscribeStore?: SubscribeStore\n  \n  constructor (playerId: string) {\n    this.sessionId = null\n    this.room = null\n    this.playerId = playerId\n  }\n  \n  init () {\n    const client = new Colyseus.Client(process.env.VUE_APP_SERVER_DOMAIN)\n    \n    client.joinOrCreate('my_room').then(room => {\n      this.room = room\n      this.room.state.players.onAdd = (player: any) => {\n        store.commit('ADD_PLAYER', player)\n      }\n  \n      this.room.state.players.onRemove = (player: any) => {\n        store.commit('REMOVE_PLAYER', player.id)\n      }\n      \n      console.info('Joined to server room')\n      \n      this.room.send('createPlayer', { playerId: this.playerId })\n      \n      this.room.onMessage('syncPlayer', (message) => {\n        store.commit('SYNC_PLAYER', message.player)\n      })\n      \n      this.room.onMessage('errorIdPlayer', (message) => {\n        if (message === 500) {\n          alert('A player with this ID will not find!')\n        }\n      })\n    })\n  }\n  \n  public syncPlayer () {\n    if (this.playerId && this.room && typeof this.room !== 'undefined') {\n      this.subscribeStore = new SubscribeStore(this.playerId)\n      \n      this.subscribeStore.syncPlayer((player: any) => {\n        this.room?.send('syncPlayer', { playerId: this.playerId, player })\n      })\n    }\n  }\n}","import { Settings } from '@/models/storage/Settings'\n\nexport default class DevMode {\n  constructor () {\n    if (Settings.getValueByName('dev_mode')) {\n      this.enabled()\n    }\n  }\n  \n  enabled () {\n    const globalRoot = document.getElementsByTagName('body')[0]\n    if (globalRoot) {\n      scene.debugLayer.show({overlay: true, globalRoot: globalRoot})\n    }\n  }\n}","import { MeshBuilder, Vector3, Tags, Observer, Nullable, Scene } from '@babylonjs/core'\n\nexport default class Body {\n  playerId: string\n  meshHeadId: string\n  meshFootId: string\n  observer: Nullable<Observer<Scene>>\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.meshHeadId = 'playerHead_' + playerId\n    this.meshFootId = 'playerFoot_' + playerId\n    this.observer = null\n    this.add()\n  }\n  \n  private add () {\n    const scene = globalThis.scene\n    const size = 0.5\n    const meshHead = MeshBuilder.CreateBox(this.meshHeadId, { size: size }, scene)\n    const meshFoot = MeshBuilder.CreateBox(this.meshFootId, { size: size }, scene)\n  \n    Tags.AddTagsTo(meshFoot, 'foot')\n    \n    meshFoot.ellipsoid = new Vector3(size / 2, size, size / 2)\n    meshFoot.ellipsoidOffset = new Vector3(0, 0.3, 0)\n\n    meshHead.rotation.x = 0\n    meshHead.rotation.z = 0\n    \n    meshFoot.position.y = 10\n  \n    const meshCoordinator = scene.getMeshById('player')\n    \n    if (meshCoordinator) {\n      meshFoot.position.z = meshCoordinator.position.z\n      meshFoot.position.x = meshCoordinator.position.x\n    }\n\n    meshFoot.rotation = new Vector3()\n\n    meshHead.visibility = 0\n    meshFoot.visibility = 0\n\n    meshHead.checkCollisions = false\n    meshFoot.checkCollisions = false\n\n    meshHead.isPickable = false\n    meshFoot.isPickable = false\n\n    meshHead.isPickable = false\n\n   this.observer = scene.onBeforeRenderObservable.add(() => {\n      meshHead.position.x = meshFoot.position.x\n      meshHead.position.y = meshFoot.position.y + 2\n      meshHead.position.z = meshFoot.position.z\n      meshHead.rotation.y = meshFoot.rotation.y\n    })\n  }\n  \n  dispose () {\n    if (this.observer !== null) {\n      scene.onBeforeRenderObservable.remove(this.observer)\n    }\n  }\n}\n","import {\n  Mesh,\n  Vector3,\n  RollingAverage,\n  Scene,\n  AbstractMesh,\n  Animation,\n  SineEase,\n  EasingFunction,\n  Tools, Nullable, Observer\n} from '@babylonjs/core'\nimport Collisions from '../mehanics/Collisions'\nimport store from '@/store/index'\nimport { Forward } from '@/store/players/types'\nimport { Helpers } from '@/models/Helpers'\n\nconst DEFAULT_SPEED = 0.07\nconst SPRINT_SPEED = 0.12\nconst GRAVITY = 0.08\nconst JUMP_HEIGHT = 1.5\n\nexport default class Move {\n  meshHead: Mesh\n  meshFoot: Mesh\n  speed: number\n  scene: Scene\n  footIsCollision: AbstractMesh | boolean\n  jumpAnimation: Animation | boolean\n  animationJumpFrames: number\n  modelCollisions: Collisions\n  store: any\n  forward: Forward\n  fly: boolean\n  flyUp: boolean\n  playerId: string\n  flyModeTimerId: number\n  observerBefore?: Nullable<Observer<Scene>>\n  observerAfter?: Nullable<Observer<Scene>>\n  rollingAverage: RollingAverage\n  \n  constructor (playerId: string, scene: Scene) {\n    this.scene = scene\n    this.store = store\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshHead = this.scene.getMeshById('playerHead_' + playerId) as Mesh\n    this.modelCollisions = globalThis.collisions\n    \n    this.fly = true\n    this.flyModeTimerId = 0\n    this.flyUp = false\n    this.playerId = playerId\n    this.animationJumpFrames = 55\n    this.footIsCollision = false\n    this.jumpAnimation = false\n    this.rollingAverage = new RollingAverage(60)\n    \n    this.forward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false,\n      sprint: false\n    }\n    \n    this.speed = DEFAULT_SPEED\n    this.createJumpAnimation()\n    \n    this.observerBefore = this.scene.onBeforeRenderObservable.add(() => {\n      this.beforeRender()\n    })\n  \n    this.observerAfter = this.scene.onAfterRenderObservable.add(() => {\n      this.afterRender()\n    })\n  }\n  \n  private createJumpAnimation () {\n    this.jumpAnimation = new Animation('jump', 'position.y', 100,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CYCLE\n    )\n    \n    const easingFunction = new SineEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEOUT)\n    this.jumpAnimation.setEasingFunction(easingFunction)\n  }\n  \n  private setAverage () {\n    this.rollingAverage.add(this.scene.getAnimationRatio())\n  }\n  \n  private move () {\n    if (!this.forward.isMoving) {\n      return null\n    }\n\n    this.changeSpeed()\n    \n    const nextStep = Vector3.Zero()\n    const average = this.rollingAverage.average\n    \n    if (this.forward.front) {\n      nextStep.z = Helpers.numberFixed(average * this.speed)\n    }\n    \n    if (this.forward.back) {\n      nextStep.z = Helpers.numberFixed(average * -this.speed)\n    }\n    \n    if (this.forward.left) {\n      nextStep.x = Helpers.numberFixed( average * -this.speed)\n    }\n    \n    if (this.forward.right) {\n      nextStep.x = Helpers.numberFixed(average * this.speed)\n    }\n    \n    this.setNewPosition(nextStep)\n  }\n  \n  private gravity () {\n    if (!this.footIsCollision) {\n      const nextStep = Vector3.Zero()\n      \n      nextStep.y = Helpers.numberFixed(this.rollingAverage.average * -GRAVITY, 4)\n      this.setNewPosition(nextStep)\n      \n      if (!this.fly && !this.flyModeTimerId) {\n        //Маленькие полеты не считаем за полет\n        this.flyModeTimerId = setTimeout(() => {\n          this.fly = true\n        }, 100)\n      }\n    } else {\n      clearTimeout(this.flyModeTimerId)\n      this.flyModeTimerId = 0\n      \n      if (this.fly) {\n        this.fly = false\n      }\n    }\n  }\n  \n  jump () {\n    if (typeof this.jumpAnimation !== 'object') {\n      console.error('Jump not set animation')\n      return\n    }\n    \n    if (this.footIsCollision) {\n      const keys = [\n        { frame: 0, value: this.meshFoot.position.y },\n        { frame: this.animationJumpFrames, value: this.meshFoot.position.y + JUMP_HEIGHT }\n      ]\n      \n      this.jumpAnimation.setKeys(keys)\n      this.meshFoot.animations = [this.jumpAnimation]\n      this.flyUp = true\n      this.scene.beginDirectAnimation(\n        this.meshFoot,\n        [this.jumpAnimation],\n        0,\n        this.animationJumpFrames,\n        false,\n        1.8,\n        () => {\n          this.flyUp = false\n        })\n    }\n  }\n  \n  private setNewPosition (nextStep: Vector3) {\n    const matrix = this.meshFoot.getWorldMatrix()\n    const vector = Vector3.TransformNormal(nextStep, matrix)\n    this.meshFoot.moveWithCollisions(vector)\n  }\n  \n  rotate (rotateX: number, rotateY: number) {\n    this.meshHead.rotation.x += rotateX\n    this.meshFoot.rotation.y += rotateY\n    \n    if (this.meshHead.rotation.x > Tools.ToRadians(90)) {\n      this.meshHead.rotation.x = Tools.ToRadians(90)\n    }\n    \n    if (this.meshHead.rotation.x < -Tools.ToRadians(45)) {\n      this.meshHead.rotation.x = -Tools.ToRadians(45)\n    }\n  }\n  \n  private changeSpeed () {\n    this.speed = this.forward.sprint ? SPRINT_SPEED : DEFAULT_SPEED\n  }\n  \n  private beforeRender () {\n    this.setAverage()\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.move()\n  }\n  \n  private afterRender () {\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.gravity()\n  }\n  \n  dispose () {\n    if (this.observerBefore) {\n      this.scene.onBeforeRenderObservable.remove(this.observerBefore)\n    }\n  \n    if (this.observerAfter) {\n      this.scene.onBeforeRenderObservable.remove(this.observerAfter)\n    }\n  }\n}\n","import MoveCommon from '../сommon/Move'\nimport { Scene } from '@babylonjs/core'\nimport { isEqual } from 'lodash'\n\nexport default class Move extends MoveCommon {\n  constructor (playerId: string, scene: Scene) {\n    super(playerId, scene)\n\n    this.updatePositionToState()\n    this.updateRotationToState()\n    this.updateFly()\n  }\n\n  private updatePositionToState () {\n    let oldPosition = {\n      x: this.meshFoot.position.x,\n      y: this.meshFoot.position.y,\n      z: this.meshFoot.position.z\n    }\n    \n    setInterval(() => {\n      const position = {\n        x: this.meshFoot.position.x,\n        y: this.meshFoot.position.y,\n        z: this.meshFoot.position.z\n      }\n      \n      if (!isEqual(oldPosition, position)) {\n        this.store.commit('UPDATE_POSITION',  { playerId: this.playerId, position })\n        oldPosition = { ...position }\n      }\n     \n    }, 100)\n  }\n\n  private updateRotationToState () {\n    let oldRotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n    \n    setInterval(() => {\n      const rotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n      \n      if (!isEqual(rotation, oldRotation)) {\n        const data = { playerId: this.playerId, x: rotation.x, y: rotation.y }\n        this.store.commit('UPDATE_ROTATION', data)\n        oldRotation = { ...rotation }\n      }\n      \n    }, 100)\n  }\n\n  private updateFly () {\n    let oldFly = false\n    let oldFlyUp = false\n\n    this.scene.onBeforeRenderObservable.add(() => {\n      if (oldFly !== this.fly) {\n        if (this.fly) {\n          this.store.commit('FLY_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_DISABLED', this.playerId)\n          this.store.commit('JUMP_DISABLED', this.playerId)\n        }\n\n        oldFly = this.fly\n      }\n\n      if (oldFlyUp !== this.flyUp) {\n        if (this.flyUp) {\n          this.store.commit('FLY_UP_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_UP_DISABLED', this.playerId)\n        }\n\n        oldFlyUp = this.flyUp\n      }\n    })\n  }\n}\n","import { Scene, KeyboardEventTypes } from '@babylonjs/core'\nimport Move from './Move'\nimport store from '@/store'\nimport { isEqual } from 'lodash'\n\nexport default class Controller {\n  sensitiveMouse: number\n  mouseIsCaptured: boolean | Element\n  store: any\n  scene: Scene\n  playerId: string\n  move: Move\n  \n  constructor () {\n    this.sensitiveMouse = 0.002\n    this.mouseIsCaptured = false\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = store.state.player.id\n    this.move = new Move(this.playerId, scene)\n    \n    this.mouseEvent()\n    \n    this.scene.onKeyboardObservable.add(event => {\n      this.keyEvent(event)\n    })\n  }\n  \n  private keyEvent (e: any) {\n    const state = store.getters.getPlayerById(this.playerId)\n    const stateMove = state.move\n    const eventCode = e.event.code\n    const eventType = e.type\n    let jump = false\n    \n    if (KeyboardEventTypes.KEYDOWN === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = true\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = true\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = true\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = true\n      }\n      \n      if (eventCode === 'Space') {\n        jump = true\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = true\n      }\n    }\n    \n    if (KeyboardEventTypes.KEYUP === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = false\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = false\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = false\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = false\n      }\n      \n      if (eventCode === 'Space') {\n        this.store.commit('JUMP_DISABLED', this.playerId)\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = false\n      }\n    }\n    \n    this.move.forward.isMoving = !(\n      !this.move.forward.left &&\n      !this.move.forward.right &&\n      !this.move.forward.back &&\n      !this.move.forward.front\n    )\n    \n    const equal = isEqual(this.move.forward, stateMove.forward)\n    \n    if (!equal) {\n      this.store.commit('SET_FORWARD', { playerId: this.playerId, forward: { ...this.move.forward } })\n    }\n    \n    if (jump && !this.move.fly) {\n      this.move.jump()\n      this.store.commit('JUMP_ENABLED', this.playerId)\n    }\n  }\n  \n  private mouseEvent () {\n    const elementContent = document.getElementById('level') as HTMLElement\n    \n    elementContent.addEventListener('click', (e) => {\n      const checkFocusAvailable = e.composedPath().find((item) => {\n        const itemChecked = item as HTMLElement\n        if(itemChecked.tagName !== undefined) {\n          return itemChecked.classList.contains('no_focus_game')\n        }\n        \n        return false\n      })\n      \n      if (!checkFocusAvailable) {\n        this.mouseIsCaptured = true\n        const canvas = document.getElementById('canvas')\n        \n        if (canvas) {\n          canvas.requestPointerLock()\n        }\n      }\n      \n    })\n    \n    const pointerlockchange = () => {\n      this.mouseIsCaptured = document.pointerLockElement || false\n    }\n    \n    document.addEventListener('pointerlockchange', pointerlockchange, false)\n    \n    window.addEventListener('pointermove', (e) => {\n      if (this.mouseIsCaptured) {\n        const rotateX = e.movementY * this.sensitiveMouse\n        const rotateY = e.movementX * this.sensitiveMouse\n        \n        this.move.rotate(rotateX, rotateY)\n        this.store.commit('UPDATE_ROTATE', { playerId: this.playerId, rotate: { x: rotateX, y: rotateY } })\n      }\n    })\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Idle implements AnimationGroupInterface {\n  playerId: string\n  animation: AnimationGroup | null\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 1\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Idle_' + playerId)\n\n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find Idle animation')\n      return\n    }\n\n    this.animation.name = 'Idle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Run implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Run_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Run animation')\n      return\n    }\n    \n    this.animation.name = 'Run_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpMiddle implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  //TODO: классы получились очень похожие, можно наследовать эти методы у общего класса\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpMiddle_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpMiddle animation')\n      return\n    }\n\n    this.animation.name = 'JumpMiddle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpFinish implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = false\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpFinish_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpFinish animation')\n      return\n    }\n    \n    this.animation.name = 'JumpFinish_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.stop()\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Sprint implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Sprint_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Sprint animation')\n      return\n    }\n    \n    this.animation.name = 'Sprint_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import SubscribeStore from '../SubscribeStore'\nimport { Scalar, Scene, AnimationEvent } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './animation_groups/AnimationGroupInterface'\nimport Idle from './animation_groups/Idle'\nimport Run from './animation_groups/Run'\nimport JumpMiddle from './animation_groups/JumpMiddle'\nimport JumpFinish from './animation_groups/JumpFinish'\nimport store from '@/store'\nimport { Move } from '@/store/players/types'\nimport Sprint from '@/models/сommon/character/animation_groups/Sprint'\n\nexport default class Animation {\n  playerId: string\n  animationGroupCurrent: AnimationGroupInterface | undefined\n  animationGroups: Array<AnimationGroupInterface>\n  store: any\n  scene: Scene\n  observableBeforeAnimation: any\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.scene = globalThis.scene\n    this.animationGroups = []\n    this.animationGroupCurrent = undefined\n\n    this.setAnimationGroups()\n\n    this.observableBeforeAnimation = () => {\n      this.onBeforeAnimation()\n    }\n  }\n\n  private setAnimationGroups () {\n    const idle = new Idle(this.playerId)\n    this.pushAnimation(idle)\n    this.pushAnimation(new Run(this.playerId))\n    this.pushAnimation(new Sprint(this.playerId))\n    this.pushAnimation(new JumpMiddle(this.playerId))\n    this.pushAnimation(new JumpFinish(this.playerId))\n    \n    if (idle.animation) {\n      this.animationGroupCurrent = this.getAnimationByName('Idle_' + this.playerId)\n      this.subscribe()\n    }\n  }\n  \n  private pushAnimation (animation: AnimationGroupInterface) {\n    if (animation.animation) {\n      this.animationGroups.push(animation)\n    }\n  }\n\n  private getAnimationByName (name: string) {\n    return this.animationGroups.find(group => group.animation && group.animation.name.includes(name)) as AnimationGroupInterface\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n    const animationJumpMiddle = this.getAnimationByName('JumpMiddle_' + this.playerId)\n    const animationJumpFinish = this.getAnimationByName('JumpFinish_' + this.playerId)\n  \n    this.subscribeStore.move((move: Move) => {\n      if (!move.isFly && !move.jump) {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      }\n    })\n  \n    this.subscribeStore.fly(() => {\n      this.blending(animationJumpMiddle)\n    })\n  \n    if (animationJumpFinish && animationJumpFinish.animation) {\n      this.subscribeStore.flyEnd(() => {\n        this.blending(animationJumpFinish)\n        if (animationJumpFinish.animation) {\n          animationJumpFinish.animation.play()\n        }\n        \n      })\n  \n      const jumpFinishAnimation = animationJumpFinish.animation.targetedAnimations[0].animation\n  \n      const JumpFinishAnimationEvent = new AnimationEvent(25, () => {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      })\n  \n      jumpFinishAnimation.addEvent(JumpFinishAnimationEvent)\n    }\n  }\n  \n  private getAnimationByState() {\n    const statePlayer = store.getters.getPlayerById(this.playerId)\n    if (!statePlayer) {\n      return null\n    }\n    \n    const move = statePlayer.move\n    const animationIdle = this.getAnimationByName('Idle_' + this.playerId)\n    const animationRun = this.getAnimationByName('Run_' + this.playerId)\n    const animationSprint = this.getAnimationByName('Sprint_' + this.playerId)\n    \n    let animation = animationIdle\n  \n    if (move.forward.isMoving) {\n      animation = animationRun\n      if (move.forward.sprint) {\n        animation = animationSprint\n      }\n    }\n    \n    return animation\n  }\n\n  private blending (animationGroup: AnimationGroupInterface) {\n    if (this.animationGroupCurrent === animationGroup) {\n      return\n    }\n\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n\n    this.animationGroupCurrent = animationGroup\n    this.scene.onBeforeAnimationsObservable.add(this.observableBeforeAnimation)\n  }\n\n  private onBeforeAnimation () {\n    if (this.animationGroupCurrent && this.animationGroupCurrent.animation) {\n      const weight = Scalar.Clamp(this.animationGroupCurrent.weight + 0.08, 0, 1)\n      this.animationGroupCurrent.weight = Number(weight.toFixed(2))\n      this.animationGroupCurrent.animation.setWeightForAllAnimatables(this.animationGroupCurrent.weight)\n    }\n\n    this.animationGroups.forEach(animationGroup => {\n      if (animationGroup.animation &&animationGroup.weight !== 0 && animationGroup !== this.animationGroupCurrent) {\n        const weight = Scalar.Clamp(animationGroup.weight - 0.08, 0, 1)\n        animationGroup.weight = Number(weight.toFixed(2))\n        animationGroup.animation.setWeightForAllAnimatables(animationGroup.weight)\n\n        if (!animationGroup.autoPlayLoop && animationGroup.weight === 0) {\n          animationGroup.animation.stop()\n        }\n      }\n    })\n\n    if (this.animationGroupCurrent && this.animationGroupCurrent.weight === 1) {\n      this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n    }\n  }\n  \n  dispose () {\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n  }\n}\n","import { AbstractMesh, Animation, CubicEase, EasingFunction, Scene, Tools } from '@babylonjs/core'\nimport SubscribeStore from '../SubscribeStore'\nimport store from '@/store'\n\nexport default class Rotation {\n  animation: Animation | undefined\n  scene: Scene\n  playerId: string\n  angle: number\n  meshCharacter: AbstractMesh\n  meshFoot: AbstractMesh\n  subscribeStore?: SubscribeStore\n  animatable: any\n  forwardAngle: number\n  isAnimated: boolean\n  syncIntervalId: any\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.angle = 0\n    // TODO: вывести в константы признак meshId\n    this.meshCharacter = this.scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as AbstractMesh\n    this.animation = undefined\n    this.animatable = undefined\n    this.isAnimated = false\n    this.forwardAngle = 0\n\n    this.setAnimation()\n    this.subscribe()\n  }\n\n  private setAnimation () {\n    this.animation = new Animation(\n      'rotateMesh',\n      'rotation.y',\n      20,\n      Animation.ANIMATIONTYPE_FLOAT\n    )\n\n    const easingFunction = new CubicEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEINOUT)\n    this.animation.setEasingFunction(easingFunction)\n  }\n\n  private setAngle () {\n    const state = store.getters.getPlayerById(this.playerId)\n    if (!state) {\n      return null\n    }\n    \n    const stateForward = state.move.forward\n\n    if (!stateForward.isMoving) {\n      return null\n    }\n\n    let angleNew = 0\n\n    if (stateForward.left) {\n      angleNew = 270\n    }\n\n    if (stateForward.right) {\n      angleNew = 90\n    }\n\n    if (stateForward.front) {\n      angleNew = 0\n\n      if (stateForward.left) {\n        angleNew = 305\n      }\n\n      if (stateForward.right) {\n        angleNew = 45\n      }\n    }\n\n    if (stateForward.back) {\n      angleNew = 180\n\n      if (stateForward.left) {\n        angleNew = 225\n      }\n\n      if (stateForward.right) {\n        angleNew = 135\n      }\n    }\n  \n    let radianNew = Tools.ToRadians(angleNew) + this.meshFoot.rotation.y\n    const radianOld = this.meshCharacter.rotation.y\n  \n    const angleOld = Tools.ToDegrees(radianOld)\n    angleNew = Tools.ToDegrees(radianNew)\n  \n    const diff = (angleNew - angleOld + 180) % 360 - 180\n    const shortWayAngle = diff < -180 ? diff + 360 : diff\n    radianNew = radianOld + Tools.ToRadians(shortWayAngle)\n    \n    const diffAngle = Math.abs(radianNew - radianOld) / (Math.PI / 180)\n  \n    if (diffAngle > 10) {\n      if (!this.isAnimated) {\n        this.stopAnimation()\n        this.play(radianNew, radianOld)\n        this.isAnimated = true\n      }\n    } else {\n      this.meshCharacter.rotation.y = radianNew\n    }\n  }\n\n  private play (radianNew: number, radianOld: number) {\n    if (this.animation === undefined) {\n      console.error('Not set animation rotate')\n      return\n    }\n\n    const keys = []\n    const frames = 10\n\n    keys.push({\n      frame: 0,\n      value: radianOld\n    })\n\n    keys.push({\n      frame: frames,\n      value: radianNew\n    })\n    \n    this.animation.setKeys(keys)\n    this.meshCharacter.animations = []\n    this.meshCharacter.animations.push(this.animation)\n  \n    this.isAnimated = true\n    this.animatable = this.scene.beginAnimation(this.meshCharacter, 0, frames, false, 1.15, () => {\n      this.isAnimated = false\n    })\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  \n    this.subscribeStore.rotate(() => {\n      const stateForward = store.getters.getPlayerById(this.playerId).move.forward\n      \n      if (stateForward.isMoving) {\n        this.setAngle()\n      }\n    })\n  \n    this.subscribeStore.forward(() => {\n      this.setAngle()\n    })\n  \n    this.syncIntervalId = setInterval(() => {\n      this.setAngle()\n    }, 100)\n  }\n  \n  private stopAnimation()\n  {\n    if (this.animatable !== undefined) {\n      this.animatable.stop()\n    }\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    \n    if (this.syncIntervalId) {\n      clearInterval(this.syncIntervalId)\n    }\n  }\n}\n","import { AbstractMesh, Mesh } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport { sortBy } from 'lodash'\n\ninterface LOD {\n  mesh: any\n  distance: number\n}\n\nexport default class LODs {\n  static getLODs(meshes: Array<AbstractMesh>)\n  {\n    const arrayLODs = [] as Array<LOD>\n    \n    meshes.forEach(mesh => {\n      const tags = Helpers.getTagsFromMesh(mesh)\n    \n      if (!tags || !tags.find((tag: string) => tag === 'lod')) {\n        return\n      }\n    \n      const tagDistance = tags.find((tag: string) => tag.indexOf('distance') !== -1)\n      const distance = tagDistance ? Number(tagDistance.split('_')[1]) : 0\n    \n      mesh.isVisible = false\n  \n      arrayLODs.push({\n        mesh: mesh,\n        distance: distance\n      })\n    })\n    \n    return sortBy(arrayLODs, 'distance').reverse()\n  }\n  \n  static addLevels(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes) as Array<LOD>\n    \n    if (arrayLODs.length) {\n      const mainLod = arrayLODs[0]\n      const mainLODMesh = mainLod.mesh as Mesh\n      \n      mainLODMesh.useLODScreenCoverage = false\n      \n      for (let i = 1; i < arrayLODs.length; i++) {\n        const LOD = arrayLODs[i]\n        mainLODMesh.addLODLevel(LOD.distance, LOD.mesh)\n      }\n  \n      mainLod.mesh.addLODLevel(mainLod.distance, null)\n    }\n  }\n  \n  static showOnlyMainLod(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes)\n    \n    if (arrayLODs.length) {\n      arrayLODs.forEach((LOD) => {\n        LOD.mesh.isVisible = false\n      })\n  \n      arrayLODs[0].mesh.isVisible = true\n    }\n  }\n}\n","import { AssetContainer, InstantiatedEntries, Mesh, SceneLoader, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport LODs from '@/models/scene/LODs'\n\nexport interface Container {\n  name: string\n  data: AssetContainer\n}\n\nexport default class ContainerManager {\n  static async getContainer(name: string, path: string): Promise<InstantiatedEntries | null> {\n    const filePath = path + name;\n    \n    if (!Helpers.isFile(filePath)) {\n      console.error('Not found file container: ' + filePath)\n      return null\n    }\n    \n    const container = globalThis.assetContainers.find((container: Container) => container.name === name)\n    \n    if (container) {\n      const instanceData = this.getInstance(container.data)\n      const meshes = instanceData.rootNodes[0].getChildMeshes()\n  \n      LODs.showOnlyMainLod(meshes)\n      globalThis.collisions.appendCollisionByMeshes(meshes)\n      \n      return instanceData\n    }\n    \n    const timestamp = await Helpers.getFileTimestamp(filePath)\n  \n    const loadedContainer = await SceneLoader.LoadAssetContainerAsync(  path, name + '?timestamp=2' + timestamp, globalThis.scene)\n    \n    if (loadedContainer) {\n      LODs.addLevels(loadedContainer.meshes)\n      \n      loadedContainer.removeAllFromScene()\n      \n      const newContainer = { name, data: loadedContainer }\n      globalThis.assetContainers.push(newContainer)\n      \n      const instancesData = this.getInstance(newContainer.data)\n      \n      const meshes = instancesData.rootNodes[0].getChildMeshes()\n      globalThis.collisions.appendCollisionByMeshes(meshes)\n      \n      LODs.showOnlyMainLod(meshes)\n      \n      return instancesData\n    }\n\n    return null\n  }\n  \n  static getInstance(assetContainer: AssetContainer)\n  {\n    const result = assetContainer.instantiateModelsToScene((name) => {\n      return name\n    }, false, { doNotInstantiate: false })\n    \n    const meshes = result.rootNodes[0].getChildMeshes()\n  \n    meshes.forEach(mesh => {\n      const assetMesh = assetContainer.meshes.find(assetMesh => assetMesh.name === mesh.name) as Mesh\n      \n      if (assetMesh) {\n        const tags = Tags.GetTags(assetMesh)\n        Tags.AddTagsTo(mesh, tags)\n      }\n    })\n    \n    return result\n  }\n}\n","import { AbstractMesh, Scene } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport store from '@/store/index'\nimport { Item, Player } from '@/store/players/types'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport default class Items {\n  characterMeshes: AbstractMesh[]\n  placeholders: AbstractMesh[]\n  playerId: string\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.scene = globalThis.scene\n    \n    const bodyMesh = scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.characterMeshes = bodyMesh.getChildMeshes()\n    this.placeholders = []\n    \n    this.setPlaceholders()\n    this.setItems()\n  }\n  \n  private setPlaceholders () {\n    this.characterMeshes.forEach(mesh => {\n      if (Helpers.IsName(mesh.id, 'placeholder', true)) {\n        mesh.isVisible = false\n        this.placeholders.push(mesh)\n      }\n    })\n  }\n  \n  private setItems () {\n    const storePlayer = store.getters.getPlayerById(this.playerId) as Player\n    \n    storePlayer.items.forEach((item: Item) => {\n      const placeholder = this.placeholders.find(placeholder => {\n        return Helpers.IsName(placeholder.id, item.type, true)\n      })\n      \n      if (!placeholder) {\n        return null\n      }\n      \n      const path = '/resources/graphics/items/'\n      const assetContainer = ContainerManager.getContainer(item.flavour + '.gltf', path)\n      \n      if (!assetContainer) {\n        console.error('Container item not load :' + item.flavour)\n        return null\n      }\n      \n      // const rootId = '__root__item_' + item.flavour + '_' + this.playerId\n      \n     /* assetContainer.then((container) => {\n        if (!container) {\n          return null\n        }\n        \n        const resources = container.instantiateModelsToScene((sourceName) => {\n          if (sourceName == '__root__') {\n            return rootId\n          }\n          \n          return sourceName + '_' + this.playerId\n        })\n        \n        const rootMesh = resources.rootNodes[0]\n        rootMesh.id = rootMesh.name\n        \n        const meshes = rootMesh.getChildMeshes()\n        \n        meshes.forEach(mesh => {\n          mesh.id = mesh.name\n          mesh.isPickable = false\n          mesh.checkCollisions = false\n        })\n        \n        if (placeholder) {\n          rootMesh.parent = placeholder\n        }\n      })*/\n      \n    })\n  }\n}","import { AbstractMesh, DirectionalLight, Mesh, Nullable, Observer, Scene, ShadowGenerator, } from '@babylonjs/core'\nimport Animation from './Animation'\nimport Rotation from './Rotation'\nimport store from '@/store/index'\nimport ContainerManager from '@/models/scene/ContainerManager'\nimport { Helpers } from '@/models/Helpers'\nimport { Property } from '@/store/players/types'\nimport Items from '@/models/сommon/character/Items'\n\nexport default class Character {\n  scene: Scene\n  mesh: AbstractMesh | undefined\n  meshFoot: Mesh | undefined\n  meshBody?: AbstractMesh\n  meshRoot?: AbstractMesh\n  playerId: string\n  meshBodyId: string\n  meshRootId: string\n  observer?: Nullable<Observer<Scene>>\n  animation?: Animation\n  rotation?: Rotation\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshBodyId = 'characterBody_' + this.playerId\n    this.meshRootId = 'characterRoot_' + this.playerId\n  }\n  \n  load (callback: any) {\n    const path = process.env.VUE_APP_RESOURCES_PATH + 'graphics/characters/'\n    // TODO: взять из store название gltf\n    const assetContainer = ContainerManager.getContainer('BTLMN_Lemon.gltf', path)\n    \n    assetContainer.then((container) => {\n      if (!container) {\n        throw 'Not found container ' + path + 'BTLMN_Lemon.gltf'\n      }\n      \n      const rootMesh = container.rootNodes[0]\n      rootMesh.id = this.meshRootId\n  \n      container.rootNodes[0].getChildMeshes().forEach((mesh) => {\n          if (mesh.name == 'Body') {\n            mesh.id = this.meshBodyId\n            mesh.name = this.meshBodyId\n            return\n          }\n  \n          mesh.id = mesh.id + '_' + this.playerId\n          mesh.name = mesh.name + '_' + this.playerId\n      })\n      \n      container.animationGroups.forEach((animationGroup) => {\n        animationGroup.name = animationGroup.name + '_' + this.playerId\n      })\n      \n      this.setMeshes()\n      this.setAnimations()\n      this.setItems()\n      this.setShadow()\n  \n      callback()\n  \n      this.observer = this.scene.onBeforeRenderObservable.add(() => {\n        this.beforeRender()\n      })\n    })\n  }\n  \n  setMeshes() {\n    const meshBody = this.scene.getMeshById(this.meshBodyId)\n    const meshRoot = this.scene.getMeshById(this.meshRootId)\n  \n    if (!meshBody) {\n      throw 'Not found mesh Player Body'\n    }\n  \n    if (!this.meshFoot) {\n      throw 'Not found mesh Player Foot'\n    }\n  \n    if (!meshRoot) {\n      throw 'Not found mesh Root'\n    }\n  \n    this.meshBody = meshBody\n    this.meshBody.rotationQuaternion = null\n    this.meshBody.resetLocalMatrix()\n    this.meshBody.isVisible = false\n    \n    this.meshRoot = meshRoot\n    this.meshRoot.id = this.meshRoot.name\n    this.meshRoot.rotationQuaternion = null\n    this.meshRoot.resetLocalMatrix()\n    \n    this.meshRoot.getChildMeshes().forEach(mesh => {\n      mesh.id = mesh.name\n      mesh.isPickable = false\n      mesh.checkCollisions = false\n    })\n  \n    this.disposeNotActiveProperties()\n  }\n  \n  filterProperties (mesh: AbstractMesh) {\n      const playerStore = store.getters.getPlayerById(this.playerId)\n      const properties = playerStore.properties\n      \n      if (!Helpers.IsName(mesh.name,'placeholder', true)) {\n        return properties.find((property: Property) => {\n          return Helpers.IsName(mesh.name, property.flavour, true)\n        })\n      }\n  \n    return true\n  }\n  \n  private disposeNotActiveProperties()\n  {\n    this.meshBody?.getChildMeshes().forEach((mesh) => {\n      if (!this.filterProperties(mesh)) {\n        mesh.dispose()\n      }\n    })\n  }\n  \n  private setItems()\n  {\n    new Items(this.playerId)\n  }\n  \n  private setAnimations () {\n    this.animation = new Animation(this.playerId)\n    this.rotation = new Rotation(this.playerId)\n  }\n  \n  private setShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (light) {\n      const shadowGenerator = light.getShadowGenerator() as ShadowGenerator\n      \n      if (this.meshBody && shadowGenerator) {\n        shadowGenerator.addShadowCaster(this.meshBody)\n      }\n      \n    }\n  }\n  \n  private beforeRender () {\n    if (this.meshRoot && this.meshFoot) {\n      this.meshRoot.position.x = this.meshFoot.position.x\n      this.meshRoot.position.z = this.meshFoot.position.z\n      this.meshRoot.position.y = this.meshFoot.position.y - 0.24\n    }\n  }\n  \n  dispose () {\n    this.rotation?.dispose()\n    this.animation?.dispose()\n    \n    if (this.observer) {\n      this.scene.onBeforeRenderObservable.remove(this.observer)\n    }\n    \n    this.scene.getMeshById('characterRoot_' + this.playerId)?.dispose()\n  }\n}\n","import {\n  Vector3,\n  UniversalCamera,\n  Scene,\n  UniversalCamera as BabylonCamera,\n  Ray,\n  AbstractMesh, Axis, Scalar\n} from '@babylonjs/core'\nimport store from '@/store'\nimport { Player } from '@/store/players/types'\n\ninterface CalculateDistance {\n  distance: number;\n  amount: number;\n}\n\nconst MAX_DIST_CAMERA_Z = 4.5\nconst MAX_DIST_CAMERA_Y = 0.5\n\nexport default class Camera {\n  scene: Scene\n  babylonCamera: BabylonCamera\n  meshHead: AbstractMesh\n  actualDistance: number\n  calculateDistance: CalculateDistance\n  isMoving: boolean\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.babylonCamera = new UniversalCamera('playerCamera', Vector3.Zero(), this.scene)\n    this.meshHead = this.scene.getMeshById('playerHead_' + store.state.player.id) as AbstractMesh\n    this.actualDistance = -MAX_DIST_CAMERA_Z\n    this.isMoving = false\n    \n    this.calculateDistance = {\n      amount: 0,\n      distance: 0\n    }\n    \n    this.init()\n  }\n  \n  private init () {\n    this.babylonCamera.maxZ = 350\n    this.babylonCamera.minZ = 0.2\n    this.babylonCamera.name = 'player'\n    this.scene.activeCamera = this.babylonCamera\n    this.attachCamera()\n    this.setIsMovingInterval()\n  }\n  \n  private attachCamera () {\n    this.scene.registerBeforeRender(() => {\n      this.setDistance()\n      this.babylonCamera.position = this.meshHead.position\n      \n      this.babylonCamera.rotation.x = Number(Scalar.Lerp(this.babylonCamera.rotation.x, this.meshHead.rotation.x, 0.4).toFixed(5))\n      this.babylonCamera.rotation.y = Number(Scalar.Lerp(this.babylonCamera.rotation.y, this.meshHead.rotation.y, 0.25).toFixed(5))\n      \n      this.actualDistance = Number(Scalar.Lerp(this.actualDistance, this.calculateDistance.distance, this.calculateDistance.amount).toFixed(5))\n      \n      const dirZ = this.babylonCamera.getDirection(Axis.Z)\n      this.babylonCamera.position.addInPlace(dirZ.scaleInPlace(this.actualDistance))\n      \n      const dirY = this.babylonCamera.getDirection(Axis.Y)\n      this.babylonCamera.position.addInPlace(dirY.scaleInPlace(-MAX_DIST_CAMERA_Y))\n    })\n  }\n  \n  private setDistance () {\n    const headPosition = this.meshHead.position\n    let forward = new Vector3(0, -MAX_DIST_CAMERA_Y, -MAX_DIST_CAMERA_Z)\n    const m = this.meshHead.getWorldMatrix()\n    forward = Vector3.TransformCoordinates(forward, m)\n    const direction = Vector3.Normalize(forward.subtract(headPosition))\n    \n    const ray = new Ray(headPosition, direction, MAX_DIST_CAMERA_Z)\n    \n    const pickResult = this.scene.pickWithRay(ray, (mesh) => {\n      return mesh.checkCollisions\n    })\n    \n    let distance = -MAX_DIST_CAMERA_Z\n    let amount = 0.02\n   \n    if (this.isMoving) {\n      distance = -MAX_DIST_CAMERA_Z - 1.2\n    }\n    \n    if (pickResult && pickResult.pickedMesh) {\n      distance = -(pickResult.distance + 0.2)\n      amount = 0.5\n    }\n  \n    this.calculateDistance.distance = distance\n    this.calculateDistance.amount = amount\n  }\n  \n  private setIsMovingInterval()\n  {\n    setInterval(() => {\n      this.isMoving = Camera.getIstMoving()\n    }, 100)\n  }\n  \n  private static getIstMoving()\n  {\n    const playerState = store.getters.getPlayerById(store.state.player.id) as Player // TODO: дописать interval на смену move\n    return playerState.move.forward.isMoving\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from '../playerSelf/Controller'\nimport { Scene } from '@babylonjs/core'\nimport Character from '@/models/сommon/character/Character'\nimport Camera from '@/models/playerSelf/Camera'\n\nexport default class Player {\n  scene: Scene\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n  \n    new Body(this.playerId)\n  \n    const character = new Character(this.playerId)\n    character.load(() => {\n      new Controller()\n      new Camera()\n    })\n  }\n}\n","import MoveCommon from '../сommon/Move'\n\nexport default class Move extends MoveCommon {\n\n}\n","import Move from './Move'\nimport SubscribeStore from '../сommon/SubscribeStore'\nimport { Scalar } from '@babylonjs/core'\nimport { Forward } from '@/store/players/types'\n\nexport default class Controller {\n  move: Move\n  playerId: string\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.move = new Move(playerId, globalThis.scene)\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  }\n\n  subscribe () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotate((rotateX: number, rotateY: number) => {\n      this.move.rotate(rotateX, rotateY)\n    })\n\n    this.subscribeStore.forward((forward: Forward) => {\n      this.move.forward = {...forward}\n    })\n\n    this.subscribeStore.jump((jump: boolean) => {\n      if (jump) {\n        this.move.jump()\n      }\n    })\n\n    this.syncPosition()\n    this.syncRotation()\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    this.move.dispose()\n  }\n\n  private syncPosition () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    let observerSyncCoordinate: any = null\n    \n    this.subscribeStore.position((position: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshFoot = this.move.meshFoot\n      const endX = Number(position.x.toFixed(5))\n      const endY = Number(position.y.toFixed(5))\n      const endZ = Number(position.z.toFixed(5))\n      const startX = Number(meshFoot.position.x.toFixed(5))\n      const startY = Number(meshFoot.position.y.toFixed(5))\n      const startZ = Number(meshFoot.position.z.toFixed(5))\n\n      if (!this.move.forward.isMoving &&\n        (\n          endX !== startX ||\n          endY !== startY ||\n          endZ !== startZ\n        )\n      ) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshFoot.position.x = Scalar.Lerp(meshFoot.position.x, endX, 0.4)\n          meshFoot.position.y = Scalar.Lerp(meshFoot.position.y, endY, 0.4)\n          meshFoot.position.z = Scalar.Lerp(meshFoot.position.z, endZ, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.position.x.toFixed(5)) === endX &&\n            Number(meshFoot.position.y.toFixed(5)) === endY &&\n            Number(meshFoot.position.z.toFixed(5)) === endZ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n\n  private syncRotation () {\n    let observerSyncCoordinate: any = null\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotation((rotation: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshHead = this.move.meshHead\n      const meshFoot = this.move.meshFoot\n\n      const endX = Number(rotation.x.toFixed(5))\n      const endY = Number(rotation.y.toFixed(5))\n      const startX = Number(meshHead.rotation.x.toFixed(5))\n      const startY = Number(meshFoot.rotation.y.toFixed(5))\n\n      if (endX !== startX || endY !== startY) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshHead.rotation.x = Scalar.Lerp(meshHead.rotation.x, endX, 0.4)\n          meshFoot.rotation.y = Scalar.Lerp(meshFoot.rotation.y, endY, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.rotation.x.toFixed(5)) === endX &&\n            Number(meshFoot.rotation.y.toFixed(5)) === endY\n          ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from './Controller'\nimport Character from '@/models/сommon/character/Character'\n\nexport default class Player {\n  body: Body\n  character: Character\n  controller?: Controller\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.body = new Body(playerId)\n    this.character = new Character(playerId)\n  \n    this.character.load(() => {\n      this.controller = new Controller(playerId)\n      this.controller.subscribe()\n    })\n  }\n  \n  dispose() {\n    console.log('try desp')\n    this.controller?.dispose()\n    this.character.dispose()\n    this.body.dispose()\n  }\n}\n","import { AbstractMesh, Scene } from '@babylonjs/core'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport default class Prefabs {\n  prefabs: AbstractMesh[]\n  scene: Scene\n  \n  constructor (callback: any) {\n    this.scene = globalThis.scene\n    this.prefabs = []\n    \n    this.setPrefabs()\n    this.setItems().then(() => {\n      console.info('All prefabs loaded!')\n      callback()\n    })\n  }\n  \n  private setPrefabs () {\n    const meshes = this.scene.getMeshesByTags('prefab')\n  \n    meshes.forEach(mesh => {\n      mesh.isVisible = false\n      this.prefabs.push(mesh)\n    })\n  }\n  \n  private async setItems() {\n    for (const prefab of this.prefabs) {\n      const nameModel = `BTLMN_Prop_${prefab.id.replace('Prefab_', '')\n        .replace(/\\.[^/.]+$/, '')}.gltf`\n      \n      const path = `${process.env.VUE_APP_RESOURCES_PATH}graphics/prefabs/`\n      \n      try {\n        const container = await ContainerManager.getContainer(nameModel, path)\n        \n        if (!container) {\n          console.error(`Error loading container ${nameModel}:`)\n          continue\n        }\n        \n        const rootMesh = container.rootNodes[0]\n        \n        if (prefab) {\n          rootMesh.parent = prefab\n        }\n        \n      } catch (error) {\n        console.error(`Error loading container ${nameModel}:`, error)\n      }\n    }\n  }\n}","import { IGLTFLoaderExtension } from '@babylonjs/loaders/glTF'\nimport { GLTFLoader } from '@babylonjs/loaders/glTF/2.0'\nimport { Tags, TransformNode } from '@babylonjs/core'\n\nclass TagsExtension implements IGLTFLoaderExtension {\n  public readonly name = 'MyTagsExtension'\n  public enabled = true\n  \n  constructor(private _loader: GLTFLoader) {}\n  \n  public loadNodeAsync(context: string, node: any, assign: (babylonTransformNode: any) => void): Promise<TransformNode> {\n    return this._loader.loadNodeAsync(context, node,  (babylonTransformNode) => {\n      if (this._loader.gltf.meshes) {\n        const mesh = this._loader.gltf.meshes[node.mesh]\n        \n        if (mesh && mesh.extras) {\n          if (mesh.extras.tags) {\n            Tags.AddTagsTo(babylonTransformNode, mesh.extras.tags)\n          }\n        }\n      }\n\n      assign(babylonTransformNode)\n    });\n  }\n  \n  public dispose(): void {\n    // Add code to dispose any resources used by the extension\n  }\n}\n\nexport default function RegisterTagsExtension () {\n  GLTFLoader.RegisterExtension('MyTagsExtension', (loader: GLTFLoader) => {\n    return new TagsExtension(loader)\n  })\n}\n","import { AbstractMesh, Scene, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Collisions {\n  listCollisions: AbstractMesh[]\n  listCollisionsFloor: AbstractMesh[]\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.listCollisions = []\n    this.listCollisionsFloor = []\n    \n    this.setCollisions()\n  }\n  \n  private setCollisions()\n  {\n    this.listCollisions = this.scene.meshes.filter(mesh => mesh.checkCollisions || Helpers.hasTag(mesh, 'collision'))\n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n    \n    this.listCollisions.forEach((mesh) => {\n      mesh.isVisible = false\n      mesh.isPickable = false\n    })\n  \n    this.scene.getMeshesByTags('visible_force').forEach((mesh) => {\n      mesh.isVisible = true\n    })\n  }\n  \n  private static checkCollisionList(mesh: AbstractMesh, list: Array<AbstractMesh>)\n  {\n    for (const keyMesh in list) {\n      const listMesh = list[keyMesh]\n      \n      if (listMesh !== mesh && mesh.intersectsMesh(listMesh, Tags.MatchesQuery(listMesh, 'precise'))) {\n        return listMesh\n      }\n    }\n  \n    return false\n  }\n  \n  checkCollisionFloor(mesh: AbstractMesh) {\n    return Collisions.checkCollisionList(mesh, this.listCollisionsFloor)\n  }\n  \n  appendCollisionByMeshes(meshes: Array<AbstractMesh>) {\n    meshes.forEach(mesh => {\n      if (mesh.checkCollisions || Helpers.hasTag(mesh, 'collision')) {\n        mesh.checkCollisions = true\n        mesh.isVisible = Helpers.hasTag(mesh, 'visible_force')\n        mesh.isPickable = false\n        \n        this.listCollisions.push(mesh)\n      }\n    })\n  \n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n  }\n}\n","import { Engine } from '@babylonjs/core'\nimport Scene from './scene/Scene'\nimport store from '@/store/index'\nimport Audio from '@/models/sounds/Audio'\nimport ServerClient from './ServerClient'\nimport DevMode from '@/models/scene/DevMode'\nimport PlayerSelf from '@/models/playerSelf/Player'\nimport Player from '@/models/player/Player'\nimport { v4 as uuidv4 } from 'uuid'\nimport Prefabs from '@/models/scene/Prefabs'\nimport RegisterTagsExtension from '@/models/scene/TagsExtansion'\nimport Collisions from '@/models/mehanics/Collisions'\n\nexport default class Game {\n  players?: Array<Player>\n  \n  init () {\n    globalThis.assetContainers = []\n    this.players = []\n    const canvas = document.getElementById('canvas') as HTMLCanvasElement\n    canvas.width = window.innerWidth\n    canvas.height = window.innerHeight\n    \n    const engine = new Engine(canvas, true, { preserveDrawingBuffer: false, stencil: true })\n    const sceneModel = new Scene(engine)\n    const playerId = this.getPlayerId()\n    store.commit('SET_SELF_PLAYER_ID', playerId)\n    \n    sceneModel.load(async () => {\n      new Audio()\n      sceneModel.setEnvironment()\n      \n      const serverClient = new ServerClient(playerId)\n      serverClient.init()\n      \n      store.subscribe(mutation => {\n        if (mutation.type === 'ADD_PLAYER') {\n          if (mutation.payload.id === playerId) {\n            new PlayerSelf(playerId)\n            \n            this.setClassesGame(() => {\n              store.commit('LOADING_TOGGLE')\n  \n              console.info('Game loaded')\n              console.info('Self player ' + playerId + ' created')\n            })\n  \n            serverClient.syncPlayer()\n \n          } else {\n            this.players?.push(new Player(mutation.payload.id))\n            console.info('Player ' + playerId + ' created')\n          }\n        }\n      })\n    })\n  \n    store.subscribe(mutation => {\n      if (mutation.type === 'REMOVE_PLAYER') {\n        const player = this.players?.find(player => player.playerId === mutation.payload)\n\n        if (player) {\n          player.dispose()\n          console.info('Player ' + player.playerId + ' removed')\n        }\n      }\n    })\n  }\n  \n  setClassesGame (callback: any) {\n   // new LightPoints()\n    RegisterTagsExtension()\n    \n    new DevMode()\n    globalThis.collisions = new Collisions()\n    \n    new Prefabs(() => {\n     // new EventPoints()\n      callback()\n    })\n  }\n  \n  getPlayerId () {\n    const queryString = window.location.search\n    const urlParams = new URLSearchParams(queryString)\n    let playerId = urlParams.get('playerId')\n    \n    if (!playerId) {\n      playerId = 'guest_' + uuidv4()\n    }\n    \n    return playerId\n  }\n}","<template>\n    <div id=\"top_bar\" class=\"no_focus_game\">\n        <div id=\"menu_button\">\n            <div class=\"menu_button\" @click=\"openMenu\"></div>\n        </div>\n\n      <meta-mask></meta-mask>\n    </div>\n</template>\n\n<script>\n  import MetaMask from '@/views/gui/topbar/MetaMask'\n\n  export default {\n    components: {\n      MetaMask\n    },\n    methods: {\n      openMenu() {\n        this.$store.commit('SET_OPEN_MENU', true)\n      }\n    }\n  }\n</script>","<template>\n  <button @click=\"connectOrChangeWallet\" class=\"wkit-button\">\n    {{ isConnected ? walletAddress.slice(0, 6) + '...' + walletAddress.slice(-4) : 'Connect' }}\n  </button>\n</template>\n\n<script>\nimport Web3 from 'web3'\nimport '../../../styles/suiet.sass'\n\nexport default {\n  data() {\n    return {\n      isConnected: false,\n      walletAddress: '',\n      web3: null\n    }\n  },\n  async created() {\n    if (window.ethereum) {\n      this.web3 = new Web3(window.ethereum)\n      const accounts = await this.web3.eth.getAccounts()\n      if (accounts.length > 0) {\n        this.isConnected = true\n        this.walletAddress = accounts[0]\n      }\n      window.ethereum.on('accountsChanged', (accounts) => {\n        if (accounts.length === 0) {\n          this.isConnected = false\n        } else {\n          this.walletAddress = accounts[0]\n        }\n      })\n    } else {\n      console.log('Metamask is not installed. Please consider installing it: https://metamask.io/download.html')\n    }\n  },\n  methods: {\n    async connectOrChangeWallet() {\n      if (window.ethereum) {\n        if (this.isConnected) {\n         //  window.ethereum.disconnect()\n          this.isConnected = false\n        } else {\n          try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n            this.isConnected = true\n            this.walletAddress = accounts[0]\n          } catch (error) {\n            console.error('User rejected connection:', error)\n          }\n        }\n      }\n    }\n  }\n}\n</script>","import { render } from \"./MetaMask.vue?vue&type=template&id=72f35d85\"\nimport script from \"./MetaMask.vue?vue&type=script&lang=js\"\nexport * from \"./MetaMask.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TopBar.vue?vue&type=template&id=0780d5ea\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"level_preview\" }\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"text\" }, \" Are you ready? \", -1)\nconst _hoisted_4 = { class: \"container_button\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.play && _ctx.play(...args))),\n          class: \"button\"\n        }, \"play\")\n      ])\n    ])\n  ], 512)), [\n    [_vShow, !this.$store.state.level.loading && this.show]\n  ])\n}","\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'LevelPreview',\n  methods: {\n    play () {\n      this.$store.commit('SET_PLAY')\n      this.show = false\n    }\n  },\n  data () {\n    return {\n      show: true\n    }\n  }\n})\n","import { render } from \"./LevelPreview.vue?vue&type=template&id=17485c69&ts=true\"\nimport script from \"./LevelPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LevelPreview.vue?vue&type=script&lang=ts\"\n\nimport \"./LevelPreview.vue?vue&type=style&index=0&id=17485c69&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"menu\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Menu\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"li\", null, [\n  /*#__PURE__*/_createElementVNode(\"a\", { href: \"/home\" }, \"Exit\")\n], -1)\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"a\", {\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.openSettings && _ctx.openSettings(...args)))\n            }, \"Settings\")\n          ]),\n          _hoisted_6\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.closeMenu && _ctx.closeMenu(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.level.isMenuOpen]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    methods: {\n      closeMenu() {\n        this.$store.commit('SET_OPEN_MENU', false)\n      },\n      openSettings() {\n        this.$store.commit('SET_SETTINGS_OPEN', true)\n      }\n    }\n  })\n","import { render } from \"./MenuLevel.vue?vue&type=template&id=621e8932&ts=true\"\nimport script from \"./MenuLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuLevel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"settings\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Settings\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = [\"onChange\", \"checked\"]\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.fields, (field, index) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: index }, [\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  onChange: ($event: any) => (_ctx.saveField(field.name, $event)),\n                  checked: field.value\n                }, null, 40, _hoisted_6),\n                _createTextVNode(\" \" + _toDisplayString(field.name), 1)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.close && _ctx.close(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.settings.open]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    name: 'game-home',\n    computed: {\n      fields(): any {\n        return this.$store.getters.settingFields\n      }\n    },\n    methods: {\n      saveField (name: string, event: any) {\n        this.$nextTick(() => {\n          this.$store.commit('SET_SETTING_FIELD_VALUE', {name, value: event.target.checked})\n        })\n\n\n      },\n      close () {\n        this.$store.commit('SET_SETTINGS_OPEN', false)\n      }\n    },\n    data: function () {\n      return {\n        soundEnable: true\n      }\n    }\n  })\n","import { render } from \"./Settings.vue?vue&type=template&id=00492990&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\n  import { defineComponent } from 'vue'\n  import Game from '@/models/Game'\n  import TopBar from '@/views/gui/topbar/TopBar.vue'\n  import LevelPreview from '@/views/LevelPreview.vue'\n  import MenuLevel from '@/views/gui/MenuLevel.vue'\n  import Settings from '@/views/gui/Settings.vue'\n  import { mapGetters } from 'vuex'\n\n  export default defineComponent({\n    name: 'game-level',\n    mounted (): void {\n      this.$nextTick(() => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const level = urlParams.get('level')\n        this.$store.commit('SET_LEVEL', level ? level : 1)\n        const game = new Game()\n        game.init()\n      })\n    },\n    computed: {\n      ...mapGetters([\n        'finish'\n      ])\n    },\n    watch: {\n      finish(value) {\n        if (value) {\n          window.location.href = '/finish'\n        }\n      }\n    },\n    components: {\n      TopBar,\n      LevelPreview,\n      MenuLevel,\n      Settings\n    }\n  })\n","import { render } from \"./App.vue?vue&type=template&id=340def46&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=340def46&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-340def46\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\n/* Theme variables */\nimport './styles/app.sass'\n\nimport store from '@/store/index'\n\ncreateApp(App)\n  .use(store)\n  .mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbabylon_js\"] = self[\"webpackChunkbabylon_js\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7560); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","id","_hoisted_2","_createElementVNode","_hoisted_3","key","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_TopBar","_resolveComponent","_component_MenuLevel","_component_Settings","_component_LevelPreview","_openBlock","_createElementBlock","_createVNode","this","$store","state","level","loading","_createCommentVNode","mutations","SET_PRESS_MOVE_RIGHT","payload","right","SET_PRESS_MOVE_LEFT","left","SET_PRESS_MOVE_UP","up","SET_PRESS_MOVE_DOWN","down","SET_MOVE_LAST_EVENT","lastEvent","SET_IS_USED_MOVE_CONTROLLER","isUsed","getters","controllerMoveIsUsed","controllerMove","SET_PRESS_ROTATE_RIGHT","SET_PRESS_ROTATE_LEFT","SET_PRESS_ROTATE_UP","SET_PRESS_ROTATE_DOWN","SET_ROTATE_LAST_EVENT","SET_IS_USED_ROTATE_CONTROLLER","controllerRotate","Settings","fields","name","value","label","validateFieldName","field","find","setValueByName","getFields","settings","map","localStorage","setItem","JSON","stringify","getValueByName","settingsStorage","getItem","parse","String","oldField","settingField","SET_SETTINGS_OPEN","open","SET_SETTING_FIELD_VALUE","SettingsStorage","forEach","SettingsLocalStorage","settingFields","getSettingsFieldByName","getSettingsValueByName","Level","saveCompletedLevel","levelId","checkCompletedLevelId","levelsIds","getCompletedLevelsIds","push","join","setLastCompletedLevelId","completedLevels","split","getLastCompletedLevelId","Number","ids","SET_LEVEL","SET_PLAY","play","SET_OPEN_MENU","isMenuOpen","SET_DATE_LAST_USED_CONTROLLERS","dateLastUsedControllers","SET_IS_USED_CONTROLLERS","isUsedControllers","MAP_TOGGLE","isMapOpen","LOADING_TOGGLE","SET_LOWER_FLOOR_POSITION","lowerFloorPosition","x","y","z","SET_LOWER_FLOOR_SIZE","lowerFloorSize","width","height","ADD_KEY","keys","SET_ACTIVE_KEY","status","keysActiveCount","filter","length","CHARGE_BATTERY_UP","batteryCharge","CHARGE_BATTERY_DOWN","SET_FINISH","LevelStorage","finish","playerPosition","playerRotate","getPlayerById","playerId","list","player","playerExample","character","items","properties","move","forward","front","back","isMoving","sprint","rotate","jump","isFly","isFlyUp","syncData","position","rotation","ADD_PLAYER","newPlayer","REMOVE_PLAYER","splice","findIndex","FLY_ENABLED","FLY_UP_ENABLED","FLY_UP_DISABLED","FLY_DISABLED","SET_FORWARD","UPDATE_ROTATE","UPDATE_ROTATION","playerState","UPDATE_POSITION","JUMP_DISABLED","JUMP_ENABLED","JUMP_SET","SYNC_PLAYER","statePlayer","players","store","strict","levels","SET_SELF_PLAYER_ID","modules","Vuex","Environment","constructor","_defineProperty","scene","globalThis","shadowGenerator","setupHDR","url","process","hdrTexture","CubeTexture","hdrRotation","setReflectionTextureMatrix","Matrix","Tools","gammaSpace","environmentTexture","setupGlow","gl","GlowLayer","mainTextureFixedSize","blurKernelSize","intensity","setupFog","fogColor","Color3","fogDensity","fogMode","Scene","setupLightAndShadow","light","getLightById","ShadowGenerator","console","info","Helpers","getRandomInt","min","max","Math","ceil","floor","random","get2DCoordinatesFromMesh","mesh","camera","engine","pos","Vector3","getAbsolutePosition","getTransformMatrix","viewport","toGlobal","getRenderWidth","getRenderHeight","top","getIsSuffix","suffix","nameArray","item","IsName","text","partly","arguments","undefined","search","getMeshesByName","meshes","getMeshByName","getTime","date","Date","getAverage","rollingAverage","RollingAverage","add","getAnimationRatio","average","numberFixed","number","toFixed","getNameId","meshId","drawEllipsoid","getScene","ellipsoid","MeshBuilder","diameterX","diameterY","diameterZ","segments","onBeforeRenderObservable","copyFrom","addInPlace","ellipsoidOffset","debugmat","StandardMaterial","diffuseColor","wireframe","material","isFile","pop","indexOf","async","filePath","arr","filePathLastFolder","response","axios","manifest","data","error","getTagsFromMesh","rawTags","Tags","hasTag","tag","tags","tagCheck","BabylonScene","callbackLoad","window","addEventListener","resize","SceneLoader","fileName","timestamp","getFileTimestamp","filePathWithTimestamp","e","optimize","runRenderLoop","message","log","autoClearDepthAndStencil","meshNotAnimate","getMeshesByTags","freezeWorldMatrix","doNotSyncBoundingInfo","cullingStrategy","AbstractMesh","options","SceneOptimizerOptions","optimizer","SceneOptimizer","start","setEnvironment","environment","SoundMain","path","subscribe","sound","type","mutation","isPlaying","stop","Music","super","Sound","loop","autoplay","volume","Background","Audio","isLevelRun","pathAudio","audioEngine","Engine","useCustomUnlockedButton","context","audioContext","resume","unlock","SubscribeStore","unsubscribes","dispose","callbackEvent","oldMove","unsubscribe","stateMove","equal","isEqual","oldForward","stateForward","oldStateJump","fly","oldState","flyEnd","oldStateRotate","rotateX","rotateY","oldStatePosition","statePosition","oldStateRotation","stateRotation","oldSyncData","syncPlayer","oldPlayer","unsubscribeAll","ServerClient","sessionId","room","init","client","Colyseus","joinOrCreate","then","onAdd","onRemove","send","onMessage","alert","subscribeStore","DevMode","enabled","globalRoot","document","getElementsByTagName","debugLayer","show","overlay","Body","meshHeadId","meshFootId","observer","size","meshHead","meshFoot","meshCoordinator","getMeshById","visibility","checkCollisions","isPickable","remove","DEFAULT_SPEED","SPRINT_SPEED","GRAVITY","JUMP_HEIGHT","Move","modelCollisions","collisions","flyModeTimerId","flyUp","animationJumpFrames","footIsCollision","jumpAnimation","speed","createJumpAnimation","observerBefore","beforeRender","observerAfter","onAfterRenderObservable","afterRender","Animation","easingFunction","SineEase","setEasingMode","EasingFunction","setEasingFunction","setAverage","changeSpeed","nextStep","setNewPosition","gravity","clearTimeout","setTimeout","frame","setKeys","animations","beginDirectAnimation","matrix","getWorldMatrix","vector","moveWithCollisions","checkCollisionFloor","MoveCommon","updatePositionToState","updateRotationToState","updateFly","oldPosition","setInterval","commit","oldRotation","oldFly","oldFlyUp","Controller","sensitiveMouse","mouseIsCaptured","mouseEvent","onKeyboardObservable","event","keyEvent","eventCode","code","eventType","KeyboardEventTypes","elementContent","getElementById","checkFocusAvailable","composedPath","itemChecked","tagName","classList","contains","canvas","requestPointerLock","pointerlockchange","pointerLockElement","movementY","movementX","Idle","weight","autoPlayLoop","animation","getAnimationGroupByName","setAnimations","setWeightForAllAnimatables","Run","JumpMiddle","JumpFinish","Sprint","animationGroups","animationGroupCurrent","setAnimationGroups","observableBeforeAnimation","onBeforeAnimation","idle","pushAnimation","getAnimationByName","group","includes","animationJumpMiddle","animationJumpFinish","getAnimationByState","blending","jumpFinishAnimation","targetedAnimations","JumpFinishAnimationEvent","AnimationEvent","addEvent","animationIdle","animationRun","animationSprint","animationGroup","onBeforeAnimationsObservable","removeCallback","Scalar","Rotation","angle","meshCharacter","animatable","isAnimated","forwardAngle","setAnimation","CubicEase","setAngle","angleNew","radianNew","radianOld","angleOld","diff","shortWayAngle","diffAngle","abs","PI","stopAnimation","frames","beginAnimation","syncIntervalId","clearInterval","LODs","static","arrayLODs","tagDistance","distance","isVisible","sortBy","reverse","getLODs","mainLod","mainLODMesh","useLODScreenCoverage","i","LOD","addLODLevel","ContainerManager","container","assetContainers","instanceData","getInstance","rootNodes","getChildMeshes","showOnlyMainLod","appendCollisionByMeshes","loadedContainer","addLevels","removeAllFromScene","newContainer","instancesData","assetContainer","result","instantiateModelsToScene","doNotInstantiate","assetMesh","Items","bodyMesh","characterMeshes","placeholders","setPlaceholders","setItems","storePlayer","placeholder","getContainer","flavour","Character","meshBodyId","meshRootId","load","callback","rootMesh","setMeshes","setShadow","meshBody","meshRoot","rotationQuaternion","resetLocalMatrix","disposeNotActiveProperties","filterProperties","playerStore","property","getShadowGenerator","addShadowCaster","MAX_DIST_CAMERA_Z","MAX_DIST_CAMERA_Y","Camera","babylonCamera","UniversalCamera","actualDistance","calculateDistance","amount","maxZ","minZ","activeCamera","attachCamera","setIsMovingInterval","registerBeforeRender","setDistance","dirZ","getDirection","Axis","scaleInPlace","dirY","headPosition","m","direction","subtract","ray","Ray","pickResult","pickWithRay","pickedMesh","getIstMoving","Player","syncPosition","syncRotation","observerSyncCoordinate","endX","endY","endZ","startX","startY","startZ","body","controller","Prefabs","prefabs","setPrefabs","prefab","nameModel","replace","parent","TagsExtension","_loader","loadNodeAsync","node","assign","babylonTransformNode","gltf","extras","RegisterTagsExtension","GLTFLoader","loader","Collisions","listCollisions","listCollisionsFloor","setCollisions","keyMesh","listMesh","intersectsMesh","checkCollisionList","Game","innerWidth","innerHeight","preserveDrawingBuffer","stencil","sceneModel","getPlayerId","serverClient","PlayerSelf","setClassesGame","queryString","location","urlParams","URLSearchParams","get","uuidv4","class","onClick","openMenu","_component_meta_mask","connectOrChangeWallet","isConnected","walletAddress","slice","web3","ethereum","Web3","accounts","eth","getAccounts","on","methods","request","method","__exports__","components","MetaMask","_withDirectives","_vShow","defineComponent","_hoisted_6","href","_hoisted_7","openSettings","closeMenu","_Fragment","_renderList","index","onChange","$event","saveField","checked","_createTextVNode","_toDisplayString","close","computed","$nextTick","target","soundEnable","mounted","game","mapGetters","watch","TopBar","LevelPreview","MenuLevel","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","every","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}