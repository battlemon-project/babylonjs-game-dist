{"version":3,"file":"assets/js/app.9ae24f61.js","mappings":"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","sources":["webpack://babylon_js/./src/App.vue?0fd5","webpack://babylon_js/./src/store/controller_move/mutations.ts","webpack://babylon_js/./src/store/controller_move/index.ts","webpack://babylon_js/./src/store/controller_rotate/mutations.ts","webpack://babylon_js/./src/store/controller_rotate/index.ts","webpack://babylon_js/./src/models/storage/Settings.ts","webpack://babylon_js/./src/store/settings/mutations.ts","webpack://babylon_js/./src/store/settings/index.ts","webpack://babylon_js/./src/models/storage/Level.ts","webpack://babylon_js/./src/store/level/mutations.ts","webpack://babylon_js/./src/store/level/index.ts","webpack://babylon_js/./src/store/players/mutations.ts","webpack://babylon_js/./src/store/players/index.ts","webpack://babylon_js/./src/store/index.ts","webpack://babylon_js/./src/models/scene/Environment.ts","webpack://babylon_js/./src/models/Helpers.ts","webpack://babylon_js/./src/models/scene/Scene.ts","webpack://babylon_js/./src/models/sounds/SoundMain.ts","webpack://babylon_js/./src/models/sounds/Music.ts","webpack://babylon_js/./src/models/sounds/Background.ts","webpack://babylon_js/./src/models/sounds/Audio.ts","webpack://babylon_js/./src/models/сommon/SubscribeStore.ts","webpack://babylon_js/./src/models/ServerClient.ts","webpack://babylon_js/./src/models/scene/DevMode.ts","webpack://babylon_js/./src/models/сommon/Body.ts","webpack://babylon_js/./src/models/сommon/Move.ts","webpack://babylon_js/./src/models/playerSelf/Move.ts","webpack://babylon_js/./src/models/playerSelf/Controller.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Idle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Run.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpMiddle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpFinish.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Sprint.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Picking.ts","webpack://babylon_js/./src/models/сommon/character/Animation.ts","webpack://babylon_js/./src/models/сommon/character/Rotation.ts","webpack://babylon_js/./src/models/scene/LODs.ts","webpack://babylon_js/./src/models/scene/ContainerManager.ts","webpack://babylon_js/./src/models/сommon/character/Items.ts","webpack://babylon_js/./src/models/сommon/character/Character.ts","webpack://babylon_js/./src/models/playerSelf/Camera.ts","webpack://babylon_js/./src/models/playerSelf/Player.ts","webpack://babylon_js/./src/models/player/Move.ts","webpack://babylon_js/./src/models/player/Controller.ts","webpack://babylon_js/./src/models/player/Player.ts","webpack://babylon_js/./src/models/scene/Prefabs.ts","webpack://babylon_js/./src/models/scene/TagsExtansion.ts","webpack://babylon_js/./src/models/mehanics/Collisions.ts","webpack://babylon_js/./src/models/events/IceMeteor.ts","webpack://babylon_js/./src/models/Game.ts","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue","webpack://babylon_js/./src/views/gui/topbar/MetaMask.vue","webpack://babylon_js/./src/views/gui/topbar/MetaMask.vue?f535","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue?ecd8","webpack://babylon_js/./src/views/LevelPreview.vue?7c7b","webpack://babylon_js/./src/views/LevelPreview.vue?526f","webpack://babylon_js/./src/views/LevelPreview.vue","webpack://babylon_js/./src/views/gui/MenuLevel.vue?c446","webpack://babylon_js/./src/views/gui/MenuLevel.vue?7df6","webpack://babylon_js/./src/views/gui/MenuLevel.vue","webpack://babylon_js/./src/views/gui/Settings.vue?9ce8","webpack://babylon_js/./src/views/gui/Settings.vue?74aa","webpack://babylon_js/./src/views/gui/Settings.vue","webpack://babylon_js/./src/App.vue?847a","webpack://babylon_js/./src/App.vue","webpack://babylon_js/./src/main.ts","webpack://babylon_js/webpack/bootstrap","webpack://babylon_js/webpack/runtime/chunk loaded","webpack://babylon_js/webpack/runtime/compat get default export","webpack://babylon_js/webpack/runtime/define property getters","webpack://babylon_js/webpack/runtime/global","webpack://babylon_js/webpack/runtime/hasOwnProperty shorthand","webpack://babylon_js/webpack/runtime/make namespace object","webpack://babylon_js/webpack/runtime/node module decorator","webpack://babylon_js/webpack/runtime/jsonp chunk loading","webpack://babylon_js/webpack/startup"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-340def46\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"level\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", { id: \"canvas\" }, null, -1))\nconst _hoisted_3 = {\n  key: 0,\n  id: \"loading_overlay\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { id: \"loading_overlay_text\" }, \"Loading...\", -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TopBar = _resolveComponent(\"TopBar\")!\n  const _component_MenuLevel = _resolveComponent(\"MenuLevel\")!\n  const _component_Settings = _resolveComponent(\"Settings\")!\n  const _component_LevelPreview = _resolveComponent(\"LevelPreview\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createVNode(_component_TopBar),\n      _createVNode(_component_MenuLevel),\n      _createVNode(_component_Settings),\n      (this.$store.state.level.loading)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _hoisted_5))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_LevelPreview)\n    ])\n  ]))\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_move/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_MOVE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_MOVE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_MOVE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_MOVE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_MOVE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_MOVE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_move/types'\nimport { mutations } from '@/store/controller_move/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nconst getters = {\n  controllerMoveIsUsed: (state: ControllerState) => state.isUsed,\n}\n\nexport const controllerMove: Module<ControllerState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_rotate/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_ROTATE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_ROTATE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_ROTATE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_ROTATE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_ROTATE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_ROTATE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_rotate/types'\nimport { mutations } from '@/store/controller_rotate/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nexport const controllerRotate: Module<ControllerState, RootState> = {\n  state,\n  mutations\n}","export interface Field {\n  name: string;\n  value: any;\n  label: string;\n}\n\nexport const Settings = {\n  fields: [\n    {\n      name: 'music',\n      value: true,\n      label: 'Music'\n    },\n    {\n      name: 'sound',\n      value: true,\n      label: 'Sound'\n    },\n    {\n      name: 'dev_mode',\n      value: false,\n      label: 'Dev mode'\n    }\n  ],\n  validateFieldName(name: string) {\n    const field = this.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return true\n  },\n  setValueByName (name: string, value: any) {\n    this.validateFieldName(name)\n    const fields = this.getFields()\n\n    const settings = fields.map((field: Field) => {\n      if (field.name == name) {\n        field.value = value\n      }\n\n      return field\n    })\n\n    localStorage.setItem('settings', JSON.stringify(settings))\n\n    return true\n  },\n  getValueByName (name: string) {\n    const fields = this.getFields()\n    const field = fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return field.value\n  },\n  getFields () {\n    const settingsStorage = localStorage.getItem('settings')\n    if (settingsStorage) {\n      const settings = JSON.parse(String(settingsStorage))\n      return this.fields.map(field => {\n        const oldField = settings.find((settingField: any) => settingField.name == field.name)\n        if (oldField) {\n          field.value = oldField.value\n        }\n\n        return field\n      })\n    }\n\n    return this.fields\n  }\n}","import { MutationTree } from 'vuex'\nimport { Settings } from '@/store/settings/types'\nimport { Settings as SettingsStorage } from '@/models/storage/Settings'\n\nexport const mutations: MutationTree<Settings> = {\n  SET_SETTINGS_OPEN (state, payload) {\n    state.open = payload\n  },\n  SET_SETTING_FIELD_VALUE (state, payload) {\n    if (SettingsStorage.validateFieldName(payload.name)) {\n      SettingsStorage.setValueByName(payload.name, payload.value)\n      state.fields.forEach((field) => {\n        if (field.name === payload.name) {\n          field.value = payload.value\n        }\n      })\n    }\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/settings/mutations'\nimport { Settings } from '@/store/settings/types'\nimport { Field, Settings as SettingsLocalStorage } from '@/models/storage/Settings'\n\n\nconst state: Settings = {\n  fields: SettingsLocalStorage.getFields(),\n  open: false\n}\n\nconst getters = {\n  settingFields: (state: Settings) => state.fields,\n  getSettingsFieldByName: (state: Settings) => (name: string) => {\n    return state.fields.find(field => field.name == name)\n  },\n  getSettingsValueByName: (state: Settings) => (name: string) => {\n    const field = state.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field in Store state'\n    }\n\n    return field.value\n  }\n}\n\nexport const settings: Module<Settings, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","export const Level = {\n  saveCompletedLevel (levelId: number | string) {\n    if (!this.checkCompletedLevelId(levelId)) {\n      const levelsIds = this.getCompletedLevelsIds()\n      levelsIds.push(String(levelId))\n\n      localStorage.setItem('completedLevelsIds', levelsIds.join(','))\n    }\n\n    this.setLastCompletedLevelId(String(levelId))\n  },\n  getCompletedLevelsIds () {\n    const completedLevels = localStorage.getItem('completedLevelsIds')\n    return completedLevels ? completedLevels.split(',') : []\n  },\n  getLastCompletedLevelId () {\n    return Number(localStorage.getItem('lastCompletedLevelsId'))\n  },\n  setLastCompletedLevelId(levelId: string) {\n    return localStorage.setItem('lastCompletedLevelsId', levelId)\n  },\n  checkCompletedLevelId(levelId: number | string) {\n    const ids = this.getCompletedLevelsIds()\n    return ids.find(id => id == levelId)\n  }\n}","import { MutationTree } from 'vuex'\nimport { LevelState } from '@/store/level/types'\nimport { Level as LevelStorage } from '@/models/storage/Level'\n\nexport const mutations: MutationTree<LevelState> = {\n  SET_LEVEL (state, payload) {\n    state.levelId = payload\n  },\n  SET_PLAY (state) {\n    state.play = true\n  },\n  SET_OPEN_MENU (state, payload) {\n    state.isMenuOpen = payload\n  },\n  SET_DATE_LAST_USED_CONTROLLERS (state, payload) {\n    state.dateLastUsedControllers = payload\n  },\n  SET_IS_USED_CONTROLLERS (state, payload) {\n    state.isUsedControllers = payload\n  },\n  MAP_TOGGLE (state) {\n    state.isMapOpen = !state.isMapOpen\n  },\n  LOADING_TOGGLE (state) {\n    state.loading = !state.loading\n  },\n  SET_LOWER_FLOOR_POSITION (state, payload) {\n    state.lowerFloorPosition.x = payload.x\n    state.lowerFloorPosition.y = payload.y\n    state.lowerFloorPosition.z = payload.z\n  },\n  SET_LOWER_FLOOR_SIZE (state, payload) {\n    state.lowerFloorSize.width = payload.width\n    state.lowerFloorSize.height = payload.height\n  },\n  ADD_KEY (state, payload) {\n    state.keys.push(payload)\n  },\n  SET_ACTIVE_KEY (state, payload) {\n    const key = state.keys.find(key => key.id == payload)\n\n    if (key) {\n      key.status = true\n    }\n\n    state.keysActiveCount = state.keys.filter(key => key.status).length\n  },\n  CHARGE_BATTERY_UP (state, payload) {\n    if (state.batteryCharge < 100) {\n      if (state.batteryCharge + payload <= 100) {\n        state.batteryCharge += payload\n      } else {\n        state.batteryCharge = 100\n      }\n    }\n  },\n  CHARGE_BATTERY_DOWN (state, payload) {\n    if (state.batteryCharge != 0) {\n      if (state.batteryCharge - payload >= 0) {\n        state.batteryCharge -= payload\n      } else {\n        state.batteryCharge = 0\n      }\n    }\n  },\n  SET_FINISH (state) {\n    LevelStorage.saveCompletedLevel(state.levelId)\n    state.finish = true\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { LevelState } from '@/store/level/types'\nimport { mutations } from '@/store/level/mutations'\n\nconst state: LevelState = {\n  levelId: 0,\n  play: false,\n  loading: true,\n  dateLastUsedControllers: 0,\n  isUsedControllers: false,\n  isMapOpen: false,\n  isMenuOpen: false,\n  playerPosition: {x: 0, y: 0, z: 0},\n  playerRotate: {x: 0, y: 0},\n  lowerFloorPosition: {x: 0, y: 0, z: 0},\n  lowerFloorSize: {width: 0, height: 0},\n  keys: [],\n  keysActiveCount: 0,\n  batteryCharge: 0,\n  finish: false\n}\n\nconst getters = {\n  batteryCharge: (state: LevelState) => state.batteryCharge,\n  finish: (state: LevelState) => state.finish\n}\n\nexport const level: Module<LevelState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree } from 'vuex'\nimport { Player, Players } from '@/store/players/types'\n\nconst getPlayerById = (state: Players, playerId: string) => {\n  return state.list.find(player => player.id == playerId) as Player\n}\n\nconst playerExample: Player = {\n  id: 'new',\n  character: '',\n  items: [],\n  properties: [],\n  move: {\n    forward: {\n      front: false,\n      back: false,\n      left: false,\n      right: false,\n      isMoving: false,\n      sprint: false\n    },\n    rotate: { x: 0, y: 0 },\n    jump: false,\n    isFly: false,\n    isFlyUp: false,\n    syncData: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0 }\n    }\n  },\n  event: {\n    press: false,\n    isFocused: false\n  }\n}\n\nexport const mutations: MutationTree<Players> = {\n  ADD_PLAYER (state, payload) {\n    if (!getPlayerById(state, payload.id)) {\n      const newPlayer = JSON.parse(JSON.stringify(playerExample))\n      newPlayer.id = payload.id\n      newPlayer.character = 'BTLMN_Lemon.gltf'\n      newPlayer.items = payload.items\n      newPlayer.properties = payload.properties\n  \n      state.list.push(newPlayer)\n    }\n  },\n  REMOVE_PLAYER (state, playerId) {\n    state.list.splice(state.list.findIndex(player => player.id == playerId), 1)\n  },\n  FLY_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = true\n  },\n  FLY_UP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = true\n  },\n  FLY_UP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = false\n  },\n  FLY_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = false\n  },\n  SET_FORWARD (state, payload) {\n    getPlayerById(state, payload.playerId).move.forward = {...payload.forward}\n  },\n  UPDATE_ROTATE (state, payload) {\n    getPlayerById(state, payload.playerId).move.rotate = payload.rotate\n  },\n  UPDATE_ROTATION (state, payload) {\n    const playerState = getPlayerById(state, payload.playerId)\n    playerState.move.syncData.rotation.x = payload.x\n    playerState.move.syncData.rotation.y = payload.y\n  },\n  UPDATE_POSITION (state, payload) {\n    getPlayerById(state, payload.playerId).move.syncData.position = payload.position\n  },\n  JUMP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = false\n  },\n  JUMP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = true\n  },\n  JUMP_SET (state, payload) {\n    getPlayerById(state, payload.playerId).move.jump = payload.jump\n  },\n  SYNC_PLAYER (state, player) {\n    const statePlayer = getPlayerById(state, player.id)\n    \n    if (statePlayer) {\n      statePlayer.move = player.move\n    }\n  },\n  SET_EVENT_PRESS (state, payload) {\n    const statePlayer = getPlayerById(state, payload.playerId)\n    statePlayer.event.press = payload.status\n  },\n  SET_EVENT_IS_FOCUSED (state, payload) {\n    const statePlayer = getPlayerById(state, payload.playerId)\n    statePlayer.event.isFocused = payload.status\n  }\n}\n\n","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/players/mutations'\nimport { Players } from '@/store/players/types'\n\nconst state: Players = {\n  list: []\n}\n\nconst getters = {\n  getPlayerById: (state: Players) => (id: string) => {\n    return state.list.find(player => player.id === id)\n  }\n}\n\nexport const players: Module<Players, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","import Vuex, { StoreOptions } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { controllerMove } from '@/store/controller_move'\nimport { controllerRotate } from '@/store/controller_rotate'\nimport { settings } from '@/store/settings'\nimport { level } from '@/store/level'\nimport { players } from '@/store/players'\n\nconst store: StoreOptions<RootState> = {\n  strict: false,\n  state: {\n    player: {\n      id: ''\n    },\n    levels: [\n      {id: 1, finish: false},\n      {id: 2, finish: false},\n      {id: 3, finish: false},\n    ],\n  },\n  mutations: {\n    SET_SELF_PLAYER_ID (state, playerId) {\n      state.player.id = playerId\n    },\n  },\n  modules: {\n    players,\n    controllerMove,\n    controllerRotate,\n    level,\n    settings\n  }\n}\n\nexport default new Vuex.Store<RootState>(store)","import {\n  CubeTexture,\n  GlowLayer,\n  Matrix,\n  Tools,\n  Scene,\n  Color3,\n  DirectionalLight,\n  ShadowGenerator\n} from '@babylonjs/core'\n\nexport default class Environment {\n  shadowGenerator: ShadowGenerator | null\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.shadowGenerator = null\n  }\n\n  setupHDR () {\n    const url = process.env.VUE_APP_RESOURCES_PATH  + 'graphics/textures/environment.env'\n    const hdrTexture = CubeTexture.CreateFromPrefilteredData(url, this.scene)\n    const hdrRotation = 0\n    \n    hdrTexture.setReflectionTextureMatrix(\n      Matrix.RotationY(\n        Tools.ToRadians(hdrRotation)\n      )\n    )\n\n    hdrTexture.gammaSpace = false\n    this.scene.environmentTexture = hdrTexture\n  }\n\n  setupGlow () {\n    const gl = new GlowLayer('glow', this.scene, {\n      mainTextureFixedSize: 1054,\n      blurKernelSize: 70\n    })\n    \n    gl.intensity = 0.4\n  }\n  \n  setupFog () {\n    this.scene.fogColor = new Color3(0, 0, 0)\n    this.scene.fogDensity = 0.04\n    this.scene.fogMode = Scene.FOGMODE_EXP\n  }\n  \n  setupLightAndShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (!light) {\n      console.info('Add a light with the ID MainDirectionLight to display the shadow')\n      return\n    }\n    \n    this.shadowGenerator = new ShadowGenerator(2064, light)\n  }\n}\n","import {\n  Mesh,\n  Scene,\n  Camera,\n  Engine,\n  Vector3,\n  Matrix,\n  AbstractMesh,\n  RollingAverage, MeshBuilder, StandardMaterial, Color3, Tags,\n} from '@babylonjs/core'\nimport axios from 'axios'\n\n// TODO: разбить хелперы по категориям\n\nexport const Helpers = {\n  getRandomInt (min: number, max: number) {\n    min = Math.ceil(min)\n    max = Math.floor(max)\n    return Math.floor(Math.random() * (max - min + 1)) + min\n  },\n\n  get2DCoordinatesFromMesh (mesh: Mesh, camera: Camera, scene: Scene, engine: Engine) {\n    const pos = Vector3.Project(\n      mesh.getAbsolutePosition(),\n      Matrix.IdentityReadOnly,\n      scene.getTransformMatrix(),\n      camera.viewport.toGlobal(\n        engine.getRenderWidth(),\n        engine.getRenderHeight(),\n      ),\n    )\n\n    return {\n      top: pos.y,\n      left: pos.x\n    }\n  },\n\n  getIsSuffix (mesh: AbstractMesh, suffix: string) {\n    const nameArray = mesh.id.split('_')\n\n    if (nameArray.length) {\n      if (nameArray.find(item => item === suffix)) {\n        return true\n      }\n    }\n\n    return false\n  },\n\n  IsName (text: string, find: string, partly = false) {\n    if (text === find) {\n      return true\n    }\n\n    if (partly) {\n      return text.search(find) !== -1\n    }\n\n    return false\n  },\n\n  getMeshesByName (name: string, partly = false) {\n    return globalThis.scene.meshes.filter(mesh => Helpers.IsName(mesh.name, name, partly)) as Array<Mesh>\n  },\n\n  getMeshByName (scene: Scene, name: string, partly = false) {\n    return scene.meshes.find(mesh => Helpers.IsName(mesh.name, name, partly)) as Mesh\n  },\n\n  getTime () {\n    const date = new Date()\n    return date.getTime()\n  },\n\n  getAverage () {\n    const rollingAverage = new RollingAverage(60)\n    rollingAverage.add(scene.getAnimationRatio())\n    return rollingAverage.average\n  },\n\n  numberFixed (number: string | number, length = 10): number {\n    return Number(Number(number).toFixed(length))\n  },\n\n  getNameId (meshId: string) {\n    return meshId.split('.')[1]\n  },\n  \n  drawEllipsoid (mesh: Mesh) {\n    const scene = mesh.getScene()\n    const ellipsoid = MeshBuilder.CreateSphere('debug', { diameterX: (mesh.ellipsoid.x * 2), diameterY: (mesh.ellipsoid.y * 2), diameterZ: (mesh.ellipsoid.z * 2), segments: 16 }, scene)\n    \n    scene.onBeforeRenderObservable.add(() => {\n      ellipsoid.position.copyFrom(mesh.position)\n      ellipsoid.position.addInPlace(mesh.ellipsoidOffset)\n    })\n    \n    const debugmat = new StandardMaterial('debugmat', mesh.getScene())\n    debugmat.diffuseColor = new Color3(0, 1, 0)\n    debugmat.wireframe = true\n    ellipsoid.material = debugmat\n  },\n  isFile(url: string) {\n    if (url) {\n      const split = url.split('/')\n      if (split) {\n        const pop = split.pop()\n        if (pop) {\n          return pop.indexOf('.') > 0\n        }\n      }\n    }\n    \n    return false\n  },\n  async getFileTimestamp(filePath: string)\n  {\n    const arr = filePath.split(\"/\") // [ \"\", \"game\", \"resources\", \"graphics\", \"level_1\", \"map.babylon\" ]\n    const filePathLastFolder = arr[arr.length - 2] + \"/\" + arr[arr.length - 1] // \"level_1/map.babylon\"\n    \n    try {\n      const response = await axios.get(process.env.VUE_APP_RESOURCES_PATH + 'graphics/manifest.json')\n      const manifest = response.data\n      return manifest[filePathLastFolder] ?? new Date().getTime()\n    } catch (error) {\n      console.error('Ошибка получения manifest.json:', error)\n      return filePath\n    }\n  },\n  getTagsFromMesh(mesh: any) {\n    const rawTags = Tags.GetTags(mesh)\n    if (!rawTags || !rawTags.length) {\n      return null\n    }\n  \n    return rawTags.split(' ')\n  },\n  hasTag(mesh: any, tag: string) {\n    const tags = this.getTagsFromMesh(mesh)\n    if (tags) {\n      return tags.find((tagCheck: string) => tagCheck === tag) !== undefined\n    }\n    \n    return false\n  }\n}","import {\n  Scene as BabylonScene, Engine,\n  SceneLoader,\n  SceneOptimizerOptions,\n  SceneOptimizer,\n  AbstractMesh\n} from '@babylonjs/core'\n\nimport '@babylonjs/core/Debug/debugLayer'\nimport '@babylonjs/inspector'\nimport store from \"@/store\";\nimport Environment from '@/models/scene/Environment'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Scene {\n    scene: BabylonScene\n    engine: Engine\n    store: any\n\n    constructor (engine: Engine) {\n        this.scene = new BabylonScene(engine)\n        globalThis.scene = this.scene\n        this.store = store\n        this.engine = engine\n    }\n\n    async load (callbackLoad: () => void) {\n      window.addEventListener('resize', () => {\n        this.engine.resize()\n      })\n  \n      SceneLoader.CleanBoneMatrixWeights = true\n      SceneLoader.ShowLoadingScreen = false\n  \n      const fileName = 'map.babylon'\n      const filePath = process.env.VUE_APP_RESOURCES_PATH + 'graphics/level_' + this.store.state.level.levelId + '/'\n      \n      const timestamp = await Helpers.getFileTimestamp(filePath  + fileName)\n      const filePathWithTimestamp = fileName + '?timestamp=' + timestamp\n  \n      SceneLoader.Append(filePath, filePathWithTimestamp, this.scene, (scene) => {\n        try {\n          callbackLoad()\n        } catch (e) {\n          console.error(e)\n        }\n    \n        this.engine.runRenderLoop(() => {\n          this.scene.render()\n        })\n    \n      }, null, (scene, message, error) => {\n        console.log(error, message)\n      })\n    }\n\n    static optimize () {\n      const scene = globalThis.scene\n      scene.autoClearDepthAndStencil = false\n      scene.disablePhysicsEngine()\n\n      const meshNotAnimate = scene.getMeshesByTags('not_animate')\n  \n      scene.skipPointerMovePicking = true\n\n      meshNotAnimate.forEach(mesh => {\n        mesh.freezeWorldMatrix()\n        mesh.doNotSyncBoundingInfo = true\n        mesh.cullingStrategy = AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY\n  \n        mesh.material?.freeze()\n      })\n\n      const options = new SceneOptimizerOptions(60, 1000)\n      const optimizer = new SceneOptimizer(scene, options)\n      optimizer.start()\n    }\n    \n    setEnvironment()\n    {\n      const environment = new Environment()\n      environment.setupHDR()\n      environment.setupGlow()\n      environment.setupLightAndShadow()\n    }\n}\n","import { Store } from 'vuex'\nimport { Sound } from '@babylonjs/core'\n\nexport default class SoundMain {\n  path: string\n\n  constructor () {\n    this.path = process.env.VUE_APP_RESOURCES_PATH + 'audio'\n  }\n\n  subscribe(store: Store<any>, sound: Sound, type: string) {\n    store.subscribe(mutation => {\n      if (mutation.type == 'SET_SETTING_FIELD_VALUE') {\n        if (mutation.payload.name == type) {\n          if (store.getters.getSettingsValueByName(type)) {\n            if (sound && !sound.isPlaying) {\n              sound.play()\n            }\n          } else {\n            if (sound && sound.isPlaying) {\n              sound.stop()\n            }\n          }\n        }\n      }\n    })\n  }\n}","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\nimport { Store } from 'vuex'\n\nexport default class Music extends SoundMain {\n  filePath: string\n  sound: Sound\n  store: Store<any>\n  \n  constructor () {\n    super()\n    this.store = store\n    this.filePath = this.path + '/level_' + this.store.state.level.levelId + '/music.wav'\n\n    this.sound = new Sound('Music', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'music')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('music'),\n      volume: 0.5\n    })\n  }\n}\n\n","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\n\nexport default class Background extends SoundMain {\n  filePath: string\n  sound: Sound\n\n  constructor () {\n    super()\n    this.filePath = this.path + '/' + 'cosmos.wav'\n\n    this.sound = new Sound('Cosmos', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'sound')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('sound')\n    })\n  }\n}\n\n","import { Engine } from '@babylonjs/core'\nimport Music from '@/models/sounds/Music'\nimport Background from '@/models/sounds/Background'\nimport store from '@/store'\n\nexport default class Audio {\n  music: any\n  isLevelRun: boolean\n  pathAudio: string\n\n  constructor () {\n    this.isLevelRun = false\n    this.pathAudio = 'resources/audio'\n    const audioEngine = Engine.audioEngine\n    if (audioEngine) {\n\n      audioEngine.useCustomUnlockedButton = true\n\n      store.subscribe(mutation => {\n        if (mutation.type == 'SET_PLAY' && !this.isLevelRun) {\n          const context = audioEngine.audioContext\n\n          if (context) {\n            context.resume()\n          }\n\n          this.isLevelRun = true\n          audioEngine.unlock()\n\n          new Music()\n          new Background()\n        }\n      })\n    }\n\n  }\n}","import store from \"@/store\";\nimport { isEqual } from 'lodash'\n\nexport default class SubscribeStore {\n  playerId: string\n  store: any\n  unsubscribes: Array<any>\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.unsubscribes = []\n    \n    this.dispose()\n  }\n  \n  move (callbackEvent: any) {\n    let oldMove = {}\n    \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n      const equal = isEqual(oldMove, stateMove)\n      \n      if (!equal) {\n        oldMove = { ...stateMove }\n        callbackEvent(stateMove)\n      }\n    })\n    \n    this.unsubscribes.push({\n      name: 'move',\n      unsubscribe\n    })\n  }\n\n  forward (callbackEvent: any) {\n    let oldForward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateForward = state.move.forward\n      const equal = isEqual(oldForward, stateForward)\n\n      if (!equal) {\n        oldForward = { ...stateForward }\n        callbackEvent(stateForward)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'forward',\n      unsubscribe\n    })\n  }\n\n  jump (callbackEvent: any) {\n    let oldStateJump = false\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateJump !== stateMove.jump) {\n        oldStateJump = stateMove.jump\n  \n        callbackEvent(stateMove.jump)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'jump',\n      unsubscribe\n    })\n  }\n  \n  pressEvent (callbackEvent: any) {\n    let oldStatePressEvent = false\n    \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const statePress = state.event.press\n      \n      if (oldStatePressEvent !== statePress) {\n        oldStatePressEvent = statePress\n        \n        callbackEvent(statePress)\n      }\n    })\n    \n    this.unsubscribes.push({\n      name: 'pressEvent',\n      unsubscribe\n    })\n  }\n\n  fly (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'fly',\n      unsubscribe\n    })\n  }\n\n  flyEnd (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (!stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'flyEnd',\n      unsubscribe\n    })\n  }\n\n  rotate (callbackEvent: any) {\n    const oldStateRotate = {\n      rotateX: 0,\n      rotateY: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateRotate.rotateX !== stateMove.rotate.x || oldStateRotate.rotateY !== stateMove.rotate.y) {\n        oldStateRotate.rotateX = stateMove.rotate.x\n        oldStateRotate.rotateY = stateMove.rotate.y\n        callbackEvent(stateMove.rotate.x, stateMove.rotate.y)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotate',\n      unsubscribe\n    })\n  }\n\n  position (callbackEvent: any) {\n    let oldStatePosition = {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const statePosition = stateMove.syncData.position\n\n      if (!isEqual(statePosition, oldStatePosition)) {\n        oldStatePosition = { ...statePosition }\n        callbackEvent(statePosition)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'position',\n      unsubscribe\n    })\n  }\n\n  rotation (callbackEvent: any) {\n    let oldStateRotation = {\n      x: 0,\n      y: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const stateRotation = stateMove.syncData.rotation\n\n      if (!isEqual(stateRotation, oldStateRotation)) {\n        oldStateRotation = { ...stateRotation }\n        callbackEvent(stateRotation)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotation',\n      unsubscribe\n    })\n  }\n  \n  syncData (callbackEvent: any) {\n    let oldSyncData = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const syncData = stateMove.syncData\n    \n      if (!isEqual(syncData, oldSyncData)) {\n        oldSyncData = {...syncData}\n        callbackEvent(syncData)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncData',\n      unsubscribe\n    })\n  }\n  \n  syncPlayer (callbackEvent: any) {\n    let oldPlayer = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n    \n      if (!isEqual(state, oldPlayer)) {\n        oldPlayer = JSON.parse(JSON.stringify(state))\n        callbackEvent(state)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncPlayer',\n      unsubscribe\n    })\n  }\n\n  getPlayerById () {\n    const state = store.getters.getPlayerById(this.playerId)\n    \n    if (!state) {\n      console.info('SubscribeStore: not found state by playerId: ' + this.playerId)\n      this.unsubscribeAll()\n    }\n    \n    return state\n  }\n  \n  private dispose()\n  {\n    const unsubscribe = this.store.subscribe(() => {\n      const player = store.getters.getPlayerById(this.playerId)\n      \n      if (!player) {\n        this.unsubscribeAll()\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'dispose',\n      unsubscribe\n    })\n  }\n  \n  unsubscribeAll() {\n    this.unsubscribes.forEach((item) => {\n      item.unsubscribe()\n    })\n  }\n}\n","import * as Colyseus from 'colyseus.js'\nimport store from '@/store'\nimport SubscribeStore from '@/models/сommon/SubscribeStore'\n\nexport default class ServerClient {\n  sessionId: string | null\n  playerId?: string\n  room?: Colyseus.Room | null\n  subscribeStore?: SubscribeStore\n  \n  constructor (playerId: string) {\n    this.sessionId = null\n    this.room = null\n    this.playerId = playerId\n  }\n  \n  init () {\n    const client = new Colyseus.Client(process.env.VUE_APP_SERVER_DOMAIN)\n    \n    client.joinOrCreate('my_room').then(room => {\n      this.room = room\n      this.room.state.players.onAdd = (player: any) => {\n        store.commit('ADD_PLAYER', player)\n      }\n  \n      this.room.state.players.onRemove = (player: any) => {\n        store.commit('REMOVE_PLAYER', player.id)\n      }\n      \n      console.info('Joined to server room')\n      \n      this.room.send('createPlayer', { playerId: this.playerId })\n      \n      this.room.onMessage('syncPlayer', (message) => {\n        store.commit('SYNC_PLAYER', message.player)\n      })\n      \n      this.room.onMessage('errorIdPlayer', (message) => {\n        if (message === 500) {\n          alert('A player with this ID will not find!')\n        }\n      })\n    })\n  }\n  \n  public syncPlayer () {\n    if (this.playerId && this.room && typeof this.room !== 'undefined') {\n      this.subscribeStore = new SubscribeStore(this.playerId)\n      \n      this.subscribeStore.syncPlayer((player: any) => {\n        this.room?.send('syncPlayer', { playerId: this.playerId, player })\n      })\n    }\n  }\n}","import { Settings } from '@/models/storage/Settings'\n\nexport default class DevMode {\n  constructor () {\n    if (Settings.getValueByName('dev_mode')) {\n      this.enabled()\n    }\n  }\n  \n  enabled () {\n    const globalRoot = document.getElementsByTagName('body')[0]\n    if (globalRoot) {\n      scene.debugLayer.show({overlay: true, globalRoot: globalRoot})\n    }\n  }\n}","import { MeshBuilder, Vector3, Tags, Observer, Nullable, Scene } from '@babylonjs/core'\n\nexport default class Body {\n  playerId: string\n  meshHeadId: string\n  meshFootId: string\n  observer: Nullable<Observer<Scene>>\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.meshHeadId = 'playerHead_' + playerId\n    this.meshFootId = 'playerFoot_' + playerId\n    this.observer = null\n    this.add()\n  }\n  \n  private add () {\n    const scene = globalThis.scene\n    const size = 0.5\n    const meshHead = MeshBuilder.CreateBox(this.meshHeadId, { size: size }, scene)\n    const meshFoot = MeshBuilder.CreateBox(this.meshFootId, { size: size }, scene)\n  \n    Tags.AddTagsTo(meshFoot, 'foot')\n    \n    meshFoot.ellipsoid = new Vector3(size / 2, size, size / 2)\n    meshFoot.ellipsoidOffset = new Vector3(0, 0.3, 0)\n\n    meshHead.rotation.x = 0\n    meshHead.rotation.z = 0\n    \n    meshFoot.position.y = 10\n  \n    const meshCoordinator = scene.getMeshById('player')\n    \n    if (meshCoordinator) {\n      meshFoot.position.z = meshCoordinator.position.z\n      meshFoot.position.x = meshCoordinator.position.x\n    }\n\n    meshFoot.rotation = new Vector3()\n\n    meshHead.visibility = 0\n    meshFoot.visibility = 0\n\n    meshHead.checkCollisions = false\n    meshFoot.checkCollisions = false\n\n    meshHead.isPickable = false\n    meshFoot.isPickable = false\n\n    meshHead.isPickable = false\n\n   this.observer = scene.onBeforeRenderObservable.add(() => {\n      meshHead.position.x = meshFoot.position.x\n      meshHead.position.y = meshFoot.position.y + 2\n      meshHead.position.z = meshFoot.position.z\n      meshHead.rotation.y = meshFoot.rotation.y\n    })\n  }\n  \n  dispose () {\n    if (this.observer !== null) {\n      scene.onBeforeRenderObservable.remove(this.observer)\n    }\n  }\n}\n","import {\n  Mesh,\n  Vector3,\n  RollingAverage,\n  Scene,\n  AbstractMesh,\n  Animation,\n  SineEase,\n  EasingFunction,\n  Tools, Nullable, Observer\n} from '@babylonjs/core'\nimport Collisions from '../mehanics/Collisions'\nimport store from '@/store/index'\nimport { Forward } from '@/store/players/types'\nimport { Helpers } from '@/models/Helpers'\n\nconst DEFAULT_SPEED = 0.07\nconst SPRINT_SPEED = 0.12\nconst GRAVITY = 0.08\nconst JUMP_HEIGHT = 1.5\n\nexport default class Move {\n  meshHead: Mesh\n  meshFoot: Mesh\n  speed: number\n  scene: Scene\n  footIsCollision: AbstractMesh | boolean\n  jumpAnimation: Animation | boolean\n  animationJumpFrames: number\n  modelCollisions: Collisions\n  store: any\n  forward: Forward\n  fly: boolean\n  flyUp: boolean\n  playerId: string\n  flyModeTimerId: number\n  observerBefore?: Nullable<Observer<Scene>>\n  observerAfter?: Nullable<Observer<Scene>>\n  rollingAverage: RollingAverage\n  \n  constructor (playerId: string, scene: Scene) {\n    this.scene = scene\n    this.store = store\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshHead = this.scene.getMeshById('playerHead_' + playerId) as Mesh\n    this.modelCollisions = globalThis.collisions\n    \n    this.fly = true\n    this.flyModeTimerId = 0\n    this.flyUp = false\n    this.playerId = playerId\n    this.animationJumpFrames = 55\n    this.footIsCollision = false\n    this.jumpAnimation = false\n    this.rollingAverage = new RollingAverage(60)\n    \n    this.forward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false,\n      sprint: false\n    }\n    \n    this.speed = DEFAULT_SPEED\n    this.createJumpAnimation()\n    \n    this.observerBefore = this.scene.onBeforeRenderObservable.add(() => {\n      this.beforeRender()\n    })\n  \n    this.observerAfter = this.scene.onAfterRenderObservable.add(() => {\n      this.afterRender()\n    })\n  }\n  \n  private createJumpAnimation () {\n    this.jumpAnimation = new Animation('jump', 'position.y', 100,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CYCLE\n    )\n    \n    const easingFunction = new SineEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEOUT)\n    this.jumpAnimation.setEasingFunction(easingFunction)\n  }\n  \n  private setAverage () {\n    this.rollingAverage.add(this.scene.getAnimationRatio())\n  }\n  \n  private move () {\n    if (!this.forward.isMoving) {\n      return null\n    }\n\n    this.changeSpeed()\n    \n    const nextStep = Vector3.Zero()\n    const average = this.rollingAverage.average\n    \n    if (this.forward.front) {\n      nextStep.z = Helpers.numberFixed(average * this.speed)\n    }\n    \n    if (this.forward.back) {\n      nextStep.z = Helpers.numberFixed(average * -this.speed)\n    }\n    \n    if (this.forward.left) {\n      nextStep.x = Helpers.numberFixed( average * -this.speed)\n    }\n    \n    if (this.forward.right) {\n      nextStep.x = Helpers.numberFixed(average * this.speed)\n    }\n    \n    this.setNewPosition(nextStep)\n  }\n  \n  private gravity () {\n    if (!this.footIsCollision) {\n      const nextStep = Vector3.Zero()\n      \n      nextStep.y = Helpers.numberFixed(this.rollingAverage.average * -GRAVITY, 4)\n      this.setNewPosition(nextStep)\n      \n      if (!this.fly && !this.flyModeTimerId) {\n        //Маленькие полеты не считаем за полет\n        this.flyModeTimerId = setTimeout(() => {\n          this.fly = true\n        }, 100)\n      }\n    } else {\n      clearTimeout(this.flyModeTimerId)\n      this.flyModeTimerId = 0\n      \n      if (this.fly) {\n        this.fly = false\n      }\n    }\n  }\n  \n  jump () {\n    if (typeof this.jumpAnimation !== 'object') {\n      console.error('Jump not set animation')\n      return\n    }\n    \n    if (this.footIsCollision) {\n      const keys = [\n        { frame: 0, value: this.meshFoot.position.y },\n        { frame: this.animationJumpFrames, value: this.meshFoot.position.y + JUMP_HEIGHT }\n      ]\n      \n      this.jumpAnimation.setKeys(keys)\n      this.meshFoot.animations = [this.jumpAnimation]\n      this.flyUp = true\n      this.scene.beginDirectAnimation(\n        this.meshFoot,\n        [this.jumpAnimation],\n        0,\n        this.animationJumpFrames,\n        false,\n        1.8,\n        () => {\n          this.flyUp = false\n        })\n    }\n  }\n  \n  private setNewPosition (nextStep: Vector3) {\n    const matrix = this.meshFoot.getWorldMatrix()\n    const vector = Vector3.TransformNormal(nextStep, matrix)\n    this.meshFoot.moveWithCollisions(vector)\n  }\n  \n  rotate (rotateX: number, rotateY: number) {\n    this.meshHead.rotation.x += rotateX\n    this.meshFoot.rotation.y += rotateY\n    \n    if (this.meshHead.rotation.x > Tools.ToRadians(90)) {\n      this.meshHead.rotation.x = Tools.ToRadians(90)\n    }\n    \n    if (this.meshHead.rotation.x < -Tools.ToRadians(45)) {\n      this.meshHead.rotation.x = -Tools.ToRadians(45)\n    }\n  }\n  \n  private changeSpeed () {\n    this.speed = this.forward.sprint ? SPRINT_SPEED : DEFAULT_SPEED\n  }\n  \n  private beforeRender () {\n    this.setAverage()\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.move()\n  }\n  \n  private afterRender () {\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.gravity()\n  }\n  \n  dispose () {\n    if (this.observerBefore) {\n      this.scene.onBeforeRenderObservable.remove(this.observerBefore)\n    }\n  \n    if (this.observerAfter) {\n      this.scene.onBeforeRenderObservable.remove(this.observerAfter)\n    }\n  }\n}\n","import MoveCommon from '../сommon/Move'\nimport { Scene } from '@babylonjs/core'\nimport { isEqual } from 'lodash'\n\nexport default class Move extends MoveCommon {\n  constructor (playerId: string, scene: Scene) {\n    super(playerId, scene)\n\n    this.updatePositionToState()\n    this.updateRotationToState()\n    this.updateFly()\n  }\n\n  private updatePositionToState () {\n    let oldPosition = {\n      x: this.meshFoot.position.x,\n      y: this.meshFoot.position.y,\n      z: this.meshFoot.position.z\n    }\n    \n    setInterval(() => {\n      const position = {\n        x: this.meshFoot.position.x,\n        y: this.meshFoot.position.y,\n        z: this.meshFoot.position.z\n      }\n      \n      if (!isEqual(oldPosition, position)) {\n        this.store.commit('UPDATE_POSITION',  { playerId: this.playerId, position })\n        oldPosition = { ...position }\n      }\n     \n    }, 100)\n  }\n\n  private updateRotationToState () {\n    let oldRotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n    \n    setInterval(() => {\n      const rotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n      \n      if (!isEqual(rotation, oldRotation)) {\n        const data = { playerId: this.playerId, x: rotation.x, y: rotation.y }\n        this.store.commit('UPDATE_ROTATION', data)\n        oldRotation = { ...rotation }\n      }\n      \n    }, 100)\n  }\n\n  private updateFly () {\n    let oldFly = false\n    let oldFlyUp = false\n\n    this.scene.onBeforeRenderObservable.add(() => {\n      if (oldFly !== this.fly) {\n        if (this.fly) {\n          this.store.commit('FLY_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_DISABLED', this.playerId)\n          this.store.commit('JUMP_DISABLED', this.playerId)\n        }\n\n        oldFly = this.fly\n      }\n\n      if (oldFlyUp !== this.flyUp) {\n        if (this.flyUp) {\n          this.store.commit('FLY_UP_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_UP_DISABLED', this.playerId)\n        }\n\n        oldFlyUp = this.flyUp\n      }\n    })\n  }\n}\n","import { Scene, KeyboardEventTypes } from '@babylonjs/core'\nimport Move from './Move'\nimport store from '@/store'\nimport { isEqual } from 'lodash'\n\nexport default class Controller {\n  sensitiveMouse: number\n  mouseIsCaptured: boolean | Element\n  store: any\n  scene: Scene\n  playerId: string\n  move: Move\n  \n  constructor () {\n    this.sensitiveMouse = 0.002\n    this.mouseIsCaptured = false\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = store.state.player.id\n    this.move = new Move(this.playerId, scene)\n    \n    this.mouseEvent()\n    \n    this.scene.onKeyboardObservable.add(event => {\n      this.keyEvent(event)\n    })\n  }\n  \n  private keyEvent (e: any) {\n    const state = store.getters.getPlayerById(this.playerId)\n    const stateMove = state.move\n    const eventCode = e.event.code\n    const eventType = e.type\n    let jump = false\n    \n    if (KeyboardEventTypes.KEYDOWN === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = true\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = true\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = true\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = true\n      }\n      \n      if (eventCode === 'Space') {\n        jump = true\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = true\n      }\n  \n      if (eventCode === 'KeyE') {\n        this.store.commit('SET_EVENT_PRESS', { playerId: this.playerId, status: true })\n      }\n    }\n    \n    if (KeyboardEventTypes.KEYUP === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = false\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = false\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = false\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = false\n      }\n      \n      if (eventCode === 'Space') {\n        this.store.commit('JUMP_DISABLED', this.playerId)\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = false\n      }\n  \n      if (eventCode === 'KeyE') {\n        this.store.commit('SET_EVENT_PRESS', { playerId: this.playerId, status: false })\n      }\n    }\n    \n    this.move.forward.isMoving = !(\n      !this.move.forward.left &&\n      !this.move.forward.right &&\n      !this.move.forward.back &&\n      !this.move.forward.front\n    )\n    \n    const equal = isEqual(this.move.forward, stateMove.forward)\n    \n    if (!equal) {\n      this.store.commit('SET_FORWARD', { playerId: this.playerId, forward: { ...this.move.forward } })\n    }\n    \n    if (jump && !this.move.fly) {\n      this.move.jump()\n      this.store.commit('JUMP_ENABLED', this.playerId)\n    }\n  }\n  \n  private mouseEvent () {\n    const elementContent = document.getElementById('level') as HTMLElement\n    \n    elementContent.addEventListener('click', (e) => {\n      const checkFocusAvailable = e.composedPath().find((item) => {\n        const itemChecked = item as HTMLElement\n        if(itemChecked.tagName !== undefined) {\n          return itemChecked.classList.contains('no_focus_game')\n        }\n        \n        return false\n      })\n      \n      if (!checkFocusAvailable) {\n        this.mouseIsCaptured = true\n        const canvas = document.getElementById('canvas')\n        \n        if (canvas) {\n          canvas.requestPointerLock()\n        }\n      }\n      \n    })\n    \n    const pointerlockchange = () => {\n      this.mouseIsCaptured = document.pointerLockElement || false\n    }\n    \n    document.addEventListener('pointerlockchange', pointerlockchange, false)\n    \n    window.addEventListener('pointermove', (e) => {\n      if (this.mouseIsCaptured) {\n        const rotateX = e.movementY * this.sensitiveMouse\n        const rotateY = e.movementX * this.sensitiveMouse\n        \n        this.move.rotate(rotateX, rotateY)\n        this.store.commit('UPDATE_ROTATE', { playerId: this.playerId, rotate: { x: rotateX, y: rotateY } })\n      }\n    })\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Idle implements AnimationGroupInterface {\n  playerId: string\n  animation: AnimationGroup | null\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 1\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Idle_' + playerId)\n\n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find Idle animation')\n      return\n    }\n\n    this.animation.name = 'Idle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Run implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Run_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Run animation')\n      return\n    }\n    \n    this.animation.name = 'Run_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpMiddle implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  //TODO: классы получились очень похожие, можно наследовать эти методы у общего класса\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpMiddle_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpMiddle animation')\n      return\n    }\n\n    this.animation.name = 'JumpMiddle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpFinish implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = false\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpFinish_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpFinish animation')\n      return\n    }\n    \n    this.animation.name = 'JumpFinish_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.stop()\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Sprint implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Sprint_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Sprint animation')\n      return\n    }\n    \n    this.animation.name = 'Sprint_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Picking implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Picking_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find Picking animation')\n      return\n    }\n    \n    this.animation.name = 'Picking_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import SubscribeStore from '../SubscribeStore'\nimport { Scalar, Scene, AnimationEvent } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './animation_groups/AnimationGroupInterface'\nimport Idle from './animation_groups/Idle'\nimport Run from './animation_groups/Run'\nimport JumpMiddle from './animation_groups/JumpMiddle'\nimport JumpFinish from './animation_groups/JumpFinish'\nimport store from '@/store'\nimport { Move } from '@/store/players/types'\nimport Sprint from '@/models/сommon/character/animation_groups/Sprint'\nimport Picking from '@/models/сommon/character/animation_groups/Picking'\n\nexport default class Animation {\n  playerId: string\n  animationGroupCurrent: AnimationGroupInterface | undefined\n  animationGroups: Array<AnimationGroupInterface>\n  store: any\n  scene: Scene\n  observableBeforeAnimation: any\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.scene = globalThis.scene\n    this.animationGroups = []\n    this.animationGroupCurrent = undefined\n\n    this.setAnimationGroups()\n\n    this.observableBeforeAnimation = () => {\n      this.onBeforeAnimation()\n    }\n  }\n\n  private setAnimationGroups () {\n    const idle = new Idle(this.playerId)\n    this.pushAnimation(idle)\n    this.pushAnimation(new Run(this.playerId))\n    this.pushAnimation(new Sprint(this.playerId))\n    this.pushAnimation(new JumpMiddle(this.playerId))\n    this.pushAnimation(new JumpFinish(this.playerId))\n    this.pushAnimation(new Picking(this.playerId))\n    \n    if (idle.animation) {\n      this.animationGroupCurrent = this.getAnimationByName('Idle_' + this.playerId)\n      this.subscribe()\n    }\n  }\n  \n  private pushAnimation (animation: AnimationGroupInterface) {\n    if (animation.animation) {\n      this.animationGroups.push(animation)\n    }\n  }\n\n  private getAnimationByName (name: string) {\n    return this.animationGroups.find(group => group.animation && group.animation.name.includes(name)) as AnimationGroupInterface\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n    const animationJumpMiddle = this.getAnimationByName('JumpMiddle_' + this.playerId)\n    const animationJumpFinish = this.getAnimationByName('JumpFinish_' + this.playerId)\n  \n    this.subscribeStore.move((move: Move) => {\n      if (!move.isFly && !move.jump) {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      }\n    })\n  \n    this.subscribeStore.fly(() => {\n      this.blending(animationJumpMiddle)\n    })\n  \n    if (animationJumpFinish && animationJumpFinish.animation) {\n      this.subscribeStore.flyEnd(() => {\n        this.blending(animationJumpFinish)\n        if (animationJumpFinish.animation) {\n          animationJumpFinish.animation.play()\n        }\n        \n      })\n  \n      const jumpFinishAnimation = animationJumpFinish.animation.targetedAnimations[0].animation\n  \n      const JumpFinishAnimationEvent = new AnimationEvent(25, () => {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      })\n  \n      jumpFinishAnimation.addEvent(JumpFinishAnimationEvent)\n    }\n  \n    this.subscribeStore.pressEvent(() => {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n    })\n  }\n  \n  private getAnimationByState() {\n    const statePlayer = store.getters.getPlayerById(this.playerId)\n    if (!statePlayer) {\n      return null\n    }\n    \n    const move = statePlayer.move\n    const animationIdle = this.getAnimationByName('Idle_' + this.playerId)\n    const animationRun = this.getAnimationByName('Run_' + this.playerId)\n    const animationSprint = this.getAnimationByName('Sprint_' + this.playerId)\n    const animationPicking = this.getAnimationByName('Picking_' + this.playerId)\n    \n    let animation = animationIdle\n  \n    if (move.forward.isMoving) {\n      animation = animationRun\n      if (move.forward.sprint) {\n        animation = animationSprint\n      }\n    } else {\n      if (statePlayer.event.isFocused) {\n        animation = animationPicking\n      }\n    }\n    \n    return animation\n  }\n\n  private blending (animationGroup: AnimationGroupInterface) {\n    if (this.animationGroupCurrent === animationGroup) {\n      return\n    }\n\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n\n    this.animationGroupCurrent = animationGroup\n    this.scene.onBeforeAnimationsObservable.add(this.observableBeforeAnimation)\n  }\n\n  private onBeforeAnimation () {\n    if (this.animationGroupCurrent && this.animationGroupCurrent.animation) {\n      const weight = Scalar.Clamp(this.animationGroupCurrent.weight + 0.08, 0, 1)\n      this.animationGroupCurrent.weight = Number(weight.toFixed(2))\n      this.animationGroupCurrent.animation.setWeightForAllAnimatables(this.animationGroupCurrent.weight)\n    }\n\n    this.animationGroups.forEach(animationGroup => {\n      if (animationGroup.animation &&animationGroup.weight !== 0 && animationGroup !== this.animationGroupCurrent) {\n        const weight = Scalar.Clamp(animationGroup.weight - 0.08, 0, 1)\n        animationGroup.weight = Number(weight.toFixed(2))\n        animationGroup.animation.setWeightForAllAnimatables(animationGroup.weight)\n\n        if (!animationGroup.autoPlayLoop && animationGroup.weight === 0) {\n          animationGroup.animation.stop()\n        }\n      }\n    })\n\n    if (this.animationGroupCurrent && this.animationGroupCurrent.weight === 1) {\n      this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n    }\n  }\n  \n  dispose () {\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n  }\n}\n","import { AbstractMesh, Animation, CubicEase, EasingFunction, Scene, Tools } from '@babylonjs/core'\nimport SubscribeStore from '../SubscribeStore'\nimport store from '@/store'\n\nexport default class Rotation {\n  animation: Animation | undefined\n  scene: Scene\n  playerId: string\n  angle: number\n  meshCharacter: AbstractMesh\n  meshFoot: AbstractMesh\n  subscribeStore?: SubscribeStore\n  animatable: any\n  forwardAngle: number\n  isAnimated: boolean\n  syncIntervalId: any\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.angle = 0\n    // TODO: вывести в константы признак meshId\n    this.meshCharacter = this.scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as AbstractMesh\n    this.animation = undefined\n    this.animatable = undefined\n    this.isAnimated = false\n    this.forwardAngle = 0\n\n    this.setAnimation()\n    this.subscribe()\n  }\n\n  private setAnimation () {\n    this.animation = new Animation(\n      'rotateMesh',\n      'rotation.y',\n      20,\n      Animation.ANIMATIONTYPE_FLOAT\n    )\n\n    const easingFunction = new CubicEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEINOUT)\n    this.animation.setEasingFunction(easingFunction)\n  }\n\n  private setAngle () {\n    const state = store.getters.getPlayerById(this.playerId)\n    if (!state) {\n      return null\n    }\n    \n    const stateForward = state.move.forward\n\n    if (!stateForward.isMoving) {\n      return null\n    }\n\n    let angleNew = 0\n\n    if (stateForward.left) {\n      angleNew = 270\n    }\n\n    if (stateForward.right) {\n      angleNew = 90\n    }\n\n    if (stateForward.front) {\n      angleNew = 0\n\n      if (stateForward.left) {\n        angleNew = 305\n      }\n\n      if (stateForward.right) {\n        angleNew = 45\n      }\n    }\n\n    if (stateForward.back) {\n      angleNew = 180\n\n      if (stateForward.left) {\n        angleNew = 225\n      }\n\n      if (stateForward.right) {\n        angleNew = 135\n      }\n    }\n  \n    let radianNew = Tools.ToRadians(angleNew) + this.meshFoot.rotation.y\n    const radianOld = this.meshCharacter.rotation.y\n  \n    const angleOld = Tools.ToDegrees(radianOld)\n    angleNew = Tools.ToDegrees(radianNew)\n  \n    const diff = (angleNew - angleOld + 180) % 360 - 180\n    const shortWayAngle = diff < -180 ? diff + 360 : diff\n    radianNew = radianOld + Tools.ToRadians(shortWayAngle)\n    \n    const diffAngle = Math.abs(radianNew - radianOld) / (Math.PI / 180)\n  \n    if (diffAngle > 10) {\n      if (!this.isAnimated) {\n        this.stopAnimation()\n        this.play(radianNew, radianOld)\n        this.isAnimated = true\n      }\n    } else {\n      this.meshCharacter.rotation.y = radianNew\n    }\n  }\n\n  private play (radianNew: number, radianOld: number) {\n    if (this.animation === undefined) {\n      console.error('Not set animation rotate')\n      return\n    }\n\n    const keys = []\n    const frames = 10\n\n    keys.push({\n      frame: 0,\n      value: radianOld\n    })\n\n    keys.push({\n      frame: frames,\n      value: radianNew\n    })\n    \n    this.animation.setKeys(keys)\n    this.meshCharacter.animations = []\n    this.meshCharacter.animations.push(this.animation)\n  \n    this.isAnimated = true\n    this.animatable = this.scene.beginAnimation(this.meshCharacter, 0, frames, false, 1.15, () => {\n      this.isAnimated = false\n    })\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  \n    this.subscribeStore.rotate(() => {\n      const stateForward = store.getters.getPlayerById(this.playerId).move.forward\n      \n      if (stateForward.isMoving) {\n        this.setAngle()\n      }\n    })\n  \n    this.subscribeStore.forward(() => {\n      this.setAngle()\n    })\n  \n    this.syncIntervalId = setInterval(() => {\n      this.setAngle()\n    }, 100)\n  }\n  \n  private stopAnimation()\n  {\n    if (this.animatable !== undefined) {\n      this.animatable.stop()\n    }\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    \n    if (this.syncIntervalId) {\n      clearInterval(this.syncIntervalId)\n    }\n  }\n}\n","import { AbstractMesh, Mesh } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport { sortBy } from 'lodash'\n\ninterface LOD {\n  mesh: any\n  distance: number\n}\n\nexport default class LODs {\n  static getLODs(meshes: Array<AbstractMesh>)\n  {\n    const arrayLODs = [] as Array<LOD>\n    \n    meshes.forEach(mesh => {\n      const tags = Helpers.getTagsFromMesh(mesh)\n    \n      if (!tags || !tags.find((tag: string) => tag === 'lod')) {\n        return\n      }\n    \n      const tagDistance = tags.find((tag: string) => tag.indexOf('distance') !== -1)\n      const distance = tagDistance ? Number(tagDistance.split('_')[1]) : 0\n    \n      mesh.isVisible = false\n  \n      arrayLODs.push({\n        mesh: mesh,\n        distance: distance\n      })\n    })\n    \n    return sortBy(arrayLODs, 'distance').reverse()\n  }\n  \n  static addLevels(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes) as Array<LOD>\n    \n    if (arrayLODs.length) {\n      const mainLod = arrayLODs[0]\n      const mainLODMesh = mainLod.mesh as Mesh\n      \n      mainLODMesh.useLODScreenCoverage = false\n      \n      for (let i = 1; i < arrayLODs.length; i++) {\n        const LOD = arrayLODs[i]\n        mainLODMesh.addLODLevel(LOD.distance, LOD.mesh)\n      }\n  \n      mainLod.mesh.addLODLevel(mainLod.distance, null)\n    }\n  }\n  \n  static showOnlyMainLod(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes)\n    \n    if (arrayLODs.length) {\n      arrayLODs.forEach((LOD) => {\n        LOD.mesh.isVisible = false\n      })\n  \n      arrayLODs[0].mesh.isVisible = true\n    }\n  }\n}\n","import { AssetContainer, InstantiatedEntries, Mesh, SceneLoader, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport LODs from '@/models/scene/LODs'\n\nexport interface Container {\n  name: string\n  data: AssetContainer\n}\n\nexport default class ContainerManager {\n  static async getContainer(name: string, path: string): Promise<InstantiatedEntries | null> {\n    const filePath = path + name;\n    \n    if (!Helpers.isFile(filePath)) {\n      console.error('Not found file container: ' + filePath)\n      return null\n    }\n    \n    const container = globalThis.assetContainers.find((container: Container) => container.name === name)\n    \n    if (container) {\n      const instanceData = this.getInstance(container.data)\n      const meshes = instanceData.rootNodes[0].getChildMeshes()\n  \n      LODs.showOnlyMainLod(meshes)\n      \n      globalThis.collisions.appendCollisionByMeshes(meshes)\n      \n      return instanceData\n    }\n    \n    const timestamp = await Helpers.getFileTimestamp(filePath)\n  \n    const loadedContainer = await SceneLoader.LoadAssetContainerAsync(  path, name + '?timestamp=2' + timestamp, globalThis.scene)\n    \n    if (loadedContainer) {\n      LODs.addLevels(loadedContainer.meshes)\n      \n      loadedContainer.removeAllFromScene()\n      \n      const newContainer = { name, data: loadedContainer }\n      globalThis.assetContainers.push(newContainer)\n      \n      const instancesData = this.getInstance(newContainer.data)\n      \n      const meshes = instancesData.rootNodes[0].getChildMeshes()\n      globalThis.collisions.appendCollisionByMeshes(meshes)\n      \n      LODs.showOnlyMainLod(meshes)\n      \n      return instancesData\n    }\n\n    return null\n  }\n  \n  static getInstance(assetContainer: AssetContainer)\n  {\n    const result = assetContainer.instantiateModelsToScene((name) => {\n      return name\n    }, false, { doNotInstantiate: false })\n    \n    const meshes = result.rootNodes[0].getChildMeshes()\n  \n    meshes.forEach(mesh => {\n      const assetMesh = assetContainer.meshes.find(assetMesh => assetMesh.name === mesh.name) as Mesh\n      \n      if (assetMesh) {\n        const tags = Tags.GetTags(assetMesh)\n        Tags.AddTagsTo(mesh, tags)\n      }\n    })\n    \n    return result\n  }\n}\n","import { AbstractMesh, Scene } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport store from '@/store/index'\nimport { Item, Player } from '@/store/players/types'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport default class Items {\n  characterMeshes: AbstractMesh[]\n  placeholders: AbstractMesh[]\n  playerId: string\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.scene = globalThis.scene\n    \n    const bodyMesh = scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.characterMeshes = bodyMesh.getChildMeshes()\n    this.placeholders = []\n    \n    this.setPlaceholders()\n    this.setItems()\n  }\n  \n  private setPlaceholders () {\n    this.characterMeshes.forEach(mesh => {\n      if (Helpers.IsName(mesh.id, 'placeholder', true)) {\n        mesh.isVisible = false\n        this.placeholders.push(mesh)\n      }\n    })\n  }\n  \n  private setItems () {\n    const storePlayer = store.getters.getPlayerById(this.playerId) as Player\n    \n    storePlayer.items.forEach((item: Item) => {\n      const placeholder = this.placeholders.find(placeholder => {\n        return Helpers.IsName(placeholder.id, item.type, true)\n      })\n      \n      if (!placeholder) {\n        return null\n      }\n      \n      const path = '/resources/graphics/items/'\n      const assetContainer = ContainerManager.getContainer(item.flavour + '.gltf', path)\n      \n      if (!assetContainer) {\n        console.error('Container item not load :' + item.flavour)\n        return null\n      }\n      \n      // const rootId = '__root__item_' + item.flavour + '_' + this.playerId\n      \n     /* assetContainer.then((container) => {\n        if (!container) {\n          return null\n        }\n        \n        const resources = container.instantiateModelsToScene((sourceName) => {\n          if (sourceName == '__root__') {\n            return rootId\n          }\n          \n          return sourceName + '_' + this.playerId\n        })\n        \n        const rootMesh = resources.rootNodes[0]\n        rootMesh.id = rootMesh.name\n        \n        const meshes = rootMesh.getChildMeshes()\n        \n        meshes.forEach(mesh => {\n          mesh.id = mesh.name\n          mesh.isPickable = false\n          mesh.checkCollisions = false\n        })\n        \n        if (placeholder) {\n          rootMesh.parent = placeholder\n        }\n      })*/\n      \n    })\n  }\n}","import { AbstractMesh, DirectionalLight, Mesh, Nullable, Observer, Scene, ShadowGenerator, } from '@babylonjs/core'\nimport Animation from './Animation'\nimport Rotation from './Rotation'\nimport store from '@/store/index'\nimport ContainerManager from '@/models/scene/ContainerManager'\nimport { Helpers } from '@/models/Helpers'\nimport { Property } from '@/store/players/types'\nimport Items from '@/models/сommon/character/Items'\n\nexport default class Character {\n  scene: Scene\n  mesh: AbstractMesh | undefined\n  meshFoot: Mesh | undefined\n  meshBody?: AbstractMesh\n  meshRoot?: AbstractMesh\n  playerId: string\n  meshBodyId: string\n  meshRootId: string\n  observer?: Nullable<Observer<Scene>>\n  animation?: Animation\n  rotation?: Rotation\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshBodyId = 'characterBody_' + this.playerId\n    this.meshRootId = 'characterRoot_' + this.playerId\n  }\n  \n  load (callback: any) {\n    const path = process.env.VUE_APP_RESOURCES_PATH + 'graphics/characters/'\n    // TODO: взять из store название gltf\n    const assetContainer = ContainerManager.getContainer('BTLMN_Lemon.gltf', path)\n    \n    assetContainer.then((container) => {\n      if (!container) {\n        throw 'Not found container ' + path + 'BTLMN_Lemon.gltf'\n      }\n      \n      const rootMesh = container.rootNodes[0]\n      rootMesh.id = this.meshRootId\n  \n      container.rootNodes[0].getChildMeshes().forEach((mesh) => {\n          if (mesh.name == 'Body') {\n            mesh.id = this.meshBodyId\n            mesh.name = this.meshBodyId\n            return\n          }\n  \n          mesh.id = mesh.id + '_' + this.playerId\n          mesh.name = mesh.name + '_' + this.playerId\n      })\n      \n      container.animationGroups.forEach((animationGroup) => {\n        animationGroup.name = animationGroup.name + '_' + this.playerId\n      })\n      \n      this.setMeshes()\n      this.setAnimations()\n      this.setItems()\n      this.setShadow()\n  \n      callback()\n  \n      this.observer = this.scene.onBeforeRenderObservable.add(() => {\n        this.beforeRender()\n      })\n    })\n  }\n  \n  setMeshes() {\n    const meshBody = this.scene.getMeshById(this.meshBodyId)\n    const meshRoot = this.scene.getMeshById(this.meshRootId)\n  \n    if (!meshBody) {\n      throw 'Not found mesh Player Body'\n    }\n  \n    if (!this.meshFoot) {\n      throw 'Not found mesh Player Foot'\n    }\n  \n    if (!meshRoot) {\n      throw 'Not found mesh Root'\n    }\n  \n    this.meshBody = meshBody\n    this.meshBody.rotationQuaternion = null\n    this.meshBody.resetLocalMatrix()\n    this.meshBody.isVisible = false\n    \n    this.meshRoot = meshRoot\n    this.meshRoot.id = this.meshRoot.name\n    this.meshRoot.rotationQuaternion = null\n    this.meshRoot.resetLocalMatrix()\n    \n    this.meshRoot.getChildMeshes().forEach(mesh => {\n      mesh.id = mesh.name\n      mesh.isPickable = false\n      mesh.checkCollisions = false\n    })\n  \n    this.disposeNotActiveProperties()\n  }\n  \n  filterProperties (mesh: AbstractMesh) {\n      const playerStore = store.getters.getPlayerById(this.playerId)\n      const properties = playerStore.properties\n      \n      if (!Helpers.IsName(mesh.name,'placeholder', true)) {\n        return properties.find((property: Property) => {\n          return Helpers.IsName(mesh.name, property.flavour, true)\n        })\n      }\n  \n    return true\n  }\n  \n  private disposeNotActiveProperties()\n  {\n    this.meshBody?.getChildMeshes().forEach((mesh) => {\n      if (!this.filterProperties(mesh)) {\n        mesh.dispose()\n      }\n    })\n  }\n  \n  private setItems()\n  {\n    new Items(this.playerId)\n  }\n  \n  private setAnimations () {\n    this.animation = new Animation(this.playerId)\n    this.rotation = new Rotation(this.playerId)\n  }\n  \n  private setShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (light) {\n      const shadowGenerator = light.getShadowGenerator() as ShadowGenerator\n      \n      if (this.meshBody && shadowGenerator) {\n        shadowGenerator.addShadowCaster(this.meshBody)\n      }\n      \n    }\n  }\n  \n  private beforeRender () {\n    if (this.meshRoot && this.meshFoot) {\n      this.meshRoot.position.x = this.meshFoot.position.x\n      this.meshRoot.position.z = this.meshFoot.position.z\n      this.meshRoot.position.y = this.meshFoot.position.y - 0.24\n    }\n  }\n  \n  dispose () {\n    this.rotation?.dispose()\n    this.animation?.dispose()\n    \n    if (this.observer) {\n      this.scene.onBeforeRenderObservable.remove(this.observer)\n    }\n    \n    this.scene.getMeshById('characterRoot_' + this.playerId)?.dispose()\n  }\n}\n","import {\n  Vector3,\n  UniversalCamera,\n  Scene,\n  UniversalCamera as BabylonCamera,\n  Ray,\n  AbstractMesh, Axis, Scalar\n} from '@babylonjs/core'\nimport store from '@/store'\nimport { Player } from '@/store/players/types'\n\ninterface CalculateDistance {\n  distance: number;\n  amount: number;\n}\n\nconst MAX_DIST_CAMERA_Z = 4.5\nconst MAX_DIST_CAMERA_Y = 0.5\n\nexport default class Camera {\n  scene: Scene\n  babylonCamera: BabylonCamera\n  meshHead: AbstractMesh\n  actualDistance: number\n  calculateDistance: CalculateDistance\n  isMoving: boolean\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.babylonCamera = new UniversalCamera('playerCamera', Vector3.Zero(), this.scene)\n    this.meshHead = this.scene.getMeshById('playerHead_' + store.state.player.id) as AbstractMesh\n    this.actualDistance = -MAX_DIST_CAMERA_Z\n    this.isMoving = false\n    \n    this.calculateDistance = {\n      amount: 0,\n      distance: 0\n    }\n    \n    this.init()\n  }\n  \n  private init () {\n    this.babylonCamera.maxZ = 350\n    this.babylonCamera.minZ = 0.2\n    this.babylonCamera.name = 'player'\n    this.scene.activeCamera = this.babylonCamera\n    this.attachCamera()\n    this.setIsMovingInterval()\n  }\n  \n  private attachCamera () {\n    this.scene.registerBeforeRender(() => {\n      this.setDistance()\n      this.babylonCamera.position = this.meshHead.position\n      \n      this.babylonCamera.rotation.x = Number(Scalar.Lerp(this.babylonCamera.rotation.x, this.meshHead.rotation.x, 0.4).toFixed(5))\n      this.babylonCamera.rotation.y = Number(Scalar.Lerp(this.babylonCamera.rotation.y, this.meshHead.rotation.y, 0.25).toFixed(5))\n      \n      this.actualDistance = Number(Scalar.Lerp(this.actualDistance, this.calculateDistance.distance, this.calculateDistance.amount).toFixed(5))\n      \n      const dirZ = this.babylonCamera.getDirection(Axis.Z)\n      this.babylonCamera.position.addInPlace(dirZ.scaleInPlace(this.actualDistance))\n      \n      const dirY = this.babylonCamera.getDirection(Axis.Y)\n      this.babylonCamera.position.addInPlace(dirY.scaleInPlace(-MAX_DIST_CAMERA_Y))\n    })\n  }\n  \n  private setDistance () {\n    const headPosition = this.meshHead.position\n    let forward = new Vector3(0, -MAX_DIST_CAMERA_Y, -MAX_DIST_CAMERA_Z)\n    const m = this.meshHead.getWorldMatrix()\n    forward = Vector3.TransformCoordinates(forward, m)\n    const direction = Vector3.Normalize(forward.subtract(headPosition))\n    \n    const ray = new Ray(headPosition, direction, MAX_DIST_CAMERA_Z)\n    \n    const pickResult = this.scene.pickWithRay(ray, (mesh) => {\n      return mesh.checkCollisions\n    })\n    \n    let distance = -MAX_DIST_CAMERA_Z\n    let amount = 0.02\n   \n    if (this.isMoving) {\n      distance = -MAX_DIST_CAMERA_Z - 1.2\n    }\n    \n    if (pickResult && pickResult.pickedMesh) {\n      distance = -(pickResult.distance + 0.2)\n      amount = 0.5\n    }\n  \n    this.calculateDistance.distance = distance\n    this.calculateDistance.amount = amount\n  }\n  \n  private setIsMovingInterval()\n  {\n    setInterval(() => {\n      this.isMoving = Camera.getIstMoving()\n    }, 100)\n  }\n  \n  private static getIstMoving()\n  {\n    const playerState = store.getters.getPlayerById(store.state.player.id) as Player // TODO: дописать interval на смену move\n    return playerState.move.forward.isMoving\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from '../playerSelf/Controller'\nimport { Scene } from '@babylonjs/core'\nimport Character from '@/models/сommon/character/Character'\nimport Camera from '@/models/playerSelf/Camera'\n\nexport default class Player {\n  scene: Scene\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n  \n    new Body(this.playerId)\n  \n    const character = new Character(this.playerId)\n    character.load(() => {\n      new Controller()\n      new Camera()\n    })\n  }\n}\n","import MoveCommon from '../сommon/Move'\n\nexport default class Move extends MoveCommon {\n\n}\n","import Move from './Move'\nimport SubscribeStore from '../сommon/SubscribeStore'\nimport { Scalar } from '@babylonjs/core'\nimport { Forward } from '@/store/players/types'\n\nexport default class Controller {\n  move: Move\n  playerId: string\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.move = new Move(playerId, globalThis.scene)\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  }\n\n  subscribe () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotate((rotateX: number, rotateY: number) => {\n      this.move.rotate(rotateX, rotateY)\n    })\n\n    this.subscribeStore.forward((forward: Forward) => {\n      this.move.forward = {...forward}\n    })\n\n    this.subscribeStore.jump((jump: boolean) => {\n      if (jump) {\n        this.move.jump()\n      }\n    })\n\n    this.syncPosition()\n    this.syncRotation()\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    this.move.dispose()\n  }\n\n  private syncPosition () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    let observerSyncCoordinate: any = null\n    \n    this.subscribeStore.position((position: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshFoot = this.move.meshFoot\n      const endX = Number(position.x.toFixed(5))\n      const endY = Number(position.y.toFixed(5))\n      const endZ = Number(position.z.toFixed(5))\n      const startX = Number(meshFoot.position.x.toFixed(5))\n      const startY = Number(meshFoot.position.y.toFixed(5))\n      const startZ = Number(meshFoot.position.z.toFixed(5))\n\n      if (!this.move.forward.isMoving &&\n        (\n          endX !== startX ||\n          endY !== startY ||\n          endZ !== startZ\n        )\n      ) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshFoot.position.x = Scalar.Lerp(meshFoot.position.x, endX, 0.4)\n          meshFoot.position.y = Scalar.Lerp(meshFoot.position.y, endY, 0.4)\n          meshFoot.position.z = Scalar.Lerp(meshFoot.position.z, endZ, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.position.x.toFixed(5)) === endX &&\n            Number(meshFoot.position.y.toFixed(5)) === endY &&\n            Number(meshFoot.position.z.toFixed(5)) === endZ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n\n  private syncRotation () {\n    let observerSyncCoordinate: any = null\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotation((rotation: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshHead = this.move.meshHead\n      const meshFoot = this.move.meshFoot\n\n      const endX = Number(rotation.x.toFixed(5))\n      const endY = Number(rotation.y.toFixed(5))\n      const startX = Number(meshHead.rotation.x.toFixed(5))\n      const startY = Number(meshFoot.rotation.y.toFixed(5))\n\n      if (endX !== startX || endY !== startY) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshHead.rotation.x = Scalar.Lerp(meshHead.rotation.x, endX, 0.4)\n          meshFoot.rotation.y = Scalar.Lerp(meshFoot.rotation.y, endY, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.rotation.x.toFixed(5)) === endX &&\n            Number(meshFoot.rotation.y.toFixed(5)) === endY\n          ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from './Controller'\nimport Character from '@/models/сommon/character/Character'\n\nexport default class Player {\n  body: Body\n  character: Character\n  controller?: Controller\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.body = new Body(playerId)\n    this.character = new Character(playerId)\n  \n    this.character.load(() => {\n      this.controller = new Controller(playerId)\n      this.controller.subscribe()\n    })\n  }\n  \n  dispose() {\n    console.log('try desp')\n    this.controller?.dispose()\n    this.character.dispose()\n    this.body.dispose()\n  }\n}\n","import { AbstractMesh, InstantiatedEntries, Scene } from '@babylonjs/core'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport interface PrefabItem {\n  id: number;\n  container: InstantiatedEntries;\n}\n\nexport default class Prefabs {\n  prefabs: AbstractMesh[]\n  scene: Scene\n  \n  constructor (callback: any) {\n    this.scene = globalThis.scene\n    this.prefabs = []\n    \n    this.setPrefabs()\n    this.setItems().then(() => {\n      console.info('All prefabs loaded!')\n      callback()\n    })\n  }\n  \n  private setPrefabs () {\n    const meshes = this.scene.getMeshesByTags('prefab')\n  \n    meshes.forEach(mesh => {\n      mesh.isVisible = false\n      this.prefabs.push(mesh)\n    })\n  }\n  \n  private async setItems() {\n    let id = 0\n    globalThis.prefabs = []\n    \n    for (const prefab of this.prefabs) {\n      const nameModel = `BTLMN_Prop_${prefab.id.replace('Prefab_', '')\n        .replace(/\\.[^/.]+$/, '')}.gltf`\n      \n      const path = `${process.env.VUE_APP_RESOURCES_PATH}graphics/prefabs/`\n      \n      try {\n        const container = await ContainerManager.getContainer(nameModel, path)\n        \n        if (!container) {\n          console.error(`Error loading container ${nameModel}:`)\n          continue\n        }\n        \n        const rootMesh = container.rootNodes[0]\n        rootMesh.parent = prefab\n        prefab.id = 'prefab_' + id\n  \n        const loopAnimation = container.animationGroups.find(group => group.name === 'start')\n        \n        if (loopAnimation) {\n          loopAnimation.play(true)\n        }\n        \n        globalThis.prefabs.push({\n          id: id,\n          container: container\n        })\n        \n        id++\n        \n      } catch (error) {\n        console.error(`Error loading container ${nameModel}:`, error)\n      }\n    }\n  }\n}","import { IGLTFLoaderExtension } from '@babylonjs/loaders/glTF'\nimport { GLTFLoader } from '@babylonjs/loaders/glTF/2.0'\nimport { Tags, TransformNode } from '@babylonjs/core'\n\nclass TagsExtension implements IGLTFLoaderExtension {\n  public readonly name = 'MyTagsExtension'\n  public enabled = true\n  \n  constructor(private _loader: GLTFLoader) {}\n  \n  public loadNodeAsync(context: string, node: any, assign: (babylonTransformNode: any) => void): Promise<TransformNode> {\n    return this._loader.loadNodeAsync(context, node,  (babylonTransformNode) => {\n      if (this._loader.gltf.meshes) {\n        const mesh = this._loader.gltf.meshes[node.mesh]\n        \n        if (mesh && mesh.extras) {\n          if (mesh.extras.tags) {\n            Tags.AddTagsTo(babylonTransformNode, mesh.extras.tags)\n          }\n        }\n      }\n\n      assign(babylonTransformNode)\n    });\n  }\n  \n  public dispose(): void {\n    // Add code to dispose any resources used by the extension\n  }\n}\n\nexport default function RegisterTagsExtension () {\n  GLTFLoader.RegisterExtension('MyTagsExtension', (loader: GLTFLoader) => {\n    return new TagsExtension(loader)\n  })\n}\n","import { AbstractMesh, Scene, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Collisions {\n  listCollisions: AbstractMesh[]\n  listCollisionsFloor: AbstractMesh[]\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.listCollisions = []\n    this.listCollisionsFloor = []\n    \n    this.setCollisions()\n  }\n  \n  private setCollisions()\n  {\n    this.listCollisions = this.scene.meshes.filter(mesh => mesh.checkCollisions || Helpers.hasTag(mesh, 'collision'))\n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n    \n    this.listCollisions.forEach((mesh) => {\n      mesh.isVisible = false\n      mesh.isPickable = true\n    })\n  \n    this.scene.getMeshesByTags('visible_force').forEach((mesh) => {\n      mesh.isVisible = true\n    })\n  }\n  \n  private static checkCollisionList(mesh: AbstractMesh, list: Array<AbstractMesh>)\n  {\n    for (const keyMesh in list) {\n      const listMesh = list[keyMesh]\n      \n      if (listMesh !== mesh && mesh.intersectsMesh(listMesh, Tags.MatchesQuery(listMesh, 'precise'))) {\n        return listMesh\n      }\n    }\n  \n    return false\n  }\n  \n  checkCollisionFloor(mesh: AbstractMesh) {\n    return Collisions.checkCollisionList(mesh, this.listCollisionsFloor)\n  }\n  \n  appendCollisionByMeshes(meshes: Array<AbstractMesh>) {\n    meshes.forEach(mesh => {\n      if (mesh.checkCollisions || Helpers.hasTag(mesh, 'collision')) {\n        mesh.checkCollisions = true\n        mesh.isVisible = false\n        mesh.isPickable = false\n        \n        this.listCollisions.push(mesh)\n      }\n    })\n  \n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n  }\n}\n","import {\n  AbstractMesh,\n  Mesh,\n  MeshBuilder,\n  Ray,\n  RayHelper,\n  Scene,\n  Vector3\n} from '@babylonjs/core'\nimport { Rectangle } from '@babylonjs/gui/2D'\nimport store from '@/store/index'\nimport { PrefabItem } from '@/models/scene/Prefabs'\n\ninterface Item {\n  meshEventId: string;\n  prefabItem: PrefabItem;\n}\n\nexport default class IceMeteor {\n  items: Array<Item>\n  scene: Scene\n  store: any\n  playerId: string\n  meshHead: Mesh\n  meshFoot: Mesh\n  showRay: boolean\n  rays: Array<Ray>\n  rectLabel: Rectangle\n  isFocused: boolean\n  currentPrefabId: number|null\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = this.store.state.player.id\n    this.meshHead = this.scene.getMeshById('characterBody_' + this.playerId) as Mesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as Mesh\n    this.showRay = false\n    this.items = []\n    this.rays = []\n    this.rectLabel = new Rectangle()\n    this.isFocused = false\n    this.currentPrefabId = null\n    \n    this.initItems()\n    // this.initLabel()\n    this.initCastRays()\n    \n    console.log(this.scene.getMeshesByTags('event_ice_meteor'))\n  }\n  \n  private initItems () {\n    this.scene.getMeshesByTags('event_ice_meteor').forEach((mesh: Mesh, index) => {\n      if (mesh) {\n        console.log(mesh)\n        mesh.isPickable = false\n        mesh.isVisible = false\n        \n        const meshEventId = mesh.id + '_event_mesh_' + index\n        \n        const boundingInfo = mesh.getBoundingInfo()\n        const size = boundingInfo.boundingBox.extendSize.scale(2) // extendSize - это половина размера ограничивающего объема, поэтому умножаем на 2\n        \n        const invisibleMesh = MeshBuilder.CreateBox(meshEventId, {height: size.y, width: size.x, depth: size.z}, scene);\n        invisibleMesh.parent = mesh\n        invisibleMesh.visibility = 0\n        invisibleMesh.isVisible = true\n        \n        const prefabId = this.getPrefabIdByMesh(mesh)\n        \n        if (prefabId) {\n          const prefabItem = globalThis.prefabs.find((prefab) => prefab.id == prefabId)\n          \n          if (prefabItem) {\n            prefabItem.container.animationGroups.forEach((animationGroup) => {\n              animationGroup.goToFrame(0)\n              animationGroup.stop()\n            })\n  \n            this.items.push({\n              meshEventId,\n              prefabItem\n            })\n          } else {\n            console.error('Not found prefabId')\n          }\n          \n        } else {\n          console.error('Not found prefabId')\n        }\n       \n      }\n    })\n  }\n  \n  private buildRays () {\n    const rayCount = 3\n    \n    const length = 1\n    const separation = 1 / (rayCount - 1)\n    \n    // Создаем каждый луч\n    for (let i = 0; i < rayCount; i++) {\n      const rayX = i * separation - 0.5\n      const rayY = 0\n      \n      const ray = new Ray(Vector3.Zero(), Vector3.Zero())\n      const rayHelper = new RayHelper(ray)\n      rayHelper.attachToMesh(this.meshHead, new Vector3(rayX, rayY, length), new Vector3(0, 0.5, 0.2), length)\n      \n      if (this.showRay) {\n        rayHelper.show(this.scene)\n      }\n      \n      this.rays.push(ray)\n    }\n  }\n  \n  private castRay (ray: Ray) {\n    const hit = this.scene.pickWithRay(ray)\n  \n    const playerState = this.store.getters.getPlayerById(this.playerId)\n    if (!playerState) {\n      return null\n    }\n    \n    if (hit && hit.pickedMesh) {\n        const pickMesh = hit.pickedMesh\n        const item = this.items.find(item => item.meshEventId == pickMesh.id)\n      \n        if (item) {\n          if (!playerState.event.isFocused) {\n            this.store.commit('SET_EVENT_IS_FOCUSED', { playerId: this.playerId, status: true })\n            this.currentPrefabId = item.prefabItem.id\n  \n            item.prefabItem.container.animationGroups.forEach((animationGroup) => {\n              animationGroup.play(true)\n            })\n          }\n          \n          return true\n        }\n    }\n  \n    if (playerState.event.isFocused) {\n      this.store.commit('SET_EVENT_IS_FOCUSED', { playerId: this.playerId, status: false })\n  \n      if (this.currentPrefabId !== null) {\n        const item = this.items.find(item => item.prefabItem.id == this.currentPrefabId)\n    \n        if (item) {\n          item.prefabItem.container.animationGroups.forEach((animationGroup) => {\n            animationGroup.goToFrame(0)\n            animationGroup.stop()\n          })\n        }\n      }\n    }\n    \n    return false\n  }\n  \n  private castRays () {\n    //TODO: проверить every\n    this.rays.forEach(ray => {\n      return !this.castRay(ray)\n    })\n  }\n  \n  private initCastRays () {\n    this.buildRays()\n    \n    setInterval(() => {\n      this.castRays()\n    }, 500)\n  }\n  \n  getPrefabIdByMesh(mesh: AbstractMesh)\n  {\n    const prefabMesh = mesh.parent?.parent\n    \n    if (prefabMesh) {\n      return Number(prefabMesh.id.split('_')[1])\n    }\n    \n    return null\n  }\n}\n","import { Engine } from '@babylonjs/core'\nimport Scene from './scene/Scene'\nimport store from '@/store/index'\nimport Audio from '@/models/sounds/Audio'\nimport ServerClient from './ServerClient'\nimport DevMode from '@/models/scene/DevMode'\nimport PlayerSelf from '@/models/playerSelf/Player'\nimport Player from '@/models/player/Player'\nimport { v4 as uuidv4 } from 'uuid'\nimport Prefabs from '@/models/scene/Prefabs'\nimport RegisterTagsExtension from '@/models/scene/TagsExtansion'\nimport Collisions from '@/models/mehanics/Collisions'\nimport IceMeteor from '@/models/events/IceMeteor'\n\nexport default class Game {\n  players?: Array<Player>\n  \n  init () {\n    globalThis.assetContainers = []\n    this.players = []\n    const canvas = document.getElementById('canvas') as HTMLCanvasElement\n    canvas.width = window.innerWidth\n    canvas.height = window.innerHeight\n    \n    const engine = new Engine(canvas, true, { preserveDrawingBuffer: false, stencil: true })\n    const sceneModel = new Scene(engine)\n    const playerId = this.getPlayerId()\n    store.commit('SET_SELF_PLAYER_ID', playerId)\n    \n    sceneModel.load(async () => {\n      new Audio()\n      sceneModel.setEnvironment()\n      \n      const serverClient = new ServerClient(playerId)\n      serverClient.init()\n      \n      store.subscribe(mutation => {\n        if (mutation.type === 'ADD_PLAYER') {\n          if (mutation.payload.id === playerId) {\n            new PlayerSelf(playerId)\n            \n            this.setClassesGame(() => {\n              store.commit('LOADING_TOGGLE')\n  \n              console.info('Game loaded')\n              console.info('Self player ' + playerId + ' created')\n            })\n  \n            serverClient.syncPlayer()\n \n          } else {\n            this.players?.push(new Player(mutation.payload.id))\n            console.info('Player ' + playerId + ' created')\n          }\n        }\n      })\n    })\n  \n    store.subscribe(mutation => {\n      if (mutation.type === 'REMOVE_PLAYER') {\n        const player = this.players?.find(player => player.playerId === mutation.payload)\n\n        if (player) {\n          player.dispose()\n          console.info('Player ' + player.playerId + ' removed')\n        }\n      }\n    })\n  }\n  \n  setClassesGame (callback: any) {\n    RegisterTagsExtension()\n    \n    new DevMode()\n    globalThis.collisions = new Collisions()\n    \n    new Prefabs(() => {\n      callback()\n      new IceMeteor()\n      Scene.optimize()\n    })\n  }\n  \n  getPlayerId () {\n    const queryString = window.location.search\n    const urlParams = new URLSearchParams(queryString)\n    let playerId = urlParams.get('playerId')\n    \n    if (!playerId) {\n      playerId = 'guest_' + uuidv4()\n    }\n    \n    return playerId\n  }\n}","<template>\n    <div id=\"top_bar\" class=\"no_focus_game\">\n        <div id=\"menu_button\">\n            <div class=\"menu_button\" @click=\"openMenu\"></div>\n        </div>\n\n      <meta-mask></meta-mask>\n    </div>\n</template>\n\n<script>\n  import MetaMask from '@/views/gui/topbar/MetaMask'\n\n  export default {\n    components: {\n      MetaMask\n    },\n    methods: {\n      openMenu() {\n        this.$store.commit('SET_OPEN_MENU', true)\n      }\n    }\n  }\n</script>","<template>\n  <button @click=\"connectOrChangeWallet\" class=\"wkit-button\">\n    {{ isConnected ? walletAddress.slice(0, 6) + '...' + walletAddress.slice(-4) : 'Connect' }}\n  </button>\n</template>\n\n<script>\nimport Web3 from 'web3'\nimport '../../../styles/suiet.sass'\n\nexport default {\n  data() {\n    return {\n      isConnected: false,\n      walletAddress: '',\n      web3: null\n    }\n  },\n  async created() {\n    if (window.ethereum) {\n      this.web3 = new Web3(window.ethereum)\n      const accounts = await this.web3.eth.getAccounts()\n      if (accounts.length > 0) {\n        this.isConnected = true\n        this.walletAddress = accounts[0]\n      }\n      window.ethereum.on('accountsChanged', (accounts) => {\n        if (accounts.length === 0) {\n          this.isConnected = false\n        } else {\n          this.walletAddress = accounts[0]\n        }\n      })\n    } else {\n      console.log('Metamask is not installed. Please consider installing it: https://metamask.io/download.html')\n    }\n  },\n  methods: {\n    async connectOrChangeWallet() {\n      if (window.ethereum) {\n        if (this.isConnected) {\n         //  window.ethereum.disconnect()\n          this.isConnected = false\n        } else {\n          try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n            this.isConnected = true\n            this.walletAddress = accounts[0]\n          } catch (error) {\n            console.error('User rejected connection:', error)\n          }\n        }\n      }\n    }\n  }\n}\n</script>","import { render } from \"./MetaMask.vue?vue&type=template&id=72f35d85\"\nimport script from \"./MetaMask.vue?vue&type=script&lang=js\"\nexport * from \"./MetaMask.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TopBar.vue?vue&type=template&id=0780d5ea\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"level_preview\" }\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"text\" }, \" Are you ready? \", -1)\nconst _hoisted_4 = { class: \"container_button\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.play && _ctx.play(...args))),\n          class: \"button\"\n        }, \"play\")\n      ])\n    ])\n  ], 512)), [\n    [_vShow, !this.$store.state.level.loading && this.show]\n  ])\n}","\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'LevelPreview',\n  methods: {\n    play () {\n      this.$store.commit('SET_PLAY')\n      this.show = false\n    }\n  },\n  data () {\n    return {\n      show: true\n    }\n  }\n})\n","import { render } from \"./LevelPreview.vue?vue&type=template&id=17485c69&ts=true\"\nimport script from \"./LevelPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LevelPreview.vue?vue&type=script&lang=ts\"\n\nimport \"./LevelPreview.vue?vue&type=style&index=0&id=17485c69&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"menu\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Menu\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"li\", null, [\n  /*#__PURE__*/_createElementVNode(\"a\", { href: \"/home\" }, \"Exit\")\n], -1)\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"a\", {\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.openSettings && _ctx.openSettings(...args)))\n            }, \"Settings\")\n          ]),\n          _hoisted_6\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.closeMenu && _ctx.closeMenu(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.level.isMenuOpen]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    methods: {\n      closeMenu() {\n        this.$store.commit('SET_OPEN_MENU', false)\n      },\n      openSettings() {\n        this.$store.commit('SET_SETTINGS_OPEN', true)\n      }\n    }\n  })\n","import { render } from \"./MenuLevel.vue?vue&type=template&id=621e8932&ts=true\"\nimport script from \"./MenuLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuLevel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"settings\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Settings\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = [\"onChange\", \"checked\"]\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.fields, (field, index) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: index }, [\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  onChange: ($event: any) => (_ctx.saveField(field.name, $event)),\n                  checked: field.value\n                }, null, 40, _hoisted_6),\n                _createTextVNode(\" \" + _toDisplayString(field.name), 1)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.close && _ctx.close(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.settings.open]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    name: 'game-home',\n    computed: {\n      fields(): any {\n        return this.$store.getters.settingFields\n      }\n    },\n    methods: {\n      saveField (name: string, event: any) {\n        this.$nextTick(() => {\n          this.$store.commit('SET_SETTING_FIELD_VALUE', {name, value: event.target.checked})\n        })\n\n\n      },\n      close () {\n        this.$store.commit('SET_SETTINGS_OPEN', false)\n      }\n    },\n    data: function () {\n      return {\n        soundEnable: true\n      }\n    }\n  })\n","import { render } from \"./Settings.vue?vue&type=template&id=00492990&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\n  import { defineComponent } from 'vue'\n  import Game from '@/models/Game'\n  import TopBar from '@/views/gui/topbar/TopBar.vue'\n  import LevelPreview from '@/views/LevelPreview.vue'\n  import MenuLevel from '@/views/gui/MenuLevel.vue'\n  import Settings from '@/views/gui/Settings.vue'\n  import { mapGetters } from 'vuex'\n\n  export default defineComponent({\n    name: 'game-level',\n    mounted (): void {\n      this.$nextTick(() => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const level = urlParams.get('level')\n        this.$store.commit('SET_LEVEL', level ? level : 1)\n        const game = new Game()\n        game.init()\n      })\n    },\n    computed: {\n      ...mapGetters([\n        'finish'\n      ])\n    },\n    watch: {\n      finish(value) {\n        if (value) {\n          window.location.href = '/finish'\n        }\n      }\n    },\n    components: {\n      TopBar,\n      LevelPreview,\n      MenuLevel,\n      Settings\n    }\n  })\n","import { render } from \"./App.vue?vue&type=template&id=340def46&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=340def46&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-340def46\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\n/* Theme variables */\nimport './styles/app.sass'\n\nimport store from '@/store/index'\n\ncreateApp(App)\n  .use(store)\n  .mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbabylon_js\"] = self[\"webpackChunkbabylon_js\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4158); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","id","_hoisted_2","_createElementVNode","_hoisted_3","key","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_TopBar","_resolveComponent","_component_MenuLevel","_component_Settings","_component_LevelPreview","_openBlock","_createElementBlock","_createVNode","this","$store","state","level","loading","_createCommentVNode","mutations","SET_PRESS_MOVE_RIGHT","payload","right","SET_PRESS_MOVE_LEFT","left","SET_PRESS_MOVE_UP","up","SET_PRESS_MOVE_DOWN","down","SET_MOVE_LAST_EVENT","lastEvent","SET_IS_USED_MOVE_CONTROLLER","isUsed","getters","controllerMoveIsUsed","controllerMove","SET_PRESS_ROTATE_RIGHT","SET_PRESS_ROTATE_LEFT","SET_PRESS_ROTATE_UP","SET_PRESS_ROTATE_DOWN","SET_ROTATE_LAST_EVENT","SET_IS_USED_ROTATE_CONTROLLER","controllerRotate","Settings","fields","name","value","label","validateFieldName","field","find","setValueByName","getFields","settings","map","localStorage","setItem","JSON","stringify","getValueByName","settingsStorage","getItem","parse","String","oldField","settingField","SET_SETTINGS_OPEN","open","SET_SETTING_FIELD_VALUE","SettingsStorage","forEach","SettingsLocalStorage","settingFields","getSettingsFieldByName","getSettingsValueByName","Level","saveCompletedLevel","levelId","checkCompletedLevelId","levelsIds","getCompletedLevelsIds","push","join","setLastCompletedLevelId","completedLevels","split","getLastCompletedLevelId","Number","ids","SET_LEVEL","SET_PLAY","play","SET_OPEN_MENU","isMenuOpen","SET_DATE_LAST_USED_CONTROLLERS","dateLastUsedControllers","SET_IS_USED_CONTROLLERS","isUsedControllers","MAP_TOGGLE","isMapOpen","LOADING_TOGGLE","SET_LOWER_FLOOR_POSITION","lowerFloorPosition","x","y","z","SET_LOWER_FLOOR_SIZE","lowerFloorSize","width","height","ADD_KEY","keys","SET_ACTIVE_KEY","status","keysActiveCount","filter","length","CHARGE_BATTERY_UP","batteryCharge","CHARGE_BATTERY_DOWN","SET_FINISH","LevelStorage","finish","playerPosition","playerRotate","getPlayerById","playerId","list","player","playerExample","character","items","properties","move","forward","front","back","isMoving","sprint","rotate","jump","isFly","isFlyUp","syncData","position","rotation","event","press","isFocused","ADD_PLAYER","newPlayer","REMOVE_PLAYER","splice","findIndex","FLY_ENABLED","FLY_UP_ENABLED","FLY_UP_DISABLED","FLY_DISABLED","SET_FORWARD","UPDATE_ROTATE","UPDATE_ROTATION","playerState","UPDATE_POSITION","JUMP_DISABLED","JUMP_ENABLED","JUMP_SET","SYNC_PLAYER","statePlayer","SET_EVENT_PRESS","SET_EVENT_IS_FOCUSED","players","store","strict","levels","SET_SELF_PLAYER_ID","modules","Vuex","Environment","constructor","_defineProperty","scene","globalThis","shadowGenerator","setupHDR","url","process","hdrTexture","CubeTexture","hdrRotation","setReflectionTextureMatrix","Matrix","Tools","gammaSpace","environmentTexture","setupGlow","gl","GlowLayer","mainTextureFixedSize","blurKernelSize","intensity","setupFog","fogColor","Color3","fogDensity","fogMode","Scene","setupLightAndShadow","light","getLightById","ShadowGenerator","console","info","Helpers","getRandomInt","min","max","Math","ceil","floor","random","get2DCoordinatesFromMesh","mesh","camera","engine","pos","Vector3","getAbsolutePosition","getTransformMatrix","viewport","toGlobal","getRenderWidth","getRenderHeight","top","getIsSuffix","suffix","nameArray","item","IsName","text","partly","arguments","undefined","search","getMeshesByName","meshes","getMeshByName","getTime","date","Date","getAverage","rollingAverage","RollingAverage","add","getAnimationRatio","average","numberFixed","number","toFixed","getNameId","meshId","drawEllipsoid","getScene","ellipsoid","MeshBuilder","diameterX","diameterY","diameterZ","segments","onBeforeRenderObservable","copyFrom","addInPlace","ellipsoidOffset","debugmat","StandardMaterial","diffuseColor","wireframe","material","isFile","pop","indexOf","async","filePath","arr","filePathLastFolder","response","axios","manifest","data","error","getTagsFromMesh","rawTags","Tags","hasTag","tag","tags","tagCheck","BabylonScene","callbackLoad","window","addEventListener","resize","SceneLoader","fileName","timestamp","getFileTimestamp","filePathWithTimestamp","e","runRenderLoop","message","log","static","autoClearDepthAndStencil","disablePhysicsEngine","meshNotAnimate","getMeshesByTags","skipPointerMovePicking","freezeWorldMatrix","doNotSyncBoundingInfo","cullingStrategy","AbstractMesh","freeze","options","SceneOptimizerOptions","optimizer","SceneOptimizer","start","setEnvironment","environment","SoundMain","path","subscribe","sound","type","mutation","isPlaying","stop","Music","super","Sound","loop","autoplay","volume","Background","Audio","isLevelRun","pathAudio","audioEngine","Engine","useCustomUnlockedButton","context","audioContext","resume","unlock","SubscribeStore","unsubscribes","dispose","callbackEvent","oldMove","unsubscribe","stateMove","equal","isEqual","oldForward","stateForward","oldStateJump","pressEvent","oldStatePressEvent","statePress","fly","oldState","flyEnd","oldStateRotate","rotateX","rotateY","oldStatePosition","statePosition","oldStateRotation","stateRotation","oldSyncData","syncPlayer","oldPlayer","unsubscribeAll","ServerClient","sessionId","room","init","client","Colyseus","joinOrCreate","then","onAdd","onRemove","send","onMessage","alert","subscribeStore","DevMode","enabled","globalRoot","document","getElementsByTagName","debugLayer","show","overlay","Body","meshHeadId","meshFootId","observer","size","meshHead","meshFoot","meshCoordinator","getMeshById","visibility","checkCollisions","isPickable","remove","DEFAULT_SPEED","SPRINT_SPEED","GRAVITY","JUMP_HEIGHT","Move","modelCollisions","collisions","flyModeTimerId","flyUp","animationJumpFrames","footIsCollision","jumpAnimation","speed","createJumpAnimation","observerBefore","beforeRender","observerAfter","onAfterRenderObservable","afterRender","Animation","easingFunction","SineEase","setEasingMode","EasingFunction","setEasingFunction","setAverage","changeSpeed","nextStep","setNewPosition","gravity","clearTimeout","setTimeout","frame","setKeys","animations","beginDirectAnimation","matrix","getWorldMatrix","vector","moveWithCollisions","checkCollisionFloor","MoveCommon","updatePositionToState","updateRotationToState","updateFly","oldPosition","setInterval","commit","oldRotation","oldFly","oldFlyUp","Controller","sensitiveMouse","mouseIsCaptured","mouseEvent","onKeyboardObservable","keyEvent","eventCode","code","eventType","KeyboardEventTypes","elementContent","getElementById","checkFocusAvailable","composedPath","itemChecked","tagName","classList","contains","canvas","requestPointerLock","pointerlockchange","pointerLockElement","movementY","movementX","Idle","weight","autoPlayLoop","animation","getAnimationGroupByName","setAnimations","setWeightForAllAnimatables","Run","JumpMiddle","JumpFinish","Sprint","Picking","animationGroups","animationGroupCurrent","setAnimationGroups","observableBeforeAnimation","onBeforeAnimation","idle","pushAnimation","getAnimationByName","group","includes","animationJumpMiddle","animationJumpFinish","getAnimationByState","blending","jumpFinishAnimation","targetedAnimations","JumpFinishAnimationEvent","AnimationEvent","addEvent","animationIdle","animationRun","animationSprint","animationPicking","animationGroup","onBeforeAnimationsObservable","removeCallback","Scalar","Rotation","angle","meshCharacter","animatable","isAnimated","forwardAngle","setAnimation","CubicEase","setAngle","angleNew","radianNew","radianOld","angleOld","diff","shortWayAngle","diffAngle","abs","PI","stopAnimation","frames","beginAnimation","syncIntervalId","clearInterval","LODs","arrayLODs","tagDistance","distance","isVisible","sortBy","reverse","getLODs","mainLod","mainLODMesh","useLODScreenCoverage","i","LOD","addLODLevel","ContainerManager","container","assetContainers","instanceData","getInstance","rootNodes","getChildMeshes","showOnlyMainLod","appendCollisionByMeshes","loadedContainer","addLevels","removeAllFromScene","newContainer","instancesData","assetContainer","result","instantiateModelsToScene","doNotInstantiate","assetMesh","Items","bodyMesh","characterMeshes","placeholders","setPlaceholders","setItems","storePlayer","placeholder","getContainer","flavour","Character","meshBodyId","meshRootId","load","callback","rootMesh","setMeshes","setShadow","meshBody","meshRoot","rotationQuaternion","resetLocalMatrix","disposeNotActiveProperties","filterProperties","playerStore","property","getShadowGenerator","addShadowCaster","MAX_DIST_CAMERA_Z","MAX_DIST_CAMERA_Y","Camera","babylonCamera","UniversalCamera","actualDistance","calculateDistance","amount","maxZ","minZ","activeCamera","attachCamera","setIsMovingInterval","registerBeforeRender","setDistance","dirZ","getDirection","Axis","scaleInPlace","dirY","headPosition","m","direction","subtract","ray","Ray","pickResult","pickWithRay","pickedMesh","getIstMoving","Player","syncPosition","syncRotation","observerSyncCoordinate","endX","endY","endZ","startX","startY","startZ","body","controller","Prefabs","prefabs","setPrefabs","prefab","nameModel","replace","parent","loopAnimation","TagsExtension","_loader","loadNodeAsync","node","assign","babylonTransformNode","gltf","extras","RegisterTagsExtension","GLTFLoader","loader","Collisions","listCollisions","listCollisionsFloor","setCollisions","keyMesh","listMesh","intersectsMesh","checkCollisionList","IceMeteor","showRay","rays","rectLabel","Rectangle","currentPrefabId","initItems","initCastRays","index","meshEventId","boundingInfo","getBoundingInfo","boundingBox","extendSize","scale","invisibleMesh","depth","prefabId","getPrefabIdByMesh","prefabItem","goToFrame","buildRays","rayCount","separation","rayX","rayY","rayHelper","RayHelper","attachToMesh","castRay","hit","pickMesh","castRays","prefabMesh","Game","innerWidth","innerHeight","preserveDrawingBuffer","stencil","sceneModel","getPlayerId","serverClient","PlayerSelf","setClassesGame","optimize","queryString","location","urlParams","URLSearchParams","get","uuidv4","class","onClick","openMenu","_component_meta_mask","connectOrChangeWallet","isConnected","walletAddress","slice","web3","ethereum","Web3","accounts","eth","getAccounts","on","methods","request","method","__exports__","components","MetaMask","_withDirectives","_vShow","defineComponent","_hoisted_6","href","_hoisted_7","openSettings","closeMenu","_Fragment","_renderList","onChange","$event","saveField","checked","_createTextVNode","_toDisplayString","close","computed","$nextTick","target","soundEnable","mounted","game","mapGetters","watch","TopBar","LevelPreview","MenuLevel","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","every","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}