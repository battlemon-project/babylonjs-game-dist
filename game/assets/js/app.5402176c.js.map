{"version":3,"file":"assets/js/app.5402176c.js","mappings":"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","sources":["webpack://babylon_js/./src/App.vue?0fd5","webpack://babylon_js/./src/store/controller_move/mutations.ts","webpack://babylon_js/./src/store/controller_move/index.ts","webpack://babylon_js/./src/store/controller_rotate/mutations.ts","webpack://babylon_js/./src/store/controller_rotate/index.ts","webpack://babylon_js/./src/models/storage/Settings.ts","webpack://babylon_js/./src/store/settings/mutations.ts","webpack://babylon_js/./src/store/settings/index.ts","webpack://babylon_js/./src/models/storage/Level.ts","webpack://babylon_js/./src/store/level/mutations.ts","webpack://babylon_js/./src/store/level/index.ts","webpack://babylon_js/./src/store/players/mutations.ts","webpack://babylon_js/./src/store/players/index.ts","webpack://babylon_js/./src/store/index.ts","webpack://babylon_js/./src/models/scene/Environment.ts","webpack://babylon_js/./src/models/Helpers.ts","webpack://babylon_js/./src/models/scene/Scene.ts","webpack://babylon_js/./src/models/sounds/SoundMain.ts","webpack://babylon_js/./src/models/sounds/Music.ts","webpack://babylon_js/./src/models/sounds/Background.ts","webpack://babylon_js/./src/models/sounds/Audio.ts","webpack://babylon_js/./src/models/сommon/SubscribeStore.ts","webpack://babylon_js/./src/models/ServerClient.ts","webpack://babylon_js/./src/models/scene/DevMode.ts","webpack://babylon_js/./src/models/сommon/Body.ts","webpack://babylon_js/./src/models/mehanics/Collisions.ts","webpack://babylon_js/./src/models/сommon/Move.ts","webpack://babylon_js/./src/models/playerSelf/Move.ts","webpack://babylon_js/./src/models/playerSelf/Controller.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Idle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Run.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpMiddle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpFinish.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Sprint.ts","webpack://babylon_js/./src/models/сommon/character/Animation.ts","webpack://babylon_js/./src/models/сommon/character/Rotation.ts","webpack://babylon_js/./src/models/mehanics/LODs.ts","webpack://babylon_js/./src/models/scene/ContainerManager.ts","webpack://babylon_js/./src/models/сommon/character/Items.ts","webpack://babylon_js/./src/models/сommon/character/Character.ts","webpack://babylon_js/./src/models/playerSelf/Camera.ts","webpack://babylon_js/./src/models/playerSelf/Player.ts","webpack://babylon_js/./src/models/player/Move.ts","webpack://babylon_js/./src/models/player/Controller.ts","webpack://babylon_js/./src/models/player/Player.ts","webpack://babylon_js/./src/models/scene/Prefabs.ts","webpack://babylon_js/./src/models/mehanics/EventPoints.ts","webpack://babylon_js/./src/models/scene/TagsExtansion.ts","webpack://babylon_js/./src/models/Game.ts","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue","webpack://babylon_js/./src/views/gui/WalletSuiet.jsx","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue?ecd8","webpack://babylon_js/./src/views/LevelPreview.vue?7c7b","webpack://babylon_js/./src/views/LevelPreview.vue?526f","webpack://babylon_js/./src/views/LevelPreview.vue","webpack://babylon_js/./src/views/gui/MenuLevel.vue?c446","webpack://babylon_js/./src/views/gui/MenuLevel.vue?7df6","webpack://babylon_js/./src/views/gui/MenuLevel.vue","webpack://babylon_js/./src/views/gui/Settings.vue?9ce8","webpack://babylon_js/./src/views/gui/Settings.vue?74aa","webpack://babylon_js/./src/views/gui/Settings.vue","webpack://babylon_js/./src/App.vue?847a","webpack://babylon_js/./src/App.vue","webpack://babylon_js/./src/main.ts","webpack://babylon_js/webpack/bootstrap","webpack://babylon_js/webpack/runtime/chunk loaded","webpack://babylon_js/webpack/runtime/create fake namespace object","webpack://babylon_js/webpack/runtime/define property getters","webpack://babylon_js/webpack/runtime/global","webpack://babylon_js/webpack/runtime/hasOwnProperty shorthand","webpack://babylon_js/webpack/runtime/make namespace object","webpack://babylon_js/webpack/runtime/node module decorator","webpack://babylon_js/webpack/runtime/jsonp chunk loading","webpack://babylon_js/webpack/runtime/nonce","webpack://babylon_js/webpack/startup"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-340def46\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"level\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", { id: \"canvas\" }, null, -1))\nconst _hoisted_3 = {\n  key: 0,\n  id: \"loading_overlay\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { id: \"loading_overlay_text\" }, \"Loading...\", -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TopBar = _resolveComponent(\"TopBar\")!\n  const _component_MenuLevel = _resolveComponent(\"MenuLevel\")!\n  const _component_Settings = _resolveComponent(\"Settings\")!\n  const _component_LevelPreview = _resolveComponent(\"LevelPreview\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createVNode(_component_TopBar),\n      _createVNode(_component_MenuLevel),\n      _createVNode(_component_Settings),\n      (this.$store.state.level.loading)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _hoisted_5))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_LevelPreview)\n    ])\n  ]))\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_move/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_MOVE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_MOVE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_MOVE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_MOVE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_MOVE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_MOVE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_move/types'\nimport { mutations } from '@/store/controller_move/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nconst getters = {\n  controllerMoveIsUsed: (state: ControllerState) => state.isUsed,\n}\n\nexport const controllerMove: Module<ControllerState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_rotate/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_ROTATE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_ROTATE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_ROTATE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_ROTATE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_ROTATE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_ROTATE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_rotate/types'\nimport { mutations } from '@/store/controller_rotate/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nexport const controllerRotate: Module<ControllerState, RootState> = {\n  state,\n  mutations\n}","export interface Field {\n  name: string;\n  value: any;\n  label: string;\n}\n\nexport const Settings = {\n  fields: [\n    {\n      name: 'music',\n      value: true,\n      label: 'Music'\n    },\n    {\n      name: 'sound',\n      value: true,\n      label: 'Sound'\n    },\n    {\n      name: 'dev_mode',\n      value: false,\n      label: 'Dev mode'\n    }\n  ],\n  validateFieldName(name: string) {\n    const field = this.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return true\n  },\n  setValueByName (name: string, value: any) {\n    this.validateFieldName(name)\n    const fields = this.getFields()\n\n    const settings = fields.map((field: Field) => {\n      if (field.name == name) {\n        field.value = value\n      }\n\n      return field\n    })\n\n    localStorage.setItem('settings', JSON.stringify(settings))\n\n    return true\n  },\n  getValueByName (name: string) {\n    const fields = this.getFields()\n    const field = fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return field.value\n  },\n  getFields () {\n    const settingsStorage = localStorage.getItem('settings')\n    if (settingsStorage) {\n      const settings = JSON.parse(String(settingsStorage))\n      return this.fields.map(field => {\n        const oldField = settings.find((settingField: any) => settingField.name == field.name)\n        if (oldField) {\n          field.value = oldField.value\n        }\n\n        return field\n      })\n    }\n\n    return this.fields\n  }\n}","import { MutationTree } from 'vuex'\nimport { Settings } from '@/store/settings/types'\nimport { Settings as SettingsStorage } from '@/models/storage/Settings'\n\nexport const mutations: MutationTree<Settings> = {\n  SET_SETTINGS_OPEN (state, payload) {\n    state.open = payload\n  },\n  SET_SETTING_FIELD_VALUE (state, payload) {\n    if (SettingsStorage.validateFieldName(payload.name)) {\n      SettingsStorage.setValueByName(payload.name, payload.value)\n      state.fields.forEach((field) => {\n        if (field.name === payload.name) {\n          field.value = payload.value\n        }\n      })\n    }\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/settings/mutations'\nimport { Settings } from '@/store/settings/types'\nimport { Field, Settings as SettingsLocalStorage } from '@/models/storage/Settings'\n\n\nconst state: Settings = {\n  fields: SettingsLocalStorage.getFields(),\n  open: false\n}\n\nconst getters = {\n  settingFields: (state: Settings) => state.fields,\n  getSettingsFieldByName: (state: Settings) => (name: string) => {\n    return state.fields.find(field => field.name == name)\n  },\n  getSettingsValueByName: (state: Settings) => (name: string) => {\n    const field = state.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field in Store state'\n    }\n\n    return field.value\n  }\n}\n\nexport const settings: Module<Settings, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","export const Level = {\n  saveCompletedLevel (levelId: number | string) {\n    if (!this.checkCompletedLevelId(levelId)) {\n      const levelsIds = this.getCompletedLevelsIds()\n      levelsIds.push(String(levelId))\n\n      localStorage.setItem('completedLevelsIds', levelsIds.join(','))\n    }\n\n    this.setLastCompletedLevelId(String(levelId))\n  },\n  getCompletedLevelsIds () {\n    const completedLevels = localStorage.getItem('completedLevelsIds')\n    return completedLevels ? completedLevels.split(',') : []\n  },\n  getLastCompletedLevelId () {\n    return Number(localStorage.getItem('lastCompletedLevelsId'))\n  },\n  setLastCompletedLevelId(levelId: string) {\n    return localStorage.setItem('lastCompletedLevelsId', levelId)\n  },\n  checkCompletedLevelId(levelId: number | string) {\n    const ids = this.getCompletedLevelsIds()\n    return ids.find(id => id == levelId)\n  }\n}","import { MutationTree } from 'vuex'\nimport { LevelState } from '@/store/level/types'\nimport { Level as LevelStorage } from '@/models/storage/Level'\n\nexport const mutations: MutationTree<LevelState> = {\n  SET_LEVEL (state, payload) {\n    state.levelId = payload\n  },\n  SET_PLAY (state) {\n    state.play = true\n  },\n  SET_OPEN_MENU (state, payload) {\n    state.isMenuOpen = payload\n  },\n  SET_DATE_LAST_USED_CONTROLLERS (state, payload) {\n    state.dateLastUsedControllers = payload\n  },\n  SET_IS_USED_CONTROLLERS (state, payload) {\n    state.isUsedControllers = payload\n  },\n  MAP_TOGGLE (state) {\n    state.isMapOpen = !state.isMapOpen\n  },\n  LOADING_TOGGLE (state) {\n    state.loading = !state.loading\n  },\n  SET_LOWER_FLOOR_POSITION (state, payload) {\n    state.lowerFloorPosition.x = payload.x\n    state.lowerFloorPosition.y = payload.y\n    state.lowerFloorPosition.z = payload.z\n  },\n  SET_LOWER_FLOOR_SIZE (state, payload) {\n    state.lowerFloorSize.width = payload.width\n    state.lowerFloorSize.height = payload.height\n  },\n  ADD_KEY (state, payload) {\n    state.keys.push(payload)\n  },\n  SET_ACTIVE_KEY (state, payload) {\n    const key = state.keys.find(key => key.id == payload)\n\n    if (key) {\n      key.status = true\n    }\n\n    state.keysActiveCount = state.keys.filter(key => key.status).length\n  },\n  CHARGE_BATTERY_UP (state, payload) {\n    if (state.batteryCharge < 100) {\n      if (state.batteryCharge + payload <= 100) {\n        state.batteryCharge += payload\n      } else {\n        state.batteryCharge = 100\n      }\n    }\n  },\n  CHARGE_BATTERY_DOWN (state, payload) {\n    if (state.batteryCharge != 0) {\n      if (state.batteryCharge - payload >= 0) {\n        state.batteryCharge -= payload\n      } else {\n        state.batteryCharge = 0\n      }\n    }\n  },\n  SET_FINISH (state) {\n    LevelStorage.saveCompletedLevel(state.levelId)\n    state.finish = true\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { LevelState } from '@/store/level/types'\nimport { mutations } from '@/store/level/mutations'\n\nconst state: LevelState = {\n  levelId: 0,\n  play: false,\n  loading: true,\n  dateLastUsedControllers: 0,\n  isUsedControllers: false,\n  isMapOpen: false,\n  isMenuOpen: false,\n  playerPosition: {x: 0, y: 0, z: 0},\n  playerRotate: {x: 0, y: 0},\n  lowerFloorPosition: {x: 0, y: 0, z: 0},\n  lowerFloorSize: {width: 0, height: 0},\n  keys: [],\n  keysActiveCount: 0,\n  batteryCharge: 0,\n  finish: false\n}\n\nconst getters = {\n  batteryCharge: (state: LevelState) => state.batteryCharge,\n  finish: (state: LevelState) => state.finish\n}\n\nexport const level: Module<LevelState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree } from 'vuex'\nimport { Player, Players } from '@/store/players/types'\n\nconst getPlayerById = (state: Players, playerId: string) => {\n  return state.list.find(player => player.id == playerId) as Player\n}\n\nconst playerExample: Player = {\n  id: 'new',\n  character: '',\n  items: [],\n  properties: [],\n  move: {\n    forward: {\n      front: false,\n      back: false,\n      left: false,\n      right: false,\n      isMoving: false,\n      sprint: false\n    },\n    rotate: { x: 0, y: 0 },\n    jump: false,\n    isFly: false,\n    isFlyUp: false,\n    syncData: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0 }\n    }\n  }\n}\n\nexport const mutations: MutationTree<Players> = {\n  ADD_PLAYER (state, payload) {\n    if (!getPlayerById(state, payload.id)) {\n      const newPlayer = JSON.parse(JSON.stringify(playerExample))\n      newPlayer.id = payload.id\n      newPlayer.character = 'BTLMN_Lemon.gltf'\n      newPlayer.items = payload.items\n      newPlayer.properties = payload.properties\n  \n      state.list.push(newPlayer)\n    }\n  },\n  REMOVE_PLAYER (state, playerId) {\n    state.list.splice(state.list.findIndex(player => player.id == playerId), 1)\n  },\n  FLY_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = true\n  },\n  FLY_UP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = true\n  },\n  FLY_UP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = false\n  },\n  FLY_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = false\n  },\n  SET_FORWARD (state, payload) {\n    getPlayerById(state, payload.playerId).move.forward = {...payload.forward}\n  },\n  UPDATE_ROTATE (state, payload) {\n    getPlayerById(state, payload.playerId).move.rotate = payload.rotate\n  },\n  UPDATE_ROTATION (state, payload) {\n    const playerState = getPlayerById(state, payload.playerId)\n    playerState.move.syncData.rotation.x = payload.x\n    playerState.move.syncData.rotation.y = payload.y\n  },\n  UPDATE_POSITION (state, payload) {\n    getPlayerById(state, payload.playerId).move.syncData.position = payload.position\n  },\n  JUMP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = false\n  },\n  JUMP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = true\n  },\n  JUMP_SET (state, payload) {\n    getPlayerById(state, payload.playerId).move.jump = payload.jump\n  },\n  SYNC_PLAYER (state, player) {\n    const statePlayer = getPlayerById(state, player.id)\n    \n    if (statePlayer) {\n      statePlayer.move = player.move\n    }\n  }\n}\n\n","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/players/mutations'\nimport { Players } from '@/store/players/types'\n\nconst state: Players = {\n  list: []\n}\n\nconst getters = {\n  getPlayerById: (state: Players) => (id: string) => {\n    return state.list.find(player => player.id === id)\n  }\n}\n\nexport const players: Module<Players, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","import Vuex, { StoreOptions } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { controllerMove } from '@/store/controller_move'\nimport { controllerRotate } from '@/store/controller_rotate'\nimport { settings } from '@/store/settings'\nimport { level } from '@/store/level'\nimport { players } from '@/store/players'\n\nconst store: StoreOptions<RootState> = {\n  strict: false,\n  state: {\n    player: {\n      id: ''\n    },\n    levels: [\n      {id: 1, finish: false},\n      {id: 2, finish: false},\n      {id: 3, finish: false},\n    ],\n  },\n  mutations: {\n    SET_SELF_PLAYER_ID (state, playerId) {\n      state.player.id = playerId\n    },\n  },\n  modules: {\n    players,\n    controllerMove,\n    controllerRotate,\n    level,\n    settings\n  }\n}\n\nexport default new Vuex.Store<RootState>(store)","import {\n  CubeTexture,\n  GlowLayer,\n  Matrix,\n  Tools,\n  Scene,\n  Color3,\n  DirectionalLight,\n  ShadowGenerator\n} from '@babylonjs/core'\n\nexport default class Environment {\n  shadowGenerator: ShadowGenerator | null\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.shadowGenerator = null\n  }\n\n  setupHDR () {\n    const url = process.env.VUE_APP_RESOURCES_PATH  + 'graphics/textures/environment.env'\n    const hdrTexture = CubeTexture.CreateFromPrefilteredData(url, this.scene)\n    const hdrRotation = 0\n    \n    hdrTexture.setReflectionTextureMatrix(\n      Matrix.RotationY(\n        Tools.ToRadians(hdrRotation)\n      )\n    )\n\n    hdrTexture.gammaSpace = false\n    this.scene.environmentTexture = hdrTexture\n  }\n\n  setupGlow () {\n    const gl = new GlowLayer('glow', this.scene, {\n      mainTextureFixedSize: 1054,\n      blurKernelSize: 70\n    })\n    \n    gl.intensity = 0.4\n  }\n  \n  setupFog () {\n    this.scene.fogColor = new Color3(0, 0, 0)\n    this.scene.fogDensity = 0.04\n    this.scene.fogMode = Scene.FOGMODE_EXP\n  }\n  \n  setupLightAndShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (!light) {\n      console.info('Add a light with the ID MainDirectionLight to display the shadow')\n      return\n    }\n    \n    this.shadowGenerator = new ShadowGenerator(2064, light)\n  }\n}\n","import {\n  Mesh,\n  Scene,\n  Camera,\n  Engine,\n  Vector3,\n  Matrix,\n  AbstractMesh,\n  RollingAverage, MeshBuilder, StandardMaterial, Color3, Tags,\n} from '@babylonjs/core'\nimport axios from 'axios'\n\nexport const Helpers = {\n  getRandomInt (min: number, max: number) {\n    min = Math.ceil(min)\n    max = Math.floor(max)\n    return Math.floor(Math.random() * (max - min + 1)) + min\n  },\n\n  get2DCoordinatesFromMesh (mesh: Mesh, camera: Camera, scene: Scene, engine: Engine) {\n    const pos = Vector3.Project(\n      mesh.getAbsolutePosition(),\n      Matrix.IdentityReadOnly,\n      scene.getTransformMatrix(),\n      camera.viewport.toGlobal(\n        engine.getRenderWidth(),\n        engine.getRenderHeight(),\n      ),\n    )\n\n    return {\n      top: pos.y,\n      left: pos.x\n    }\n  },\n\n  getIsSuffix (mesh: AbstractMesh, suffix: string) {\n    const nameArray = mesh.id.split('_')\n\n    if (nameArray.length) {\n      if (nameArray.find(item => item === suffix)) {\n        return true\n      }\n    }\n\n    return false\n  },\n\n  IsName (text: string, find: string, partly = false) {\n    if (text === find) {\n      return true\n    }\n\n    if (partly) {\n      return text.search(find) !== -1\n    }\n\n    return false\n  },\n\n  getMeshesByName (name: string, partly = false) {\n    return globalThis.scene.meshes.filter(mesh => Helpers.IsName(mesh.name, name, partly)) as Array<Mesh>\n  },\n\n  getMeshByName (scene: Scene, name: string, partly = false) {\n    return scene.meshes.find(mesh => Helpers.IsName(mesh.name, name, partly)) as Mesh\n  },\n\n  getTime () {\n    const date = new Date()\n    return date.getTime()\n  },\n\n  getAverage () {\n    const rollingAverage = new RollingAverage(60)\n    rollingAverage.add(scene.getAnimationRatio())\n    return rollingAverage.average\n  },\n\n  numberFixed (number: string | number, length = 10): number {\n    return Number(Number(number).toFixed(length))\n  },\n\n  getNameId (meshId: string) {\n    return meshId.split('.')[1]\n  },\n  \n  drawEllipsoid (mesh: Mesh) {\n    const scene = mesh.getScene()\n    const ellipsoid = MeshBuilder.CreateSphere('debug', { diameterX: (mesh.ellipsoid.x * 2), diameterY: (mesh.ellipsoid.y * 2), diameterZ: (mesh.ellipsoid.z * 2), segments: 16 }, scene)\n    \n    scene.onBeforeRenderObservable.add(() => {\n      ellipsoid.position.copyFrom(mesh.position)\n      ellipsoid.position.addInPlace(mesh.ellipsoidOffset)\n    })\n    \n    const debugmat = new StandardMaterial('debugmat', mesh.getScene())\n    debugmat.diffuseColor = new Color3(0, 1, 0)\n    debugmat.wireframe = true\n    ellipsoid.material = debugmat\n  },\n  isFile(url: string) {\n    if (url) {\n      const split = url.split('/')\n      if (split) {\n        const pop = split.pop()\n        if (pop) {\n          return pop.indexOf('.') > 0\n        }\n      }\n    }\n    \n    return false\n  },\n  async getFileTimestamp(filePath: string)\n  {\n    const arr = filePath.split(\"/\") // [ \"\", \"game\", \"resources\", \"graphics\", \"level_1\", \"map.babylon\" ]\n    const filePathLastFolder = arr[arr.length - 2] + \"/\" + arr[arr.length - 1] // \"level_1/map.babylon\"\n    \n    try {\n      const response = await axios.get(process.env.VUE_APP_RESOURCES_PATH + 'graphics/manifest.json')\n      const manifest = response.data\n      return manifest[filePathLastFolder] ?? new Date().getTime()\n    } catch (error) {\n      console.error('Ошибка получения manifest.json:', error)\n      return filePath\n    }\n  },\n  getTagsFromMesh(mesh: any) {\n    const rawTags = Tags.GetTags(mesh)\n    if (!rawTags || !rawTags.length) {\n      return null\n    }\n  \n    return rawTags.split(' ')\n  }\n}","import {\n  Scene as BabylonScene, Engine,\n  SceneLoader,\n  SceneOptimizerOptions,\n  SceneOptimizer,\n  AbstractMesh\n} from '@babylonjs/core'\n\nimport '@babylonjs/core/Debug/debugLayer'\nimport '@babylonjs/inspector'\nimport store from \"@/store\";\nimport Environment from '@/models/scene/Environment'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Scene {\n    scene: BabylonScene\n    engine: Engine\n    store: any\n\n    constructor (engine: Engine) {\n        this.scene = new BabylonScene(engine)\n        globalThis.scene = this.scene\n        this.store = store\n        this.engine = engine\n    }\n\n    async load (callbackLoad: () => void) {\n      window.addEventListener('resize', () => {\n        this.engine.resize()\n      })\n  \n      SceneLoader.CleanBoneMatrixWeights = true\n      SceneLoader.ShowLoadingScreen = false\n  \n      const fileName = 'map.babylon'\n      const filePath = process.env.VUE_APP_RESOURCES_PATH + 'graphics/level_' + this.store.state.level.levelId + '/'\n      \n      const timestamp = await Helpers.getFileTimestamp(filePath  + fileName)\n      const filePathWithTimestamp = fileName + '?timestamp=' + timestamp\n  \n      SceneLoader.Append(filePath, filePathWithTimestamp, this.scene, (scene) => {\n        try {\n          callbackLoad()\n        } catch (e) {\n          console.error(e)\n        }\n    \n        this.optimize(scene)\n    \n        this.engine.runRenderLoop(() => {\n          this.scene.render()\n        })\n    \n      }, null, (scene, message, error) => {\n        console.log(error, message)\n      })\n    }\n\n    private optimize (scene: BabylonScene) {\n      scene.autoClearDepthAndStencil = false\n\n      const meshNotAnimate = scene.getMeshesByTags('notAnimate')\n\n      meshNotAnimate.forEach(mesh => {\n        mesh.freezeWorldMatrix()\n        mesh.doNotSyncBoundingInfo = true\n        mesh.cullingStrategy = AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY\n      })\n\n      const options = new SceneOptimizerOptions(60, 1000)\n      const optimizer = new SceneOptimizer(scene, options)\n      optimizer.start()\n    }\n    \n    setEnvironment()\n    {\n      const environment = new Environment()\n      environment.setupHDR()\n      environment.setupGlow()\n      environment.setupLightAndShadow()\n    }\n}\n","import { Store } from 'vuex'\nimport { Sound } from '@babylonjs/core'\n\nexport default class SoundMain {\n  path: string\n\n  constructor () {\n    this.path = process.env.VUE_APP_RESOURCES_PATH + 'audio'\n  }\n\n  subscribe(store: Store<any>, sound: Sound, type: string) {\n    store.subscribe(mutation => {\n      if (mutation.type == 'SET_SETTING_FIELD_VALUE') {\n        if (mutation.payload.name == type) {\n          if (store.getters.getSettingsValueByName(type)) {\n            if (sound && !sound.isPlaying) {\n              sound.play()\n            }\n          } else {\n            if (sound && sound.isPlaying) {\n              sound.stop()\n            }\n          }\n        }\n      }\n    })\n  }\n}","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\nimport { Store } from 'vuex'\n\nexport default class Music extends SoundMain {\n  filePath: string\n  sound: Sound\n  store: Store<any>\n  \n  constructor () {\n    super()\n    this.store = store\n    this.filePath = this.path + '/level_' + this.store.state.level.levelId + '/music.wav'\n\n    this.sound = new Sound('Music', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'music')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('music'),\n      volume: 0.5\n    })\n  }\n}\n\n","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\n\nexport default class Background extends SoundMain {\n  filePath: string\n  sound: Sound\n\n  constructor () {\n    super()\n    this.filePath = this.path + '/' + 'cosmos.wav'\n\n    this.sound = new Sound('Cosmos', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'sound')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('sound')\n    })\n  }\n}\n\n","import { Engine } from '@babylonjs/core'\nimport Music from '@/models/sounds/Music'\nimport Background from '@/models/sounds/Background'\nimport store from '@/store'\n\nexport default class Audio {\n  music: any\n  isLevelRun: boolean\n  pathAudio: string\n\n  constructor () {\n    this.isLevelRun = false\n    this.pathAudio = 'resources/audio'\n    const audioEngine = Engine.audioEngine\n    if (audioEngine) {\n\n      audioEngine.useCustomUnlockedButton = true\n\n      store.subscribe(mutation => {\n        if (mutation.type == 'SET_PLAY' && !this.isLevelRun) {\n          const context = audioEngine.audioContext\n\n          if (context) {\n            context.resume()\n          }\n\n          this.isLevelRun = true\n          audioEngine.unlock()\n\n          new Music()\n          new Background()\n        }\n      })\n    }\n\n  }\n}","import store from \"@/store\";\nimport { isEqual } from 'lodash'\n\nexport default class SubscribeStore {\n  playerId: string\n  store: any\n  unsubscribes: Array<any>\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.unsubscribes = []\n    \n    this.dispose()\n  }\n  \n  move (callbackEvent: any) {\n    let oldMove = {}\n    \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n      const equal = isEqual(oldMove, stateMove)\n      \n      if (!equal) {\n        oldMove = { ...stateMove }\n        callbackEvent(stateMove)\n      }\n    })\n    \n    this.unsubscribes.push({\n      name: 'move',\n      unsubscribe\n    })\n  }\n\n  forward (callbackEvent: any) {\n    let oldForward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateForward = state.move.forward\n      const equal = isEqual(oldForward, stateForward)\n\n      if (!equal) {\n        oldForward = { ...stateForward }\n        callbackEvent(stateForward)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'forward',\n      unsubscribe\n    })\n  }\n\n  jump (callbackEvent: any) {\n    let oldStateJump = false\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateJump !== stateMove.jump) {\n        oldStateJump = stateMove.jump\n  \n        callbackEvent(stateMove.jump)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'jump',\n      unsubscribe\n    })\n  }\n\n  fly (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'fly',\n      unsubscribe\n    })\n  }\n\n  flyEnd (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (!stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'flyEnd',\n      unsubscribe\n    })\n  }\n\n  rotate (callbackEvent: any) {\n    const oldStateRotate = {\n      rotateX: 0,\n      rotateY: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateRotate.rotateX !== stateMove.rotate.x || oldStateRotate.rotateY !== stateMove.rotate.y) {\n        oldStateRotate.rotateX = stateMove.rotate.x\n        oldStateRotate.rotateY = stateMove.rotate.y\n        callbackEvent(stateMove.rotate.x, stateMove.rotate.y)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotate',\n      unsubscribe\n    })\n  }\n\n  position (callbackEvent: any) {\n    let oldStatePosition = {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const statePosition = stateMove.syncData.position\n\n      if (!isEqual(statePosition, oldStatePosition)) {\n        oldStatePosition = { ...statePosition }\n        callbackEvent(statePosition)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'position',\n      unsubscribe\n    })\n  }\n\n  rotation (callbackEvent: any) {\n    let oldStateRotation = {\n      x: 0,\n      y: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const stateRotation = stateMove.syncData.rotation\n\n      if (!isEqual(stateRotation, oldStateRotation)) {\n        oldStateRotation = { ...stateRotation }\n        callbackEvent(stateRotation)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotation',\n      unsubscribe\n    })\n  }\n  \n  syncData (callbackEvent: any) {\n    let oldSyncData = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const syncData = stateMove.syncData\n    \n      if (!isEqual(syncData, oldSyncData)) {\n        oldSyncData = {...syncData}\n        callbackEvent(syncData)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncData',\n      unsubscribe\n    })\n  }\n  \n  syncPlayer (callbackEvent: any) {\n    let oldPlayer = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n    \n      if (!isEqual(state, oldPlayer)) {\n        oldPlayer = JSON.parse(JSON.stringify(state))\n        callbackEvent(state)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncPlayer',\n      unsubscribe\n    })\n  }\n\n  getPlayerById () {\n    const state = store.getters.getPlayerById(this.playerId)\n    \n    if (!state) {\n      console.info('SubscribeStore: not found state by playerId: ' + this.playerId)\n      this.unsubscribeAll()\n    }\n    \n    return state\n  }\n  \n  private dispose()\n  {\n    const unsubscribe = this.store.subscribe(() => {\n      const player = store.getters.getPlayerById(this.playerId)\n      \n      if (!player) {\n        this.unsubscribeAll()\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'dispose',\n      unsubscribe\n    })\n  }\n  \n  unsubscribeAll() {\n    this.unsubscribes.forEach((item) => {\n      item.unsubscribe()\n    })\n  }\n}\n","import * as Colyseus from 'colyseus.js'\nimport store from '@/store'\nimport SubscribeStore from '@/models/сommon/SubscribeStore'\n\nexport default class ServerClient {\n  sessionId: string | null\n  playerId?: string\n  room?: Colyseus.Room | null\n  subscribeStore?: SubscribeStore\n  \n  constructor (playerId: string) {\n    this.sessionId = null\n    this.room = null\n    this.playerId = playerId\n  }\n  \n  init () {\n    const client = new Colyseus.Client(process.env.VUE_APP_SERVER_DOMAIN)\n    \n    client.joinOrCreate('my_room').then(room => {\n      this.room = room\n      this.room.state.players.onAdd = (player: any) => {\n        store.commit('ADD_PLAYER', player)\n      }\n  \n      this.room.state.players.onRemove = (player: any) => {\n        store.commit('REMOVE_PLAYER', player.id)\n      }\n      \n      console.info('Joined to server room')\n      \n      this.room.send('createPlayer', { playerId: this.playerId })\n      \n      this.room.onMessage('syncPlayer', (message) => {\n        store.commit('SYNC_PLAYER', message.player)\n      })\n      \n      this.room.onMessage('errorIdPlayer', (message) => {\n        if (message === 500) {\n          alert('A player with this ID will not find!')\n        }\n      })\n    })\n  }\n  \n  public syncPlayer () {\n    if (this.playerId && this.room && typeof this.room !== 'undefined') {\n      this.subscribeStore = new SubscribeStore(this.playerId)\n      \n      this.subscribeStore.syncPlayer((player: any) => {\n        this.room?.send('syncPlayer', { playerId: this.playerId, player })\n      })\n    }\n  }\n}","import { Settings } from '@/models/storage/Settings'\n\nexport default class DevMode {\n  constructor () {\n    if (Settings.getValueByName('dev_mode')) {\n      this.enabled()\n    }\n  }\n  \n  enabled () {\n    const globalRoot = document.getElementsByTagName('body')[0]\n    if (globalRoot) {\n      scene.debugLayer.show({overlay: true, globalRoot: globalRoot})\n    }\n  }\n}","import { MeshBuilder, Vector3, Tags, Observer, Nullable, Scene } from '@babylonjs/core'\n\nexport default class Body {\n  playerId: string\n  meshHeadId: string\n  meshFootId: string\n  observer: Nullable<Observer<Scene>>\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.meshHeadId = 'playerHead_' + playerId\n    this.meshFootId = 'playerFoot_' + playerId\n    this.observer = null\n    this.add()\n  }\n  \n  private add () {\n    const scene = globalThis.scene\n    const size = 0.5\n    const meshHead = MeshBuilder.CreateBox(this.meshHeadId, { size: size }, scene)\n    const meshFoot = MeshBuilder.CreateBox(this.meshFootId, { size: size }, scene)\n  \n    Tags.AddTagsTo(meshFoot, 'foot')\n    \n    meshFoot.ellipsoid = new Vector3(size / 2, size, size / 2)\n    meshFoot.ellipsoidOffset = new Vector3(0, 0.3, 0)\n\n    meshHead.rotation.x = 0\n    meshHead.rotation.z = 0\n    \n    meshFoot.position.y = 10\n  \n    const meshCoordinator = scene.getMeshById('player')\n    \n    if (meshCoordinator) {\n      meshFoot.position.z = meshCoordinator.position.z\n      meshFoot.position.x = meshCoordinator.position.x\n    }\n\n    meshFoot.rotation = new Vector3()\n\n    meshHead.visibility = 0\n    meshFoot.visibility = 0\n\n    meshHead.checkCollisions = false\n    meshFoot.checkCollisions = false\n\n    meshHead.isPickable = false\n    meshFoot.isPickable = false\n\n    meshHead.isPickable = false\n\n   this.observer = scene.onBeforeRenderObservable.add(() => {\n      meshHead.position.x = meshFoot.position.x\n      meshHead.position.y = meshFoot.position.y + 2\n      meshHead.position.z = meshFoot.position.z\n      meshHead.rotation.y = meshFoot.rotation.y\n    })\n  }\n  \n  dispose () {\n    if (this.observer !== null) {\n      scene.onBeforeRenderObservable.remove(this.observer)\n    }\n  }\n}\n","import { AbstractMesh, Scene, Tags } from '@babylonjs/core'\n\nexport default class Collisions {\n  listCollisions: AbstractMesh[]\n  listCollisionsFloor: AbstractMesh[]\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.listCollisions = []\n    this.listCollisionsFloor = []\n    \n    this.setCollisions()\n  }\n  \n  private setCollisions()\n  {\n    this.listCollisions = this.scene.meshes.filter(mesh => mesh.checkCollisions)\n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n    \n    this.listCollisions.forEach((mesh) => {\n      mesh.isVisible = false\n      mesh.isPickable = false\n    })\n  \n    this.scene.getMeshesByTags('visible_force').forEach((mesh) => {\n      mesh.isVisible = true\n    })\n  }\n  \n  private static checkCollisionList(mesh: AbstractMesh, list: Array<AbstractMesh>)\n  {\n    for (const keyMesh in list) {\n      const listMesh = list[keyMesh]\n      \n      if (listMesh !== mesh && mesh.intersectsMesh(listMesh, Tags.MatchesQuery(listMesh, 'precise'))) {\n        return listMesh\n      }\n    }\n  \n    return false\n  }\n  \n  checkCollisionFloor(mesh: AbstractMesh) {\n    return Collisions.checkCollisionList(mesh, this.listCollisionsFloor)\n  }\n}\n","import {\n  Mesh,\n  Vector3,\n  RollingAverage,\n  Scene,\n  AbstractMesh,\n  Animation,\n  SineEase,\n  EasingFunction,\n  Tools, Nullable, Observer\n} from '@babylonjs/core'\nimport Collisions from '../mehanics/Collisions'\nimport store from '@/store/index'\nimport { Forward } from '@/store/players/types'\nimport { Helpers } from '@/models/Helpers'\n\nconst DEFAULT_SPEED = 0.07\nconst SPRINT_SPEED = 0.12\nconst GRAVITY = 0.08\nconst JUMP_HEIGHT = 1.5\n\nexport default class Move {\n  meshHead: Mesh\n  meshFoot: Mesh\n  speed: number\n  scene: Scene\n  footIsCollision: AbstractMesh | boolean\n  jumpAnimation: Animation | boolean\n  animationJumpFrames: number\n  modelCollisions: Collisions\n  store: any\n  forward: Forward\n  fly: boolean\n  flyUp: boolean\n  playerId: string\n  flyModeTimerId: number\n  observerBefore?: Nullable<Observer<Scene>>\n  observerAfter?: Nullable<Observer<Scene>>\n  rollingAverage: RollingAverage\n  \n  constructor (playerId: string, scene: Scene) {\n    this.scene = scene\n    this.store = store\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshHead = this.scene.getMeshById('playerHead_' + playerId) as Mesh\n    this.modelCollisions = new Collisions()\n    \n    this.fly = true\n    this.flyModeTimerId = 0\n    this.flyUp = false\n    this.playerId = playerId\n    this.animationJumpFrames = 55\n    this.footIsCollision = false\n    this.jumpAnimation = false\n    this.rollingAverage = new RollingAverage(60)\n    \n    this.forward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false,\n      sprint: false\n    }\n    \n    this.speed = DEFAULT_SPEED\n    this.createJumpAnimation()\n    \n    this.observerBefore = this.scene.onBeforeRenderObservable.add(() => {\n      this.beforeRender()\n    })\n  \n    this.observerAfter = this.scene.onAfterRenderObservable.add(() => {\n      this.afterRender()\n    })\n  }\n  \n  private createJumpAnimation () {\n    this.jumpAnimation = new Animation('jump', 'position.y', 100,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CYCLE\n    )\n    \n    const easingFunction = new SineEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEOUT)\n    this.jumpAnimation.setEasingFunction(easingFunction)\n  }\n  \n  private setAverage () {\n    this.rollingAverage.add(this.scene.getAnimationRatio())\n  }\n  \n  private move () {\n    if (!this.forward.isMoving) {\n      return null\n    }\n\n    this.changeSpeed()\n    \n    const nextStep = Vector3.Zero()\n    const average = this.rollingAverage.average\n    \n    if (this.forward.front) {\n      nextStep.z = Helpers.numberFixed(average * this.speed)\n    }\n    \n    if (this.forward.back) {\n      nextStep.z = Helpers.numberFixed(average * -this.speed)\n    }\n    \n    if (this.forward.left) {\n      nextStep.x = Helpers.numberFixed( average * -this.speed)\n    }\n    \n    if (this.forward.right) {\n      nextStep.x = Helpers.numberFixed(average * this.speed)\n    }\n    \n    this.setNewPosition(nextStep)\n  }\n  \n  private gravity () {\n    if (!this.footIsCollision) {\n      const nextStep = Vector3.Zero()\n      \n      nextStep.y = Helpers.numberFixed(this.rollingAverage.average * -GRAVITY, 4)\n      this.setNewPosition(nextStep)\n      \n      if (!this.fly && !this.flyModeTimerId) {\n        //Маленькие полеты не считаем за полет\n        this.flyModeTimerId = setTimeout(() => {\n          this.fly = true\n        }, 100)\n      }\n    } else {\n      clearTimeout(this.flyModeTimerId)\n      this.flyModeTimerId = 0\n      \n      if (this.fly) {\n        this.fly = false\n      }\n    }\n  }\n  \n  jump () {\n    if (typeof this.jumpAnimation !== 'object') {\n      console.error('Jump not set animation')\n      return\n    }\n    \n    if (this.footIsCollision) {\n      const keys = [\n        { frame: 0, value: this.meshFoot.position.y },\n        { frame: this.animationJumpFrames, value: this.meshFoot.position.y + JUMP_HEIGHT }\n      ]\n      \n      this.jumpAnimation.setKeys(keys)\n      this.meshFoot.animations = [this.jumpAnimation]\n      this.flyUp = true\n      this.scene.beginDirectAnimation(\n        this.meshFoot,\n        [this.jumpAnimation],\n        0,\n        this.animationJumpFrames,\n        false,\n        1.8,\n        () => {\n          this.flyUp = false\n        })\n    }\n  }\n  \n  private setNewPosition (nextStep: Vector3) {\n    const matrix = this.meshFoot.getWorldMatrix()\n    const vector = Vector3.TransformNormal(nextStep, matrix)\n    this.meshFoot.moveWithCollisions(vector)\n  }\n  \n  rotate (rotateX: number, rotateY: number) {\n    this.meshHead.rotation.x += rotateX\n    this.meshFoot.rotation.y += rotateY\n    \n    if (this.meshHead.rotation.x > Tools.ToRadians(90)) {\n      this.meshHead.rotation.x = Tools.ToRadians(90)\n    }\n    \n    if (this.meshHead.rotation.x < -Tools.ToRadians(45)) {\n      this.meshHead.rotation.x = -Tools.ToRadians(45)\n    }\n  }\n  \n  private changeSpeed () {\n    this.speed = this.forward.sprint ? SPRINT_SPEED : DEFAULT_SPEED\n  }\n  \n  private beforeRender () {\n    this.setAverage()\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.move()\n  }\n  \n  private afterRender () {\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.gravity()\n  }\n  \n  dispose () {\n    if (this.observerBefore) {\n      this.scene.onBeforeRenderObservable.remove(this.observerBefore)\n    }\n  \n    if (this.observerAfter) {\n      this.scene.onBeforeRenderObservable.remove(this.observerAfter)\n    }\n  }\n}\n","import MoveCommon from '../сommon/Move'\nimport { Scene } from '@babylonjs/core'\nimport { isEqual } from 'lodash'\n\nexport default class Move extends MoveCommon {\n  constructor (playerId: string, scene: Scene) {\n    super(playerId, scene)\n\n    this.updatePositionToState()\n    this.updateRotationToState()\n    this.updateFly()\n  }\n\n  private updatePositionToState () {\n    let oldPosition = {\n      x: this.meshFoot.position.x,\n      y: this.meshFoot.position.y,\n      z: this.meshFoot.position.z\n    }\n    \n    setInterval(() => {\n      const position = {\n        x: this.meshFoot.position.x,\n        y: this.meshFoot.position.y,\n        z: this.meshFoot.position.z\n      }\n      \n      if (!isEqual(oldPosition, position)) {\n        this.store.commit('UPDATE_POSITION',  { playerId: this.playerId, position })\n        oldPosition = { ...position }\n      }\n     \n    }, 100)\n  }\n\n  private updateRotationToState () {\n    let oldRotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n    \n    setInterval(() => {\n      const rotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n      \n      if (!isEqual(rotation, oldRotation)) {\n        const data = { playerId: this.playerId, x: rotation.x, y: rotation.y }\n        this.store.commit('UPDATE_ROTATION', data)\n        oldRotation = { ...rotation }\n      }\n      \n    }, 100)\n  }\n\n  private updateFly () {\n    let oldFly = false\n    let oldFlyUp = false\n\n    this.scene.onBeforeRenderObservable.add(() => {\n      if (oldFly !== this.fly) {\n        if (this.fly) {\n          this.store.commit('FLY_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_DISABLED', this.playerId)\n          this.store.commit('JUMP_DISABLED', this.playerId)\n        }\n\n        oldFly = this.fly\n      }\n\n      if (oldFlyUp !== this.flyUp) {\n        if (this.flyUp) {\n          this.store.commit('FLY_UP_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_UP_DISABLED', this.playerId)\n        }\n\n        oldFlyUp = this.flyUp\n      }\n    })\n  }\n}\n","import { Scene, KeyboardEventTypes } from '@babylonjs/core'\nimport Move from './Move'\nimport store from '@/store'\nimport { isEqual } from 'lodash'\n\nexport default class Controller {\n  sensitiveMouse: number\n  mouseIsCaptured: boolean | Element\n  store: any\n  scene: Scene\n  playerId: string\n  move: Move\n  \n  constructor () {\n    this.sensitiveMouse = 0.002\n    this.mouseIsCaptured = false\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = store.state.player.id\n    this.move = new Move(this.playerId, scene)\n    \n    this.mouseEvent()\n    \n    this.scene.onKeyboardObservable.add(event => {\n      this.keyEvent(event)\n    })\n  }\n  \n  private keyEvent (e: any) {\n    const state = store.getters.getPlayerById(this.playerId)\n    const stateMove = state.move\n    const eventCode = e.event.code\n    const eventType = e.type\n    let jump = false\n    \n    if (KeyboardEventTypes.KEYDOWN === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = true\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = true\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = true\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = true\n      }\n      \n      if (eventCode === 'Space') {\n        jump = true\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = true\n      }\n    }\n    \n    if (KeyboardEventTypes.KEYUP === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = false\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = false\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = false\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = false\n      }\n      \n      if (eventCode === 'Space') {\n        this.store.commit('JUMP_DISABLED', this.playerId)\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = false\n      }\n    }\n    \n    this.move.forward.isMoving = !(\n      !this.move.forward.left &&\n      !this.move.forward.right &&\n      !this.move.forward.back &&\n      !this.move.forward.front\n    )\n    \n    const equal = isEqual(this.move.forward, stateMove.forward)\n    \n    if (!equal) {\n      this.store.commit('SET_FORWARD', { playerId: this.playerId, forward: { ...this.move.forward } })\n    }\n    \n    if (jump && !this.move.fly) {\n      this.move.jump()\n      this.store.commit('JUMP_ENABLED', this.playerId)\n    }\n  }\n  \n  private mouseEvent () {\n    const elementContent = document.getElementById('level') as HTMLElement\n    \n    elementContent.addEventListener('click', (e) => {\n      const checkFocusAvailable = e.composedPath().find((item) => {\n        const itemChecked = item as HTMLElement\n        if(itemChecked.tagName !== undefined) {\n          return itemChecked.classList.contains('no_focus_game')\n        }\n        \n        return false\n      })\n      \n      if (!checkFocusAvailable) {\n        this.mouseIsCaptured = true\n        const canvas = document.getElementById('canvas')\n        \n        if (canvas) {\n          canvas.requestPointerLock()\n        }\n      }\n      \n    })\n    \n    const pointerlockchange = () => {\n      this.mouseIsCaptured = document.pointerLockElement || false\n    }\n    \n    document.addEventListener('pointerlockchange', pointerlockchange, false)\n    \n    window.addEventListener('pointermove', (e) => {\n      if (this.mouseIsCaptured) {\n        const rotateX = e.movementY * this.sensitiveMouse\n        const rotateY = e.movementX * this.sensitiveMouse\n        \n        this.move.rotate(rotateX, rotateY)\n        this.store.commit('UPDATE_ROTATE', { playerId: this.playerId, rotate: { x: rotateX, y: rotateY } })\n      }\n    })\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Idle implements AnimationGroupInterface {\n  playerId: string\n  animation: AnimationGroup | null\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 1\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Idle_' + playerId)\n\n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find Idle animation')\n      return\n    }\n\n    this.animation.name = 'Idle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Run implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Run_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Run animation')\n      return\n    }\n    \n    this.animation.name = 'Run_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpMiddle implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  //TODO: классы получились очень похожие, можно наследовать эти методы у общего класса\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpMiddle_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpMiddle animation')\n      return\n    }\n\n    this.animation.name = 'JumpMiddle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpFinish implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = false\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpFinish_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpFinish animation')\n      return\n    }\n    \n    this.animation.name = 'JumpFinish_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.stop()\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Sprint implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Sprint_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Sprint animation')\n      return\n    }\n    \n    this.animation.name = 'Sprint_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import SubscribeStore from '../SubscribeStore'\nimport { Scalar, Scene, AnimationEvent } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './animation_groups/AnimationGroupInterface'\nimport Idle from './animation_groups/Idle'\nimport Run from './animation_groups/Run'\nimport JumpMiddle from './animation_groups/JumpMiddle'\nimport JumpFinish from './animation_groups/JumpFinish'\nimport store from '@/store'\nimport { Move } from '@/store/players/types'\nimport Sprint from '@/models/сommon/character/animation_groups/Sprint'\n\nexport default class Animation {\n  playerId: string\n  animationGroupCurrent: AnimationGroupInterface | undefined\n  animationGroups: Array<AnimationGroupInterface>\n  store: any\n  scene: Scene\n  observableBeforeAnimation: any\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.scene = globalThis.scene\n    this.animationGroups = []\n    this.animationGroupCurrent = undefined\n\n    this.setAnimationGroups()\n\n    this.observableBeforeAnimation = () => {\n      this.onBeforeAnimation()\n    }\n  }\n\n  private setAnimationGroups () {\n    const idle = new Idle(this.playerId)\n    this.pushAnimation(idle)\n    this.pushAnimation(new Run(this.playerId))\n    this.pushAnimation(new Sprint(this.playerId))\n    this.pushAnimation(new JumpMiddle(this.playerId))\n    this.pushAnimation(new JumpFinish(this.playerId))\n    \n    if (idle.animation) {\n      this.animationGroupCurrent = this.getAnimationByName('Idle_' + this.playerId)\n      this.subscribe()\n    }\n  }\n  \n  private pushAnimation (animation: AnimationGroupInterface) {\n    if (animation.animation) {\n      this.animationGroups.push(animation)\n    }\n  }\n\n  private getAnimationByName (name: string) {\n    return this.animationGroups.find(group => group.animation && group.animation.name.includes(name)) as AnimationGroupInterface\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n    const animationJumpMiddle = this.getAnimationByName('JumpMiddle_' + this.playerId)\n    const animationJumpFinish = this.getAnimationByName('JumpFinish_' + this.playerId)\n  \n    this.subscribeStore.move((move: Move) => {\n      if (!move.isFly && !move.jump) {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      }\n    })\n  \n    this.subscribeStore.fly(() => {\n      this.blending(animationJumpMiddle)\n    })\n  \n    if (animationJumpFinish && animationJumpFinish.animation) {\n      this.subscribeStore.flyEnd(() => {\n        this.blending(animationJumpFinish)\n        if (animationJumpFinish.animation) {\n          animationJumpFinish.animation.play()\n        }\n        \n      })\n  \n      const jumpFinishAnimation = animationJumpFinish.animation.targetedAnimations[0].animation\n  \n      const JumpFinishAnimationEvent = new AnimationEvent(25, () => {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      })\n  \n      jumpFinishAnimation.addEvent(JumpFinishAnimationEvent)\n    }\n  }\n  \n  private getAnimationByState() {\n    const statePlayer = store.getters.getPlayerById(this.playerId)\n    if (!statePlayer) {\n      return null\n    }\n    \n    const move = statePlayer.move\n    const animationIdle = this.getAnimationByName('Idle_' + this.playerId)\n    const animationRun = this.getAnimationByName('Run_' + this.playerId)\n    const animationSprint = this.getAnimationByName('Sprint_' + this.playerId)\n    \n    let animation = animationIdle\n  \n    if (move.forward.isMoving) {\n      animation = animationRun\n      if (move.forward.sprint) {\n        animation = animationSprint\n      }\n    }\n    \n    return animation\n  }\n\n  private blending (animationGroup: AnimationGroupInterface) {\n    if (this.animationGroupCurrent === animationGroup) {\n      return\n    }\n\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n\n    this.animationGroupCurrent = animationGroup\n    this.scene.onBeforeAnimationsObservable.add(this.observableBeforeAnimation)\n  }\n\n  private onBeforeAnimation () {\n    if (this.animationGroupCurrent && this.animationGroupCurrent.animation) {\n      const weight = Scalar.Clamp(this.animationGroupCurrent.weight + 0.08, 0, 1)\n      this.animationGroupCurrent.weight = Number(weight.toFixed(2))\n      this.animationGroupCurrent.animation.setWeightForAllAnimatables(this.animationGroupCurrent.weight)\n    }\n\n    this.animationGroups.forEach(animationGroup => {\n      if (animationGroup.animation &&animationGroup.weight !== 0 && animationGroup !== this.animationGroupCurrent) {\n        const weight = Scalar.Clamp(animationGroup.weight - 0.08, 0, 1)\n        animationGroup.weight = Number(weight.toFixed(2))\n        animationGroup.animation.setWeightForAllAnimatables(animationGroup.weight)\n\n        if (!animationGroup.autoPlayLoop && animationGroup.weight === 0) {\n          animationGroup.animation.stop()\n        }\n      }\n    })\n\n    if (this.animationGroupCurrent && this.animationGroupCurrent.weight === 1) {\n      this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n    }\n  }\n  \n  dispose () {\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n  }\n}\n","import { AbstractMesh, Animation, CubicEase, EasingFunction, Scene, Tools } from '@babylonjs/core'\nimport SubscribeStore from '../SubscribeStore'\nimport store from '@/store'\n\nexport default class Rotation {\n  animation: Animation | undefined\n  scene: Scene\n  playerId: string\n  angle: number\n  meshCharacter: AbstractMesh\n  meshFoot: AbstractMesh\n  subscribeStore?: SubscribeStore\n  animatable: any\n  forwardAngle: number\n  isAnimated: boolean\n  syncIntervalId: any\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.angle = 0\n    // TODO: вывести в константы признак meshId\n    this.meshCharacter = this.scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as AbstractMesh\n    this.animation = undefined\n    this.animatable = undefined\n    this.isAnimated = false\n    this.forwardAngle = 0\n\n    this.setAnimation()\n    this.subscribe()\n  }\n\n  private setAnimation () {\n    this.animation = new Animation(\n      'rotateMesh',\n      'rotation.y',\n      20,\n      Animation.ANIMATIONTYPE_FLOAT\n    )\n\n    const easingFunction = new CubicEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEINOUT)\n    this.animation.setEasingFunction(easingFunction)\n  }\n\n  private setAngle () {\n    const state = store.getters.getPlayerById(this.playerId)\n    if (!state) {\n      return null\n    }\n    \n    const stateForward = state.move.forward\n\n    if (!stateForward.isMoving) {\n      return null\n    }\n\n    let angleNew = 0\n\n    if (stateForward.left) {\n      angleNew = 270\n    }\n\n    if (stateForward.right) {\n      angleNew = 90\n    }\n\n    if (stateForward.front) {\n      angleNew = 0\n\n      if (stateForward.left) {\n        angleNew = 305\n      }\n\n      if (stateForward.right) {\n        angleNew = 45\n      }\n    }\n\n    if (stateForward.back) {\n      angleNew = 180\n\n      if (stateForward.left) {\n        angleNew = 225\n      }\n\n      if (stateForward.right) {\n        angleNew = 135\n      }\n    }\n  \n    let radianNew = Tools.ToRadians(angleNew) + this.meshFoot.rotation.y\n    const radianOld = this.meshCharacter.rotation.y\n  \n    const angleOld = Tools.ToDegrees(radianOld)\n    angleNew = Tools.ToDegrees(radianNew)\n  \n    const diff = (angleNew - angleOld + 180) % 360 - 180\n    const shortWayAngle = diff < -180 ? diff + 360 : diff\n    radianNew = radianOld + Tools.ToRadians(shortWayAngle)\n    \n    const diffAngle = Math.abs(radianNew - radianOld) / (Math.PI / 180)\n  \n    if (diffAngle > 10) {\n      if (!this.isAnimated) {\n        this.stopAnimation()\n        this.play(radianNew, radianOld)\n        this.isAnimated = true\n      }\n    } else {\n      this.meshCharacter.rotation.y = radianNew\n    }\n  }\n\n  private play (radianNew: number, radianOld: number) {\n    if (this.animation === undefined) {\n      console.error('Not set animation rotate')\n      return\n    }\n\n    const keys = []\n    const frames = 10\n\n    keys.push({\n      frame: 0,\n      value: radianOld\n    })\n\n    keys.push({\n      frame: frames,\n      value: radianNew\n    })\n    \n    this.animation.setKeys(keys)\n    this.meshCharacter.animations = []\n    this.meshCharacter.animations.push(this.animation)\n  \n    this.isAnimated = true\n    this.animatable = this.scene.beginAnimation(this.meshCharacter, 0, frames, false, 1.15, () => {\n      this.isAnimated = false\n    })\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  \n    this.subscribeStore.rotate(() => {\n      const stateForward = store.getters.getPlayerById(this.playerId).move.forward\n      \n      if (stateForward.isMoving) {\n        this.setAngle()\n      }\n    })\n  \n    this.subscribeStore.forward(() => {\n      this.setAngle()\n    })\n  \n    this.syncIntervalId = setInterval(() => {\n      this.setAngle()\n    }, 100)\n  }\n  \n  private stopAnimation()\n  {\n    if (this.animatable !== undefined) {\n      this.animatable.stop()\n    }\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    \n    if (this.syncIntervalId) {\n      clearInterval(this.syncIntervalId)\n    }\n  }\n}\n","import { AbstractMesh, Mesh } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport { sortBy } from 'lodash'\n\ninterface LOD {\n  mesh: any\n  distance: number\n}\n\nexport default class LODs {\n  static getLODs(meshes: Array<AbstractMesh>)\n  {\n    const arrayLODs = [] as Array<LOD>\n    \n    meshes.forEach(mesh => {\n      const tags = Helpers.getTagsFromMesh(mesh)\n    \n      if (!tags || !tags.find((tag: string) => tag === 'lod')) {\n        return\n      }\n    \n      const tagDistance = tags.find((tag: string) => tag.indexOf('distance') !== -1)\n      const distance = tagDistance ? Number(tagDistance.split('_')[1]) : 0\n    \n      mesh.isVisible = false\n  \n      arrayLODs.push({\n        mesh: mesh,\n        distance: distance\n      })\n    })\n    \n    return sortBy(arrayLODs, 'distance').reverse()\n  }\n  \n  static addLevels(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes) as Array<LOD>\n    \n    if (arrayLODs.length) {\n      const mainLod = arrayLODs[0]\n      const mainLODMesh = mainLod.mesh as Mesh\n      mainLODMesh.isVisible = false\n      \n      mainLODMesh.useLODScreenCoverage = false\n      \n      for (let i = 1; i < arrayLODs.length; i++) {\n        const LOD = arrayLODs[i]\n        mainLODMesh.addLODLevel(LOD.distance, LOD.mesh)\n        LOD.mesh.isVisible = false\n      }\n  \n      mainLod.mesh.addLODLevel(mainLod.mesh.distance, null)\n    }\n  }\n  \n  static showOnlyMainLod(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes)\n    \n    if (arrayLODs.length) {\n      arrayLODs.forEach((LOD) => {\n        LOD.mesh.isVisible = false\n      })\n  \n      arrayLODs[0].mesh.isVisible = true\n    }\n  }\n}\n","import { AssetContainer, InstantiatedEntries, Mesh, SceneLoader, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport LODs from '@/models/mehanics/LODs'\n\nexport interface Container {\n  name: string;\n  // TODO: указать тип\n  data: AssetContainer\n}\n\nexport default class ContainerManager {\n  static async getContainer(name: string, path: string): Promise<InstantiatedEntries | null> {\n    const filePath = path + name;\n    \n    if (!Helpers.isFile(filePath)) {\n      console.info('Not found file: ' + filePath)\n      return null\n    }\n    \n    const container = globalThis.assetContainers.find((container: Container) => container.name === name)\n    \n    if (container) {\n      const instanceData = this.getInstance(container.data)\n      LODs.showOnlyMainLod(instanceData.rootNodes[0].getChildMeshes())\n      \n      return instanceData\n    }\n    \n    const timestamp = await Helpers.getFileTimestamp(filePath)\n  \n    const loadedContainer = await SceneLoader.LoadAssetContainerAsync(  path, name + '?timestamp=' + timestamp, globalThis.scene)\n    \n    if (loadedContainer) {\n      LODs.addLevels(loadedContainer.meshes)\n  \n      loadedContainer.removeAllFromScene()\n      \n      const newContainer = { name, data: loadedContainer }\n      globalThis.assetContainers.push(newContainer)\n      \n      const instancesData = this.getInstance(newContainer.data)\n      \n      \n      const meshes = instancesData.rootNodes[0].getChildMeshes()\n      LODs.showOnlyMainLod(meshes)\n      \n      return instancesData\n    }\n\n    return null\n  }\n  \n  static getInstance(assetContainer: AssetContainer)\n  {\n    const result = assetContainer.instantiateModelsToScene((name) => {\n      return name\n    }, false, { doNotInstantiate: false })\n    \n    const meshes = result.rootNodes[0].getChildMeshes()\n  \n    meshes.forEach(mesh => {\n      const assetMesh = assetContainer.meshes.find(assetMesh => assetMesh.name === mesh.name) as Mesh\n      \n      if (assetMesh) {\n        const tags = Tags.GetTags(assetMesh)\n        Tags.AddTagsTo(mesh, tags)\n      }\n    })\n    \n    return result\n  }\n}\n","import { AbstractMesh, Scene } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport store from '@/store/index'\nimport { Item, Player } from '@/store/players/types'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport default class Items {\n  characterMeshes: AbstractMesh[]\n  placeholders: AbstractMesh[]\n  playerId: string\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.scene = globalThis.scene\n    \n    const bodyMesh = scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.characterMeshes = bodyMesh.getChildMeshes()\n    this.placeholders = []\n    \n    this.setPlaceholders()\n    this.setItems()\n  }\n  \n  private setPlaceholders () {\n    this.characterMeshes.forEach(mesh => {\n      if (Helpers.IsName(mesh.id, 'placeholder', true)) {\n        mesh.isVisible = false\n        this.placeholders.push(mesh)\n      }\n    })\n  }\n  \n  private setItems () {\n    const storePlayer = store.getters.getPlayerById(this.playerId) as Player\n    \n    storePlayer.items.forEach((item: Item) => {\n      const placeholder = this.placeholders.find(placeholder => {\n        return Helpers.IsName(placeholder.id, item.type, true)\n      })\n      \n      if (!placeholder) {\n        return null\n      }\n      \n      const path = '/resources/graphics/items/'\n      const assetContainer = ContainerManager.getContainer(item.flavour + '.gltf', path)\n      \n      if (!assetContainer) {\n        console.error('Container item not load :' + item.flavour)\n        return null\n      }\n      \n      const rootId = '__root__item_' + item.flavour + '_' + this.playerId\n      \n     /* assetContainer.then((container) => {\n        if (!container) {\n          return null\n        }\n        \n        const resources = container.instantiateModelsToScene((sourceName) => {\n          if (sourceName == '__root__') {\n            return rootId\n          }\n          \n          return sourceName + '_' + this.playerId\n        })\n        \n        const rootMesh = resources.rootNodes[0]\n        rootMesh.id = rootMesh.name\n        \n        const meshes = rootMesh.getChildMeshes()\n        \n        meshes.forEach(mesh => {\n          mesh.id = mesh.name\n          mesh.isPickable = false\n          mesh.checkCollisions = false\n        })\n        \n        if (placeholder) {\n          rootMesh.parent = placeholder\n        }\n      })*/\n      \n    })\n  }\n}","import { AbstractMesh, DirectionalLight, Mesh, Nullable, Observer, Scene, ShadowGenerator, } from '@babylonjs/core'\nimport Animation from './Animation'\nimport Rotation from './Rotation'\nimport store from '@/store/index'\nimport ContainerManager from '@/models/scene/ContainerManager'\nimport { Helpers } from '@/models/Helpers'\nimport { Property } from '@/store/players/types'\nimport Items from '@/models/сommon/character/Items'\n\nexport default class Character {\n  scene: Scene\n  mesh: AbstractMesh | undefined\n  meshFoot: Mesh | undefined\n  meshBody?: AbstractMesh\n  meshRoot?: AbstractMesh\n  playerId: string\n  meshBodyId: string\n  meshRootId: string\n  observer?: Nullable<Observer<Scene>>\n  animation?: Animation\n  rotation?: Rotation\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshBodyId = 'characterBody_' + this.playerId\n    this.meshRootId = 'characterRoot_' + this.playerId\n  }\n  \n  load (callback: any) {\n    const path = process.env.VUE_APP_RESOURCES_PATH + 'graphics/characters/'\n    // TODO: взять из store название gltf\n    const assetContainer = ContainerManager.getContainer('BTLMN_Lemon.gltf', path)\n    \n    assetContainer.then((container) => {\n      if (!container) {\n        throw 'Not found container ' + path + 'BTLMN_Lemon.gltf'\n      }\n      \n      const rootMesh = container.rootNodes[0]\n      rootMesh.id = this.meshRootId\n  \n      container.rootNodes[0].getChildMeshes().forEach((mesh) => {\n          if (mesh.name == 'Body') {\n            mesh.id = this.meshBodyId\n            mesh.name = this.meshBodyId\n            return\n          }\n  \n          mesh.id = mesh.id + '_' + this.playerId\n          mesh.name = mesh.name + '_' + this.playerId\n      })\n      \n      container.animationGroups.forEach((animationGroup) => {\n        animationGroup.name = animationGroup.name + '_' + this.playerId\n      })\n      \n      this.setMeshes()\n      this.setAnimations()\n      this.setItems()\n      this.setShadow()\n  \n      callback()\n  \n      this.observer = this.scene.onBeforeRenderObservable.add(() => {\n        this.beforeRender()\n      })\n    })\n  }\n  \n  setMeshes() {\n    const meshBody = this.scene.getMeshById(this.meshBodyId)\n    const meshRoot = this.scene.getMeshById(this.meshRootId)\n  \n    if (!meshBody) {\n      throw 'Not found mesh Player Body'\n    }\n  \n    if (!this.meshFoot) {\n      throw 'Not found mesh Player Foot'\n    }\n  \n    if (!meshRoot) {\n      throw 'Not found mesh Root'\n    }\n  \n    this.meshBody = meshBody\n    this.meshBody.rotationQuaternion = null\n    this.meshBody.resetLocalMatrix()\n    this.meshBody.isVisible = false\n    \n    this.meshRoot = meshRoot\n    this.meshRoot.id = this.meshRoot.name\n    this.meshRoot.rotationQuaternion = null\n    this.meshRoot.resetLocalMatrix()\n    \n    this.meshRoot.getChildMeshes().forEach(mesh => {\n      mesh.id = mesh.name\n      mesh.isPickable = false\n      mesh.checkCollisions = false\n    })\n  \n    this.disposeNotActiveProperties()\n  }\n  \n  filterProperties (mesh: AbstractMesh) {\n      const playerStore = store.getters.getPlayerById(this.playerId)\n      const properties = playerStore.properties\n      \n      if (!Helpers.IsName(mesh.name,'placeholder', true)) {\n        return properties.find((property: Property) => {\n          return Helpers.IsName(mesh.name, property.flavour, true)\n        })\n      }\n  \n    return true\n  }\n  \n  private disposeNotActiveProperties()\n  {\n    this.meshBody?.getChildMeshes().forEach((mesh) => {\n      if (!this.filterProperties(mesh)) {\n        mesh.dispose()\n      }\n    })\n  }\n  \n  private setItems()\n  {\n    new Items(this.playerId)\n  }\n  \n  private setAnimations () {\n    this.animation = new Animation(this.playerId)\n    this.rotation = new Rotation(this.playerId)\n  }\n  \n  private setShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (light) {\n      const shadowGenerator = light.getShadowGenerator() as ShadowGenerator\n      \n      if (this.meshBody && shadowGenerator) {\n        shadowGenerator.addShadowCaster(this.meshBody)\n      }\n      \n    }\n  }\n  \n  private beforeRender () {\n    if (this.meshRoot && this.meshFoot) {\n      this.meshRoot.position.x = this.meshFoot.position.x\n      this.meshRoot.position.z = this.meshFoot.position.z\n      this.meshRoot.position.y = this.meshFoot.position.y - 0.24\n    }\n  }\n  \n  dispose () {\n    this.rotation?.dispose()\n    this.animation?.dispose()\n    \n    if (this.observer) {\n      this.scene.onBeforeRenderObservable.remove(this.observer)\n    }\n    \n    this.scene.getMeshById('characterRoot_' + this.playerId)?.dispose()\n  }\n}\n","import {\n  Vector3,\n  UniversalCamera,\n  Scene,\n  UniversalCamera as BabylonCamera,\n  Ray,\n  AbstractMesh, Axis, Scalar\n} from '@babylonjs/core'\nimport store from '@/store'\nimport { Player } from '@/store/players/types'\n\ninterface CalculateDistance {\n  distance: number;\n  amount: number;\n}\n\nconst MAX_DIST_CAMERA_Z = 4.5\nconst MAX_DIST_CAMERA_Y = 0.5\n\nexport default class Camera {\n  scene: Scene\n  babylonCamera: BabylonCamera\n  meshHead: AbstractMesh\n  actualDistance: number\n  calculateDistance: CalculateDistance\n  isMoving: boolean\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.babylonCamera = new UniversalCamera('playerCamera', Vector3.Zero(), this.scene)\n    this.meshHead = this.scene.getMeshById('playerHead_' + store.state.player.id) as AbstractMesh\n    this.actualDistance = -MAX_DIST_CAMERA_Z\n    this.isMoving = false\n    \n    this.calculateDistance = {\n      amount: 0,\n      distance: 0\n    }\n    \n    this.init()\n  }\n  \n  private init () {\n    this.babylonCamera.maxZ = 350\n    this.babylonCamera.minZ = 0.2\n    this.babylonCamera.name = 'player'\n    this.scene.activeCamera = this.babylonCamera\n    this.attachCamera()\n    this.setIsMovingInterval()\n  }\n  \n  private attachCamera () {\n    this.scene.registerBeforeRender(() => {\n      this.setDistance()\n      this.babylonCamera.position = this.meshHead.position\n      \n      this.babylonCamera.rotation.x = Number(Scalar.Lerp(this.babylonCamera.rotation.x, this.meshHead.rotation.x, 0.4).toFixed(5))\n      this.babylonCamera.rotation.y = Number(Scalar.Lerp(this.babylonCamera.rotation.y, this.meshHead.rotation.y, 0.25).toFixed(5))\n      \n      this.actualDistance = Number(Scalar.Lerp(this.actualDistance, this.calculateDistance.distance, this.calculateDistance.amount).toFixed(5))\n      \n      const dirZ = this.babylonCamera.getDirection(Axis.Z)\n      this.babylonCamera.position.addInPlace(dirZ.scaleInPlace(this.actualDistance))\n      \n      const dirY = this.babylonCamera.getDirection(Axis.Y)\n      this.babylonCamera.position.addInPlace(dirY.scaleInPlace(-MAX_DIST_CAMERA_Y))\n    })\n  }\n  \n  private setDistance () {\n    const headPosition = this.meshHead.position\n    let forward = new Vector3(0, -MAX_DIST_CAMERA_Y, -MAX_DIST_CAMERA_Z)\n    const m = this.meshHead.getWorldMatrix()\n    forward = Vector3.TransformCoordinates(forward, m)\n    const direction = Vector3.Normalize(forward.subtract(headPosition))\n    \n    const ray = new Ray(headPosition, direction, MAX_DIST_CAMERA_Z)\n    \n    const pickResult = this.scene.pickWithRay(ray, (mesh) => {\n      return mesh.checkCollisions\n    })\n    \n    let distance = -MAX_DIST_CAMERA_Z\n    let amount = 0.02\n   \n    if (this.isMoving) {\n      distance = -MAX_DIST_CAMERA_Z - 1.2\n    }\n    \n    if (pickResult && pickResult.pickedMesh) {\n      distance = -(pickResult.distance + 0.2)\n      amount = 0.5\n    }\n  \n    this.calculateDistance.distance = distance\n    this.calculateDistance.amount = amount\n  }\n  \n  private setIsMovingInterval()\n  {\n    setInterval(() => {\n      this.isMoving = Camera.getIstMoving()\n    }, 100)\n  }\n  \n  private static getIstMoving()\n  {\n    const playerState = store.getters.getPlayerById(store.state.player.id) as Player // TODO: дописать interval на смену move\n    return playerState.move.forward.isMoving\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from '../playerSelf/Controller'\nimport { Scene } from '@babylonjs/core'\nimport Character from '@/models/сommon/character/Character'\nimport Camera from '@/models/playerSelf/Camera'\n\nexport default class Player {\n  scene: Scene\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n  \n    new Body(this.playerId)\n  \n    const character = new Character(this.playerId)\n    character.load(() => {\n      new Controller()\n      new Camera()\n    })\n  }\n}\n","import MoveCommon from '../сommon/Move'\n\nexport default class Move extends MoveCommon {\n\n}\n","import Move from './Move'\nimport SubscribeStore from '../сommon/SubscribeStore'\nimport { Scalar } from '@babylonjs/core'\nimport { Forward } from '@/store/players/types'\n\nexport default class Controller {\n  move: Move\n  playerId: string\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.move = new Move(playerId, globalThis.scene)\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  }\n\n  subscribe () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotate((rotateX: number, rotateY: number) => {\n      this.move.rotate(rotateX, rotateY)\n    })\n\n    this.subscribeStore.forward((forward: Forward) => {\n      this.move.forward = {...forward}\n    })\n\n    this.subscribeStore.jump((jump: boolean) => {\n      if (jump) {\n        this.move.jump()\n      }\n    })\n\n    this.syncPosition()\n    this.syncRotation()\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    this.move.dispose()\n  }\n\n  private syncPosition () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    let observerSyncCoordinate: any = null\n    \n    this.subscribeStore.position((position: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshFoot = this.move.meshFoot\n      const endX = Number(position.x.toFixed(5))\n      const endY = Number(position.y.toFixed(5))\n      const endZ = Number(position.z.toFixed(5))\n      const startX = Number(meshFoot.position.x.toFixed(5))\n      const startY = Number(meshFoot.position.y.toFixed(5))\n      const startZ = Number(meshFoot.position.z.toFixed(5))\n\n      if (!this.move.forward.isMoving &&\n        (\n          endX !== startX ||\n          endY !== startY ||\n          endZ !== startZ\n        )\n      ) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshFoot.position.x = Scalar.Lerp(meshFoot.position.x, endX, 0.4)\n          meshFoot.position.y = Scalar.Lerp(meshFoot.position.y, endY, 0.4)\n          meshFoot.position.z = Scalar.Lerp(meshFoot.position.z, endZ, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.position.x.toFixed(5)) === endX &&\n            Number(meshFoot.position.y.toFixed(5)) === endY &&\n            Number(meshFoot.position.z.toFixed(5)) === endZ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n\n  private syncRotation () {\n    let observerSyncCoordinate: any = null\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotation((rotation: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshHead = this.move.meshHead\n      const meshFoot = this.move.meshFoot\n\n      const endX = Number(rotation.x.toFixed(5))\n      const endY = Number(rotation.y.toFixed(5))\n      const startX = Number(meshHead.rotation.x.toFixed(5))\n      const startY = Number(meshFoot.rotation.y.toFixed(5))\n\n      if (endX !== startX || endY !== startY) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshHead.rotation.x = Scalar.Lerp(meshHead.rotation.x, endX, 0.4)\n          meshFoot.rotation.y = Scalar.Lerp(meshFoot.rotation.y, endY, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.rotation.x.toFixed(5)) === endX &&\n            Number(meshFoot.rotation.y.toFixed(5)) === endY\n          ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from './Controller'\nimport Character from '@/models/сommon/character/Character'\n\nexport default class Player {\n  body: Body\n  character: Character\n  controller?: Controller\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.body = new Body(playerId)\n    this.character = new Character(playerId)\n  \n    this.character.load(() => {\n      this.controller = new Controller(playerId)\n      this.controller.subscribe()\n    })\n  }\n  \n  dispose() {\n    console.log('try desp')\n    this.controller?.dispose()\n    this.character.dispose()\n    this.body.dispose()\n  }\n}\n","import { AbstractMesh, Scene } from '@babylonjs/core'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport default class Prefabs {\n  prefabs: AbstractMesh[]\n  scene: Scene\n  \n  constructor (callback: any) {\n    this.scene = globalThis.scene\n    this.prefabs = []\n    \n    this.setPrefabs()\n    this.setItems().then(() => {\n      console.info('All prefabs loaded!')\n      callback()\n    })\n  }\n  \n  private setPrefabs () {\n    const meshes = this.scene.getMeshesByTags('prefab')\n  \n    meshes.forEach(mesh => {\n      mesh.isVisible = false\n      this.prefabs.push(mesh)\n    })\n  }\n  \n  private async setItems() {\n    for (const prefab of this.prefabs) {\n      const nameModel = `BTLMN_Prop_${prefab.id.replace('Prefab_', '')\n        .replace(/\\.[^/.]+$/, '')}.gltf`\n      \n      const path = `${process.env.VUE_APP_RESOURCES_PATH}graphics/prefabs/`\n      \n      try {\n        const container = await ContainerManager.getContainer(nameModel, path)\n        \n        if (!container) {\n          console.error(`Error loading container ${nameModel}:`)\n          continue\n        }\n        \n        const rootMesh = container.rootNodes[0]\n        \n        if (prefab) {\n          rootMesh.parent = prefab\n        }\n        \n      } catch (error) {\n        console.error(`Error loading container ${nameModel}:`, error)\n      }\n    }\n  }\n}","import { AbstractMesh, Color4, Mesh, Ray, RayHelper, Scene, Vector3 } from '@babylonjs/core'\nimport { AdvancedDynamicTexture, Rectangle, TextBlock } from '@babylonjs/gui/2D'\nimport store from '@/store/index'\n\ninterface Item {\n  id: string;\n  mesh: AbstractMesh;\n  isFocused: boolean;\n}\n\nexport default class EventPoints {\n  items: Array<Item>\n  scene: Scene\n  store: any\n  playerId: string\n  meshHead: Mesh\n  meshFoot: Mesh\n  showRay: boolean\n  rays: Array<Ray>\n  rectLabel: Rectangle\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = this.store.state.player.id\n    this.meshHead = this.scene.getMeshById('playerHead_' + this.playerId) as Mesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as Mesh\n    this.showRay = false\n    this.items = []\n    this.rays = []\n    this.rectLabel = new Rectangle()\n    \n    this.initItems()\n    this.initLabel()\n    this.initCastRays()\n  }\n  \n  private initItems () {\n    \n    this.scene.getMeshesByTags('event_point').forEach((mesh: Mesh) => {\n      if (mesh) {\n        mesh.isPickable = true\n        mesh.edgesWidth = 4.0\n        mesh.edgesColor = new Color4(255, 255, 255, 1)\n        mesh.isVisible = true\n        \n        this.items.push({\n          id: mesh.id,\n          mesh,\n          isFocused: false\n        })\n      }\n    })\n  }\n  \n  private buildRays () {\n    const cellSize = 0.15\n    const areaSize = 0.8\n    const countCells = Math.round((areaSize * areaSize) / (cellSize * cellSize))\n    let cellStartX = 0 - (cellSize + (cellSize / 2))\n    const cellFinishX = cellStartX + areaSize\n    let cellY = cellSize + (cellSize / 2)\n    \n    let i = 0\n    while (i < countCells) {\n      const rayX = cellStartX + (cellSize / 2)\n      const rayY = cellY - (areaSize / 2)\n      \n      const length = 2\n      const ray = new Ray(Vector3.Zero(), Vector3.Zero())\n      const rayHelper = new RayHelper(ray)\n      rayHelper.attachToMesh(this.meshHead, new Vector3(rayX, rayY, length), Vector3.Zero(), length)\n      \n      if (this.showRay) {\n        rayHelper.show(this.scene)\n      }\n      \n      cellStartX += cellSize\n      if (cellFinishX < cellStartX + cellSize) {\n        cellStartX = 0 - (cellSize + (cellSize / 2))\n        cellY += cellSize\n      }\n      \n      this.rays.push(ray)\n      \n      i++\n    }\n  }\n  \n  private castRay (ray: Ray) {\n    const hit = this.scene.pickWithRay(ray)\n    this.unfocusedAll()\n    this.hideLabel()\n    \n    if (hit && hit.pickedMesh) {\n      this.focused(hit.pickedMesh.id)\n      return true\n    }\n    \n    return false\n  }\n  \n  private castRays () {\n    this.rays.every(ray => {\n      return !this.castRay(ray)\n    })\n  }\n  \n  private focused (meshId: string) {\n    const item = this.items.find(item => item.id === meshId)\n    \n    if (item && !item.isFocused) {\n      this.unfocusedAll()\n      item.isFocused = true\n      item.mesh.enableEdgesRendering()\n      this.showLabel(item)\n    }\n  }\n  \n  private unfocusedAll () {\n    this.items.filter(item => item.isFocused).forEach(item => {\n      item.isFocused = false\n      item.mesh.disableEdgesRendering()\n    })\n  }\n  \n  private initLabel () {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI('UI')\n    \n    this.rectLabel.width = 0.1\n    this.rectLabel.height = '40px'\n    this.rectLabel.cornerRadius = 20\n    this.rectLabel.color = 'Orange'\n    this.rectLabel.thickness = 2\n    this.rectLabel.background = 'green'\n    advancedTexture.addControl(this.rectLabel)\n    \n    const label = new TextBlock()\n    label.text = 'Take (E)'\n    this.rectLabel.addControl(label)\n    \n    this.rectLabel.linkOffsetY = -50\n    this.rectLabel.isVisible = false\n  }\n  \n  private showLabel (item: Item) {\n    this.rectLabel.linkWithMesh(item.mesh)\n    this.rectLabel.isVisible = true\n  }\n  \n  private hideLabel () {\n    this.rectLabel.isVisible = false\n  }\n  \n  private initCastRays () {\n    this.buildRays()\n    \n    setInterval(() => {\n      this.castRays()\n    }, 80)\n  }\n}\n","import { IGLTFLoaderExtension } from '@babylonjs/loaders/glTF'\nimport { GLTFLoader } from '@babylonjs/loaders/glTF/2.0'\nimport { Tags, TransformNode } from '@babylonjs/core'\n\nclass TagsExtension implements IGLTFLoaderExtension {\n  public readonly name = 'MyTagsExtension'\n  public enabled = true\n  \n  constructor(private _loader: GLTFLoader) {}\n  \n  public loadNodeAsync(context: string, node: any, assign: (babylonTransformNode: any) => void): Promise<TransformNode> {\n    return this._loader.loadNodeAsync(context, node,  (babylonTransformNode) => {\n      if (this._loader.gltf.meshes) {\n        const mesh = this._loader.gltf.meshes[node.mesh]\n        \n        if (mesh && mesh.extras) {\n          if (mesh.extras.tags) {\n            Tags.AddTagsTo(babylonTransformNode, mesh.extras.tags)\n          }\n        }\n      }\n\n      assign(babylonTransformNode)\n    });\n  }\n  \n  public dispose(): void {\n    // Add code to dispose any resources used by the extension\n  }\n}\n\nexport default function RegisterTagsExtension () {\n  GLTFLoader.RegisterExtension('MyTagsExtension', (loader: GLTFLoader) => {\n    return new TagsExtension(loader)\n  })\n}\n","import { Engine } from '@babylonjs/core'\nimport Scene from './scene/Scene'\nimport store from '@/store/index'\nimport Audio from '@/models/sounds/Audio'\nimport ServerClient from './ServerClient'\nimport DevMode from '@/models/scene/DevMode'\nimport PlayerSelf from '@/models/playerSelf/Player'\nimport Player from '@/models/player/Player'\nimport { v4 as uuidv4 } from 'uuid'\nimport Prefabs from '@/models/scene/Prefabs'\nimport LODs from '@/models/mehanics/LODs'\nimport EventPoints from '@/models/mehanics/EventPoints'\nimport RegisterTagsExtension from '@/models/scene/TagsExtansion'\n\nexport default class Game {\n  players?: Array<Player>\n  \n  init () {\n    globalThis.assetContainers = []\n    this.players = []\n    const canvas = document.getElementById('canvas') as HTMLCanvasElement\n    canvas.width = window.innerWidth\n    canvas.height = window.innerHeight\n    \n    const engine = new Engine(canvas, true, { preserveDrawingBuffer: false, stencil: true })\n    const sceneModel = new Scene(engine)\n    const playerId = this.getPlayerId()\n    store.commit('SET_SELF_PLAYER_ID', playerId)\n    \n    sceneModel.load(async () => {\n      new Audio()\n      sceneModel.setEnvironment()\n      \n      const serverClient = new ServerClient(playerId)\n      serverClient.init()\n      \n      store.subscribe(mutation => {\n        if (mutation.type === 'ADD_PLAYER') {\n          if (mutation.payload.id === playerId) {\n            new PlayerSelf(playerId)\n            \n            this.setClassesGame()\n            store.commit('LOADING_TOGGLE')\n            \n            console.info('Game loaded')\n            console.info('Self player ' + playerId + ' created')\n  \n            serverClient.syncPlayer()\n          } else {\n            this.players?.push(new Player(mutation.payload.id))\n            console.info('Player ' + playerId + ' created!')\n          }\n        }\n      })\n    })\n  \n    store.subscribe(mutation => {\n      if (mutation.type === 'REMOVE_PLAYER') {\n        const player = this.players?.find(player => player.playerId === mutation.payload)\n\n        if (player) {\n          player.dispose()\n          console.info('Player ' + player.playerId + ' removed')\n        }\n      }\n    })\n  }\n  \n  setClassesGame () {\n   // new LightPoints()\n    RegisterTagsExtension()\n    \n    new DevMode()\n    new Prefabs(() => {\n      new EventPoints()\n    })\n  }\n  \n  getPlayerId () {\n    const queryString = window.location.search\n    const urlParams = new URLSearchParams(queryString)\n    let playerId = urlParams.get('playerId')\n    \n    if (!playerId) {\n      playerId = 'guest_' + uuidv4()\n    }\n    \n    return playerId\n  }\n}","<template>\n    <div id=\"top_bar\" class=\"no_focus_game\">\n        <div id=\"menu_button\">\n            <div class=\"menu_button\" @click=\"openMenu\"></div>\n        </div>\n\n        <div id=\"wallet_suiet\"></div>\n    </div>\n</template>\n\n<script>\n  import MountWallet from '../WalletSuiet'\n\n  export default {\n    mounted () {\n      MountWallet()\n    },\n    methods: {\n      openMenu() {\n        this.$store.commit('SET_OPEN_MENU', true)\n      }\n    }\n  }\n</script>","import React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport { ConnectButton, WalletProvider } from '@suiet/wallet-kit'\nimport '@suiet/wallet-kit/style.css'\nimport '../../styles/suiet.sass'\n\nconst App = () => {\n  return (\n    <div style={{\n      zIndex: 1000,\n      position: 'absolute',\n      top: '5%',\n      right: '2%',\n    }}>\n      <WalletProvider>\n        <ConnectButton>Connect Wallet</ConnectButton>\n      </WalletProvider>\n    </div>\n  );\n};\n\nexport default function MountDoom () {\n  const root = createRoot(document.getElementById('wallet_suiet'))\n\n  root.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  );\n}\n","import { render } from \"./TopBar.vue?vue&type=template&id=7d7c909f\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"level_preview\" }\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"text\" }, \" Are you ready? \", -1)\nconst _hoisted_4 = { class: \"container_button\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.play && _ctx.play(...args))),\n          class: \"button\"\n        }, \"play\")\n      ])\n    ])\n  ], 512)), [\n    [_vShow, !this.$store.state.level.loading && this.show]\n  ])\n}","\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'LevelPreview',\n  methods: {\n    play () {\n      this.$store.commit('SET_PLAY')\n      this.show = false\n    }\n  },\n  data () {\n    return {\n      show: true\n    }\n  }\n})\n","import { render } from \"./LevelPreview.vue?vue&type=template&id=17485c69&ts=true\"\nimport script from \"./LevelPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LevelPreview.vue?vue&type=script&lang=ts\"\n\nimport \"./LevelPreview.vue?vue&type=style&index=0&id=17485c69&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"menu\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Menu\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"li\", null, [\n  /*#__PURE__*/_createElementVNode(\"a\", { href: \"/home\" }, \"Exit\")\n], -1)\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"a\", {\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.openSettings && _ctx.openSettings(...args)))\n            }, \"Settings\")\n          ]),\n          _hoisted_6\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.closeMenu && _ctx.closeMenu(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.level.isMenuOpen]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    methods: {\n      closeMenu() {\n        this.$store.commit('SET_OPEN_MENU', false)\n      },\n      openSettings() {\n        this.$store.commit('SET_SETTINGS_OPEN', true)\n      }\n    }\n  })\n","import { render } from \"./MenuLevel.vue?vue&type=template&id=621e8932&ts=true\"\nimport script from \"./MenuLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuLevel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"settings\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Settings\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = [\"onChange\", \"checked\"]\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.fields, (field, index) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: index }, [\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  onChange: ($event: any) => (_ctx.saveField(field.name, $event)),\n                  checked: field.value\n                }, null, 40, _hoisted_6),\n                _createTextVNode(\" \" + _toDisplayString(field.name), 1)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.close && _ctx.close(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.settings.open]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    name: 'game-home',\n    computed: {\n      fields(): any {\n        return this.$store.getters.settingFields\n      }\n    },\n    methods: {\n      saveField (name: string, event: any) {\n        this.$nextTick(() => {\n          this.$store.commit('SET_SETTING_FIELD_VALUE', {name, value: event.target.checked})\n        })\n\n\n      },\n      close () {\n        this.$store.commit('SET_SETTINGS_OPEN', false)\n      }\n    },\n    data: function () {\n      return {\n        soundEnable: true\n      }\n    }\n  })\n","import { render } from \"./Settings.vue?vue&type=template&id=00492990&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\n  import { defineComponent } from 'vue'\n  import Game from '@/models/Game'\n  import TopBar from '@/views/gui/topbar/TopBar.vue'\n  import LevelPreview from '@/views/LevelPreview.vue'\n  import MenuLevel from '@/views/gui/MenuLevel.vue'\n  import Settings from '@/views/gui/Settings.vue'\n  import { mapGetters } from 'vuex'\n\n  export default defineComponent({\n    name: 'game-level',\n    mounted (): void {\n      this.$nextTick(() => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const level = urlParams.get('level')\n        this.$store.commit('SET_LEVEL', level ? level : 1)\n        const game = new Game()\n        game.init()\n      })\n    },\n    computed: {\n      ...mapGetters([\n        'finish'\n      ])\n    },\n    watch: {\n      finish(value) {\n        if (value) {\n          window.location.href = '/finish'\n        }\n      }\n    },\n    components: {\n      TopBar,\n      LevelPreview,\n      MenuLevel,\n      Settings\n    }\n  })\n","import { render } from \"./App.vue?vue&type=template&id=340def46&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=340def46&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-340def46\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\n/* Theme variables */\nimport './styles/app.sass'\n\nimport store from '@/store/index'\n\ncreateApp(App)\n  .use(store)\n  .mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbabylon_js\"] = self[\"webpackChunkbabylon_js\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1843); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","id","_hoisted_2","_createElementVNode","_hoisted_3","key","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_TopBar","_resolveComponent","_component_MenuLevel","_component_Settings","_component_LevelPreview","_openBlock","_createElementBlock","_createVNode","this","$store","state","level","loading","_createCommentVNode","mutations","SET_PRESS_MOVE_RIGHT","payload","right","SET_PRESS_MOVE_LEFT","left","SET_PRESS_MOVE_UP","up","SET_PRESS_MOVE_DOWN","down","SET_MOVE_LAST_EVENT","lastEvent","SET_IS_USED_MOVE_CONTROLLER","isUsed","getters","controllerMoveIsUsed","controllerMove","SET_PRESS_ROTATE_RIGHT","SET_PRESS_ROTATE_LEFT","SET_PRESS_ROTATE_UP","SET_PRESS_ROTATE_DOWN","SET_ROTATE_LAST_EVENT","SET_IS_USED_ROTATE_CONTROLLER","controllerRotate","Settings","fields","name","value","label","validateFieldName","field","find","setValueByName","getFields","settings","map","localStorage","setItem","JSON","stringify","getValueByName","settingsStorage","getItem","parse","String","oldField","settingField","SET_SETTINGS_OPEN","open","SET_SETTING_FIELD_VALUE","SettingsStorage","forEach","SettingsLocalStorage","settingFields","getSettingsFieldByName","getSettingsValueByName","Level","saveCompletedLevel","levelId","checkCompletedLevelId","levelsIds","getCompletedLevelsIds","push","join","setLastCompletedLevelId","completedLevels","split","getLastCompletedLevelId","Number","ids","SET_LEVEL","SET_PLAY","play","SET_OPEN_MENU","isMenuOpen","SET_DATE_LAST_USED_CONTROLLERS","dateLastUsedControllers","SET_IS_USED_CONTROLLERS","isUsedControllers","MAP_TOGGLE","isMapOpen","LOADING_TOGGLE","SET_LOWER_FLOOR_POSITION","lowerFloorPosition","x","y","z","SET_LOWER_FLOOR_SIZE","lowerFloorSize","width","height","ADD_KEY","keys","SET_ACTIVE_KEY","status","keysActiveCount","filter","length","CHARGE_BATTERY_UP","batteryCharge","CHARGE_BATTERY_DOWN","SET_FINISH","LevelStorage","finish","playerPosition","playerRotate","getPlayerById","playerId","list","player","playerExample","character","items","properties","move","forward","front","back","isMoving","sprint","rotate","jump","isFly","isFlyUp","syncData","position","rotation","ADD_PLAYER","newPlayer","REMOVE_PLAYER","splice","findIndex","FLY_ENABLED","FLY_UP_ENABLED","FLY_UP_DISABLED","FLY_DISABLED","SET_FORWARD","UPDATE_ROTATE","UPDATE_ROTATION","playerState","UPDATE_POSITION","JUMP_DISABLED","JUMP_ENABLED","JUMP_SET","SYNC_PLAYER","statePlayer","players","store","strict","levels","SET_SELF_PLAYER_ID","modules","Vuex","Environment","constructor","_defineProperty","scene","globalThis","shadowGenerator","setupHDR","url","process","hdrTexture","CubeTexture","hdrRotation","setReflectionTextureMatrix","Matrix","Tools","gammaSpace","environmentTexture","setupGlow","gl","GlowLayer","mainTextureFixedSize","blurKernelSize","intensity","setupFog","fogColor","Color3","fogDensity","fogMode","Scene","setupLightAndShadow","light","getLightById","ShadowGenerator","console","info","Helpers","getRandomInt","min","max","Math","ceil","floor","random","get2DCoordinatesFromMesh","mesh","camera","engine","pos","Vector3","getAbsolutePosition","getTransformMatrix","viewport","toGlobal","getRenderWidth","getRenderHeight","top","getIsSuffix","suffix","nameArray","item","IsName","text","partly","arguments","undefined","search","getMeshesByName","meshes","getMeshByName","getTime","date","Date","getAverage","rollingAverage","RollingAverage","add","getAnimationRatio","average","numberFixed","number","toFixed","getNameId","meshId","drawEllipsoid","getScene","ellipsoid","MeshBuilder","diameterX","diameterY","diameterZ","segments","onBeforeRenderObservable","copyFrom","addInPlace","ellipsoidOffset","debugmat","StandardMaterial","diffuseColor","wireframe","material","isFile","pop","indexOf","async","filePath","arr","filePathLastFolder","response","axios","manifest","data","error","getTagsFromMesh","rawTags","Tags","BabylonScene","callbackLoad","window","addEventListener","resize","SceneLoader","fileName","timestamp","getFileTimestamp","filePathWithTimestamp","e","optimize","runRenderLoop","message","log","autoClearDepthAndStencil","meshNotAnimate","getMeshesByTags","freezeWorldMatrix","doNotSyncBoundingInfo","cullingStrategy","AbstractMesh","options","SceneOptimizerOptions","optimizer","SceneOptimizer","start","setEnvironment","environment","SoundMain","path","subscribe","sound","type","mutation","isPlaying","stop","Music","super","Sound","loop","autoplay","volume","Background","Audio","isLevelRun","pathAudio","audioEngine","Engine","useCustomUnlockedButton","context","audioContext","resume","unlock","SubscribeStore","unsubscribes","dispose","callbackEvent","oldMove","unsubscribe","stateMove","equal","isEqual","oldForward","stateForward","oldStateJump","fly","oldState","flyEnd","oldStateRotate","rotateX","rotateY","oldStatePosition","statePosition","oldStateRotation","stateRotation","oldSyncData","syncPlayer","oldPlayer","unsubscribeAll","ServerClient","sessionId","room","init","client","Colyseus","joinOrCreate","then","onAdd","onRemove","send","onMessage","alert","subscribeStore","DevMode","enabled","globalRoot","document","getElementsByTagName","debugLayer","show","overlay","Body","meshHeadId","meshFootId","observer","size","meshHead","meshFoot","meshCoordinator","getMeshById","visibility","checkCollisions","isPickable","remove","Collisions","listCollisions","listCollisionsFloor","setCollisions","isVisible","static","keyMesh","listMesh","intersectsMesh","checkCollisionFloor","checkCollisionList","DEFAULT_SPEED","SPRINT_SPEED","GRAVITY","JUMP_HEIGHT","Move","modelCollisions","flyModeTimerId","flyUp","animationJumpFrames","footIsCollision","jumpAnimation","speed","createJumpAnimation","observerBefore","beforeRender","observerAfter","onAfterRenderObservable","afterRender","Animation","easingFunction","SineEase","setEasingMode","EasingFunction","setEasingFunction","setAverage","changeSpeed","nextStep","setNewPosition","gravity","clearTimeout","setTimeout","frame","setKeys","animations","beginDirectAnimation","matrix","getWorldMatrix","vector","moveWithCollisions","MoveCommon","updatePositionToState","updateRotationToState","updateFly","oldPosition","setInterval","commit","oldRotation","oldFly","oldFlyUp","Controller","sensitiveMouse","mouseIsCaptured","mouseEvent","onKeyboardObservable","event","keyEvent","eventCode","code","eventType","KeyboardEventTypes","elementContent","getElementById","checkFocusAvailable","composedPath","itemChecked","tagName","classList","contains","canvas","requestPointerLock","pointerlockchange","pointerLockElement","movementY","movementX","Idle","weight","autoPlayLoop","animation","getAnimationGroupByName","setAnimations","setWeightForAllAnimatables","Run","JumpMiddle","JumpFinish","Sprint","animationGroups","animationGroupCurrent","setAnimationGroups","observableBeforeAnimation","onBeforeAnimation","idle","pushAnimation","getAnimationByName","group","includes","animationJumpMiddle","animationJumpFinish","getAnimationByState","blending","jumpFinishAnimation","targetedAnimations","JumpFinishAnimationEvent","AnimationEvent","addEvent","animationIdle","animationRun","animationSprint","animationGroup","onBeforeAnimationsObservable","removeCallback","Scalar","Rotation","angle","meshCharacter","animatable","isAnimated","forwardAngle","setAnimation","CubicEase","setAngle","angleNew","radianNew","radianOld","angleOld","diff","shortWayAngle","diffAngle","abs","PI","stopAnimation","frames","beginAnimation","syncIntervalId","clearInterval","LODs","arrayLODs","tags","tag","tagDistance","distance","sortBy","reverse","getLODs","mainLod","mainLODMesh","useLODScreenCoverage","i","LOD","addLODLevel","ContainerManager","container","assetContainers","instanceData","getInstance","showOnlyMainLod","rootNodes","getChildMeshes","loadedContainer","addLevels","removeAllFromScene","newContainer","instancesData","assetContainer","result","instantiateModelsToScene","doNotInstantiate","assetMesh","Items","bodyMesh","characterMeshes","placeholders","setPlaceholders","setItems","storePlayer","placeholder","getContainer","flavour","Character","meshBodyId","meshRootId","load","callback","rootMesh","setMeshes","setShadow","meshBody","meshRoot","rotationQuaternion","resetLocalMatrix","disposeNotActiveProperties","filterProperties","playerStore","property","getShadowGenerator","addShadowCaster","MAX_DIST_CAMERA_Z","MAX_DIST_CAMERA_Y","Camera","babylonCamera","UniversalCamera","actualDistance","calculateDistance","amount","maxZ","minZ","activeCamera","attachCamera","setIsMovingInterval","registerBeforeRender","setDistance","dirZ","getDirection","Axis","scaleInPlace","dirY","headPosition","m","direction","subtract","ray","Ray","pickResult","pickWithRay","pickedMesh","getIstMoving","Player","syncPosition","syncRotation","observerSyncCoordinate","endX","endY","endZ","startX","startY","startZ","body","controller","Prefabs","prefabs","setPrefabs","prefab","nameModel","replace","parent","EventPoints","showRay","rays","rectLabel","Rectangle","initItems","initLabel","initCastRays","edgesWidth","edgesColor","Color4","isFocused","buildRays","cellSize","areaSize","countCells","round","cellStartX","cellFinishX","cellY","rayX","rayY","rayHelper","RayHelper","attachToMesh","castRay","hit","unfocusedAll","hideLabel","focused","castRays","every","enableEdgesRendering","showLabel","disableEdgesRendering","advancedTexture","AdvancedDynamicTexture","cornerRadius","color","thickness","background","addControl","TextBlock","linkOffsetY","linkWithMesh","TagsExtension","_loader","loadNodeAsync","node","assign","babylonTransformNode","gltf","extras","RegisterTagsExtension","GLTFLoader","loader","Game","innerWidth","innerHeight","preserveDrawingBuffer","stencil","sceneModel","getPlayerId","serverClient","PlayerSelf","setClassesGame","queryString","location","urlParams","URLSearchParams","get","uuidv4","class","onClick","openMenu","App","React","style","zIndex","WalletProvider","ConnectButton","MountDoom","root","createRoot","mounted","MountWallet","methods","__exports__","_withDirectives","_vShow","defineComponent","_hoisted_6","href","_hoisted_7","openSettings","closeMenu","_Fragment","_renderList","index","onChange","$event","saveField","checked","_createTextVNode","_toDisplayString","close","computed","$nextTick","target","soundEnable","game","mapGetters","watch","components","TopBar","LevelPreview","MenuLevel","createApp","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","r","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","mode","__esModule","ns","create","def","current","getOwnPropertyNames","d","definition","o","defineProperty","enumerable","g","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","nc","__webpack_exports__"],"sourceRoot":""}