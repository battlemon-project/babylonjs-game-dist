{"version":3,"file":"assets/js/app.126c89bb.js","mappings":"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","sources":["webpack://babylon_js/./src/App.vue?0fd5","webpack://babylon_js/./src/store/controller_move/mutations.ts","webpack://babylon_js/./src/store/controller_move/index.ts","webpack://babylon_js/./src/store/controller_rotate/mutations.ts","webpack://babylon_js/./src/store/controller_rotate/index.ts","webpack://babylon_js/./src/models/storage/Settings.ts","webpack://babylon_js/./src/store/settings/mutations.ts","webpack://babylon_js/./src/store/settings/index.ts","webpack://babylon_js/./src/models/storage/Level.ts","webpack://babylon_js/./src/store/level/mutations.ts","webpack://babylon_js/./src/store/level/index.ts","webpack://babylon_js/./src/store/players/mutations.ts","webpack://babylon_js/./src/store/players/index.ts","webpack://babylon_js/./src/store/index.ts","webpack://babylon_js/./src/models/scene/Environment.ts","webpack://babylon_js/./src/models/Helpers.ts","webpack://babylon_js/./src/models/scene/Scene.ts","webpack://babylon_js/./src/models/sounds/SoundMain.ts","webpack://babylon_js/./src/models/sounds/Music.ts","webpack://babylon_js/./src/models/sounds/Background.ts","webpack://babylon_js/./src/models/sounds/Audio.ts","webpack://babylon_js/./src/models/сommon/SubscribeStore.ts","webpack://babylon_js/./src/models/ServerClient.ts","webpack://babylon_js/./src/models/scene/DevMode.ts","webpack://babylon_js/./src/models/сommon/Body.ts","webpack://babylon_js/./src/models/сommon/Move.ts","webpack://babylon_js/./src/models/playerSelf/Move.ts","webpack://babylon_js/./src/models/playerSelf/Controller.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Idle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Run.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpMiddle.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/JumpFinish.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Sprint.ts","webpack://babylon_js/./src/models/сommon/character/animation_groups/Picking.ts","webpack://babylon_js/./src/models/сommon/character/Animation.ts","webpack://babylon_js/./src/models/сommon/character/Rotation.ts","webpack://babylon_js/./src/models/scene/LODs.ts","webpack://babylon_js/./src/models/scene/ContainerManager.ts","webpack://babylon_js/./src/models/сommon/character/Items.ts","webpack://babylon_js/./src/models/сommon/character/Character.ts","webpack://babylon_js/./src/models/playerSelf/Camera.ts","webpack://babylon_js/./src/models/playerSelf/Player.ts","webpack://babylon_js/./src/models/player/Move.ts","webpack://babylon_js/./src/models/player/Controller.ts","webpack://babylon_js/./src/models/player/Player.ts","webpack://babylon_js/./src/models/scene/Prefabs.ts","webpack://babylon_js/./src/models/scene/TagsExtansion.ts","webpack://babylon_js/./src/models/mehanics/Collisions.ts","webpack://babylon_js/./src/models/events/IceMeteor.ts","webpack://babylon_js/./src/models/Game.ts","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue","webpack://babylon_js/./src/views/gui/topbar/MetaMask.vue","webpack://babylon_js/./src/views/gui/topbar/MetaMask.vue?f535","webpack://babylon_js/./src/views/gui/topbar/TopBar.vue?ecd8","webpack://babylon_js/./src/views/LevelPreview.vue?7c7b","webpack://babylon_js/./src/views/LevelPreview.vue?526f","webpack://babylon_js/./src/views/LevelPreview.vue","webpack://babylon_js/./src/views/gui/MenuLevel.vue?c446","webpack://babylon_js/./src/views/gui/MenuLevel.vue?7df6","webpack://babylon_js/./src/views/gui/MenuLevel.vue","webpack://babylon_js/./src/views/gui/Settings.vue?9ce8","webpack://babylon_js/./src/views/gui/Settings.vue?74aa","webpack://babylon_js/./src/views/gui/Settings.vue","webpack://babylon_js/./src/App.vue?847a","webpack://babylon_js/./src/App.vue","webpack://babylon_js/./src/main.ts","webpack://babylon_js/webpack/bootstrap","webpack://babylon_js/webpack/runtime/chunk loaded","webpack://babylon_js/webpack/runtime/compat get default export","webpack://babylon_js/webpack/runtime/define property getters","webpack://babylon_js/webpack/runtime/global","webpack://babylon_js/webpack/runtime/hasOwnProperty shorthand","webpack://babylon_js/webpack/runtime/make namespace object","webpack://babylon_js/webpack/runtime/node module decorator","webpack://babylon_js/webpack/runtime/jsonp chunk loading","webpack://babylon_js/webpack/startup"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-340def46\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"level\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", { id: \"canvas\" }, null, -1))\nconst _hoisted_3 = {\n  key: 0,\n  id: \"loading_overlay\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { id: \"loading_overlay_text\" }, \"Loading...\", -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TopBar = _resolveComponent(\"TopBar\")!\n  const _component_MenuLevel = _resolveComponent(\"MenuLevel\")!\n  const _component_Settings = _resolveComponent(\"Settings\")!\n  const _component_LevelPreview = _resolveComponent(\"LevelPreview\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createVNode(_component_TopBar),\n      _createVNode(_component_MenuLevel),\n      _createVNode(_component_Settings),\n      (this.$store.state.level.loading)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _hoisted_5))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_LevelPreview)\n    ])\n  ]))\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_move/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_MOVE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_MOVE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_MOVE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_MOVE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_MOVE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_MOVE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_move/types'\nimport { mutations } from '@/store/controller_move/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nconst getters = {\n  controllerMoveIsUsed: (state: ControllerState) => state.isUsed,\n}\n\nexport const controllerMove: Module<ControllerState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree} from 'vuex'\nimport { ControllerState } from '@/store/controller_rotate/types'\n\nexport const mutations: MutationTree<ControllerState> = {\n  SET_PRESS_ROTATE_RIGHT (state, payload) {\n    state.right = payload\n  },\n  SET_PRESS_ROTATE_LEFT (state, payload) {\n    state.left = payload\n  },\n  SET_PRESS_ROTATE_UP (state, payload) {\n    state.up = payload\n  },\n  SET_PRESS_ROTATE_DOWN (state, payload) {\n    state.down = payload\n  },\n  SET_ROTATE_LAST_EVENT (state, payload) {\n    state.lastEvent = payload\n  },\n  SET_IS_USED_ROTATE_CONTROLLER (state, payload) {\n    state.isUsed = payload\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { ControllerState } from '@/store/controller_rotate/types'\nimport { mutations } from '@/store/controller_rotate/mutations'\n\nconst state: ControllerState = {\n  right: false,\n  left: false,\n  up: false,\n  down: false,\n  lastEvent: '',\n  isUsed: false\n}\n\nexport const controllerRotate: Module<ControllerState, RootState> = {\n  state,\n  mutations\n}","export interface Field {\n  name: string;\n  value: any;\n  label: string;\n}\n\nexport const Settings = {\n  fields: [\n    {\n      name: 'music',\n      value: true,\n      label: 'Music'\n    },\n    {\n      name: 'sound',\n      value: true,\n      label: 'Sound'\n    },\n    {\n      name: 'dev_mode',\n      value: false,\n      label: 'Dev mode'\n    }\n  ],\n  validateFieldName(name: string) {\n    const field = this.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return true\n  },\n  setValueByName (name: string, value: any) {\n    this.validateFieldName(name)\n    const fields = this.getFields()\n\n    const settings = fields.map((field: Field) => {\n      if (field.name == name) {\n        field.value = value\n      }\n\n      return field\n    })\n\n    localStorage.setItem('settings', JSON.stringify(settings))\n\n    return true\n  },\n  getValueByName (name: string) {\n    const fields = this.getFields()\n    const field = fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field'\n    }\n\n    return field.value\n  },\n  getFields () {\n    const settingsStorage = localStorage.getItem('settings')\n    if (settingsStorage) {\n      const settings = JSON.parse(String(settingsStorage))\n      return this.fields.map(field => {\n        const oldField = settings.find((settingField: any) => settingField.name == field.name)\n        if (oldField) {\n          field.value = oldField.value\n        }\n\n        return field\n      })\n    }\n\n    return this.fields\n  }\n}","import { MutationTree } from 'vuex'\nimport { Settings } from '@/store/settings/types'\nimport { Settings as SettingsStorage } from '@/models/storage/Settings'\n\nexport const mutations: MutationTree<Settings> = {\n  SET_SETTINGS_OPEN (state, payload) {\n    state.open = payload\n  },\n  SET_SETTING_FIELD_VALUE (state, payload) {\n    if (SettingsStorage.validateFieldName(payload.name)) {\n      SettingsStorage.setValueByName(payload.name, payload.value)\n      state.fields.forEach((field) => {\n        if (field.name === payload.name) {\n          field.value = payload.value\n        }\n      })\n    }\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/settings/mutations'\nimport { Settings } from '@/store/settings/types'\nimport { Field, Settings as SettingsLocalStorage } from '@/models/storage/Settings'\n\n\nconst state: Settings = {\n  fields: SettingsLocalStorage.getFields(),\n  open: false\n}\n\nconst getters = {\n  settingFields: (state: Settings) => state.fields,\n  getSettingsFieldByName: (state: Settings) => (name: string) => {\n    return state.fields.find(field => field.name == name)\n  },\n  getSettingsValueByName: (state: Settings) => (name: string) => {\n    const field = state.fields.find((field: Field) => field.name == name)\n\n    if (!field) {\n      throw 'Error setting field in Store state'\n    }\n\n    return field.value\n  }\n}\n\nexport const settings: Module<Settings, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","export const Level = {\n  saveCompletedLevel (levelId: number | string) {\n    if (!this.checkCompletedLevelId(levelId)) {\n      const levelsIds = this.getCompletedLevelsIds()\n      levelsIds.push(String(levelId))\n\n      localStorage.setItem('completedLevelsIds', levelsIds.join(','))\n    }\n\n    this.setLastCompletedLevelId(String(levelId))\n  },\n  getCompletedLevelsIds () {\n    const completedLevels = localStorage.getItem('completedLevelsIds')\n    return completedLevels ? completedLevels.split(',') : []\n  },\n  getLastCompletedLevelId () {\n    return Number(localStorage.getItem('lastCompletedLevelsId'))\n  },\n  setLastCompletedLevelId(levelId: string) {\n    return localStorage.setItem('lastCompletedLevelsId', levelId)\n  },\n  checkCompletedLevelId(levelId: number | string) {\n    const ids = this.getCompletedLevelsIds()\n    return ids.find(id => id == levelId)\n  }\n}","import { MutationTree } from 'vuex'\nimport { LevelState } from '@/store/level/types'\nimport { Level as LevelStorage } from '@/models/storage/Level'\n\nexport const mutations: MutationTree<LevelState> = {\n  SET_LEVEL (state, payload) {\n    state.levelId = payload\n  },\n  SET_PLAY (state) {\n    state.play = true\n  },\n  SET_OPEN_MENU (state, payload) {\n    state.isMenuOpen = payload\n  },\n  SET_DATE_LAST_USED_CONTROLLERS (state, payload) {\n    state.dateLastUsedControllers = payload\n  },\n  SET_IS_USED_CONTROLLERS (state, payload) {\n    state.isUsedControllers = payload\n  },\n  MAP_TOGGLE (state) {\n    state.isMapOpen = !state.isMapOpen\n  },\n  LOADING_TOGGLE (state) {\n    state.loading = !state.loading\n  },\n  SET_LOWER_FLOOR_POSITION (state, payload) {\n    state.lowerFloorPosition.x = payload.x\n    state.lowerFloorPosition.y = payload.y\n    state.lowerFloorPosition.z = payload.z\n  },\n  SET_LOWER_FLOOR_SIZE (state, payload) {\n    state.lowerFloorSize.width = payload.width\n    state.lowerFloorSize.height = payload.height\n  },\n  ADD_KEY (state, payload) {\n    state.keys.push(payload)\n  },\n  SET_ACTIVE_KEY (state, payload) {\n    const key = state.keys.find(key => key.id == payload)\n\n    if (key) {\n      key.status = true\n    }\n\n    state.keysActiveCount = state.keys.filter(key => key.status).length\n  },\n  CHARGE_BATTERY_UP (state, payload) {\n    if (state.batteryCharge < 100) {\n      if (state.batteryCharge + payload <= 100) {\n        state.batteryCharge += payload\n      } else {\n        state.batteryCharge = 100\n      }\n    }\n  },\n  CHARGE_BATTERY_DOWN (state, payload) {\n    if (state.batteryCharge != 0) {\n      if (state.batteryCharge - payload >= 0) {\n        state.batteryCharge -= payload\n      } else {\n        state.batteryCharge = 0\n      }\n    }\n  },\n  SET_FINISH (state) {\n    LevelStorage.saveCompletedLevel(state.levelId)\n    state.finish = true\n  }\n}","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { LevelState } from '@/store/level/types'\nimport { mutations } from '@/store/level/mutations'\n\nconst state: LevelState = {\n  levelId: 0,\n  play: false,\n  loading: true,\n  dateLastUsedControllers: 0,\n  isUsedControllers: false,\n  isMapOpen: false,\n  isMenuOpen: false,\n  playerPosition: {x: 0, y: 0, z: 0},\n  playerRotate: {x: 0, y: 0},\n  lowerFloorPosition: {x: 0, y: 0, z: 0},\n  lowerFloorSize: {width: 0, height: 0},\n  keys: [],\n  keysActiveCount: 0,\n  batteryCharge: 0,\n  finish: false\n}\n\nconst getters = {\n  batteryCharge: (state: LevelState) => state.batteryCharge,\n  finish: (state: LevelState) => state.finish\n}\n\nexport const level: Module<LevelState, RootState> = {\n  state,\n  mutations,\n  getters\n}","import { MutationTree } from 'vuex'\nimport { Player, Players } from '@/store/players/types'\n\nconst getPlayerById = (state: Players, playerId: string) => {\n  return state.list.find(player => player.id == playerId) as Player\n}\n\nconst playerExample: Player = {\n  id: 'new',\n  character: '',\n  items: [],\n  properties: [],\n  move: {\n    forward: {\n      front: false,\n      back: false,\n      left: false,\n      right: false,\n      isMoving: false,\n      sprint: false\n    },\n    rotate: { x: 0, y: 0 },\n    jump: false,\n    isFly: false,\n    isFlyUp: false,\n    syncData: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0 }\n    }\n  },\n  event: {\n    press: false,\n    isFocused: false\n  }\n}\n\nexport const mutations: MutationTree<Players> = {\n  ADD_PLAYER (state, payload) {\n    if (!getPlayerById(state, payload.id)) {\n      const newPlayer = JSON.parse(JSON.stringify(playerExample))\n      newPlayer.id = payload.id\n      newPlayer.character = 'BTLMN_Lemon.gltf'\n      newPlayer.items = payload.items\n      newPlayer.properties = payload.properties\n  \n      state.list.push(newPlayer)\n    }\n  },\n  REMOVE_PLAYER (state, playerId) {\n    state.list.splice(state.list.findIndex(player => player.id == playerId), 1)\n  },\n  FLY_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = true\n  },\n  FLY_UP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = true\n  },\n  FLY_UP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFlyUp = false\n  },\n  FLY_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.isFly = false\n  },\n  SET_FORWARD (state, payload) {\n    getPlayerById(state, payload.playerId).move.forward = {...payload.forward}\n  },\n  UPDATE_ROTATE (state, payload) {\n    getPlayerById(state, payload.playerId).move.rotate = payload.rotate\n  },\n  UPDATE_ROTATION (state, payload) {\n    const playerState = getPlayerById(state, payload.playerId)\n    playerState.move.syncData.rotation.x = payload.x\n    playerState.move.syncData.rotation.y = payload.y\n  },\n  UPDATE_POSITION (state, payload) {\n    getPlayerById(state, payload.playerId).move.syncData.position = payload.position\n  },\n  JUMP_DISABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = false\n  },\n  JUMP_ENABLED (state, playerId) {\n    getPlayerById(state, playerId).move.jump = true\n  },\n  JUMP_SET (state, payload) {\n    getPlayerById(state, payload.playerId).move.jump = payload.jump\n  },\n  SYNC_PLAYER (state, player) {\n    const statePlayer = getPlayerById(state, player.id)\n    \n    if (statePlayer) {\n      statePlayer.move = player.move\n    }\n  },\n  SET_EVENT_PRESS (state, payload) {\n    const statePlayer = getPlayerById(state, payload.playerId)\n    statePlayer.event.press = payload.status\n  },\n  SET_EVENT_IS_FOCUSED (state, payload) {\n    const statePlayer = getPlayerById(state, payload.playerId)\n    statePlayer.event.isFocused = payload.status\n  }\n}\n\n","import { Module } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { mutations } from '@/store/players/mutations'\nimport { Players } from '@/store/players/types'\n\nconst state: Players = {\n  list: []\n}\n\nconst getters = {\n  getPlayerById: (state: Players) => (id: string) => {\n    return state.list.find(player => player.id === id)\n  }\n}\n\nexport const players: Module<Players, RootState> = {\n  state,\n  mutations,\n  getters\n}\n","import Vuex, { StoreOptions } from 'vuex'\nimport { RootState } from '@/store/types'\nimport { controllerMove } from '@/store/controller_move'\nimport { controllerRotate } from '@/store/controller_rotate'\nimport { settings } from '@/store/settings'\nimport { level } from '@/store/level'\nimport { players } from '@/store/players'\n\nconst store: StoreOptions<RootState> = {\n  strict: false,\n  state: {\n    player: {\n      id: ''\n    },\n    levels: [\n      {id: 1, finish: false},\n      {id: 2, finish: false},\n      {id: 3, finish: false},\n    ],\n  },\n  mutations: {\n    SET_SELF_PLAYER_ID (state, playerId) {\n      state.player.id = playerId\n    },\n  },\n  modules: {\n    players,\n    controllerMove,\n    controllerRotate,\n    level,\n    settings\n  }\n}\n\nexport default new Vuex.Store<RootState>(store)","import {\n  CubeTexture,\n  GlowLayer,\n  Matrix,\n  Tools,\n  Scene,\n  Color3,\n  DirectionalLight,\n  ShadowGenerator\n} from '@babylonjs/core'\n\nexport default class Environment {\n  shadowGenerator: ShadowGenerator | null\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.shadowGenerator = null\n  }\n\n  setupHDR () {\n    const url = process.env.VUE_APP_RESOURCES_PATH  + 'graphics/textures/environment.env'\n    const hdrTexture = CubeTexture.CreateFromPrefilteredData(url, this.scene)\n    const hdrRotation = 0\n    \n    hdrTexture.setReflectionTextureMatrix(\n      Matrix.RotationY(\n        Tools.ToRadians(hdrRotation)\n      )\n    )\n\n    hdrTexture.gammaSpace = false\n    this.scene.environmentTexture = hdrTexture\n  }\n\n  setupGlow () {\n    const gl = new GlowLayer('glow', this.scene, {\n      mainTextureFixedSize: 1054,\n      blurKernelSize: 70\n    })\n    \n    gl.intensity = 0.4\n  }\n  \n  setupFog () {\n    this.scene.fogColor = new Color3(0, 0, 0)\n    this.scene.fogDensity = 0.04\n    this.scene.fogMode = Scene.FOGMODE_EXP\n  }\n  \n  setupLightAndShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (!light) {\n      console.info('Add a light with the ID MainDirectionLight to display the shadow')\n      return\n    }\n    \n    this.shadowGenerator = new ShadowGenerator(2064, light)\n  }\n}\n","import {\n  Mesh,\n  Scene,\n  Camera,\n  Engine,\n  Vector3,\n  Matrix,\n  AbstractMesh,\n  RollingAverage, MeshBuilder, StandardMaterial, Color3, Tags,\n} from '@babylonjs/core'\nimport axios from 'axios'\n\n// TODO: разбить хелперы по категориям\n\nexport const Helpers = {\n  getRandomInt (min: number, max: number) {\n    min = Math.ceil(min)\n    max = Math.floor(max)\n    return Math.floor(Math.random() * (max - min + 1)) + min\n  },\n\n  get2DCoordinatesFromMesh (mesh: Mesh, camera: Camera, scene: Scene, engine: Engine) {\n    const pos = Vector3.Project(\n      mesh.getAbsolutePosition(),\n      Matrix.IdentityReadOnly,\n      scene.getTransformMatrix(),\n      camera.viewport.toGlobal(\n        engine.getRenderWidth(),\n        engine.getRenderHeight(),\n      ),\n    )\n\n    return {\n      top: pos.y,\n      left: pos.x\n    }\n  },\n\n  getIsSuffix (mesh: AbstractMesh, suffix: string) {\n    const nameArray = mesh.id.split('_')\n\n    if (nameArray.length) {\n      if (nameArray.find(item => item === suffix)) {\n        return true\n      }\n    }\n\n    return false\n  },\n\n  IsName (text: string, find: string, partly = false) {\n    if (text === find) {\n      return true\n    }\n\n    if (partly) {\n      return text.search(find) !== -1\n    }\n\n    return false\n  },\n\n  getMeshesByName (name: string, partly = false) {\n    return globalThis.scene.meshes.filter(mesh => Helpers.IsName(mesh.name, name, partly)) as Array<Mesh>\n  },\n\n  getMeshByName (scene: Scene, name: string, partly = false) {\n    return scene.meshes.find(mesh => Helpers.IsName(mesh.name, name, partly)) as Mesh\n  },\n\n  getTime () {\n    const date = new Date()\n    return date.getTime()\n  },\n\n  getAverage () {\n    const rollingAverage = new RollingAverage(60)\n    rollingAverage.add(scene.getAnimationRatio())\n    return rollingAverage.average\n  },\n\n  numberFixed (number: string | number, length = 10): number {\n    return Number(Number(number).toFixed(length))\n  },\n\n  getNameId (meshId: string) {\n    return meshId.split('.')[1]\n  },\n  \n  drawEllipsoid (mesh: Mesh) {\n    const scene = mesh.getScene()\n    const ellipsoid = MeshBuilder.CreateSphere('debug', { diameterX: (mesh.ellipsoid.x * 2), diameterY: (mesh.ellipsoid.y * 2), diameterZ: (mesh.ellipsoid.z * 2), segments: 16 }, scene)\n    \n    scene.onBeforeRenderObservable.add(() => {\n      ellipsoid.position.copyFrom(mesh.position)\n      ellipsoid.position.addInPlace(mesh.ellipsoidOffset)\n    })\n    \n    const debugmat = new StandardMaterial('debugmat', mesh.getScene())\n    debugmat.diffuseColor = new Color3(0, 1, 0)\n    debugmat.wireframe = true\n    ellipsoid.material = debugmat\n  },\n  isFile(url: string) {\n    if (url) {\n      const split = url.split('/')\n      if (split) {\n        const pop = split.pop()\n        if (pop) {\n          return pop.indexOf('.') > 0\n        }\n      }\n    }\n    \n    return false\n  },\n  async getFileTimestamp(filePath: string)\n  {\n    const arr = filePath.split(\"/\") // [ \"\", \"game\", \"resources\", \"graphics\", \"level_1\", \"map.babylon\" ]\n    const filePathLastFolder = arr[arr.length - 2] + \"/\" + arr[arr.length - 1] // \"level_1/map.babylon\"\n    \n    try {\n      const response = await axios.get(process.env.VUE_APP_RESOURCES_PATH + 'graphics/manifest.json')\n      const manifest = response.data\n      return manifest[filePathLastFolder] ?? new Date().getTime()\n    } catch (error) {\n      console.error('Ошибка получения manifest.json:', error)\n      return filePath\n    }\n  },\n  getTagsFromMesh(mesh: any) {\n    const rawTags = Tags.GetTags(mesh)\n    if (!rawTags || !rawTags.length) {\n      return null\n    }\n  \n    return rawTags.split(' ')\n  },\n  hasTag(mesh: any, tag: string) {\n    const tags = this.getTagsFromMesh(mesh)\n    if (tags) {\n      return tags.find((tagCheck: string) => tagCheck === tag) !== undefined\n    }\n    \n    return false\n  }\n}","import {\n  Scene as BabylonScene, Engine,\n  SceneLoader,\n  SceneOptimizerOptions,\n  SceneOptimizer,\n  AbstractMesh\n} from '@babylonjs/core'\n\nimport '@babylonjs/core/Debug/debugLayer'\nimport '@babylonjs/inspector'\nimport store from \"@/store\";\nimport Environment from '@/models/scene/Environment'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Scene {\n    scene: BabylonScene\n    engine: Engine\n    store: any\n\n    constructor (engine: Engine) {\n        this.scene = new BabylonScene(engine)\n        globalThis.scene = this.scene\n        this.store = store\n        this.engine = engine\n    }\n\n    async load (callbackLoad: () => void) {\n      window.addEventListener('resize', () => {\n        this.engine.resize()\n      })\n  \n      SceneLoader.CleanBoneMatrixWeights = true\n      SceneLoader.ShowLoadingScreen = false\n  \n      const fileName = 'map.babylon'\n      const filePath = process.env.VUE_APP_RESOURCES_PATH + 'graphics/level_' + this.store.state.level.levelId + '/'\n      \n      const timestamp = await Helpers.getFileTimestamp(filePath  + fileName)\n      const filePathWithTimestamp = fileName + '?timestamp=' + timestamp\n  \n      SceneLoader.Append(filePath, filePathWithTimestamp, this.scene, (scene) => {\n        try {\n          callbackLoad()\n        } catch (e) {\n          console.error(e)\n        }\n    \n        this.optimize(scene)\n    \n        this.engine.runRenderLoop(() => {\n          this.scene.render()\n        })\n    \n      }, null, (scene, message, error) => {\n        console.log(error, message)\n      })\n    }\n\n    private optimize (scene: BabylonScene) {\n      scene.autoClearDepthAndStencil = false\n\n      const meshNotAnimate = scene.getMeshesByTags('notAnimate')\n\n      meshNotAnimate.forEach(mesh => {\n        mesh.freezeWorldMatrix()\n        mesh.doNotSyncBoundingInfo = true\n        mesh.cullingStrategy = AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY\n      })\n\n      const options = new SceneOptimizerOptions(60, 1000)\n      const optimizer = new SceneOptimizer(scene, options)\n      optimizer.start()\n    }\n    \n    setEnvironment()\n    {\n      const environment = new Environment()\n      environment.setupHDR()\n      environment.setupGlow()\n      environment.setupLightAndShadow()\n    }\n}\n","import { Store } from 'vuex'\nimport { Sound } from '@babylonjs/core'\n\nexport default class SoundMain {\n  path: string\n\n  constructor () {\n    this.path = process.env.VUE_APP_RESOURCES_PATH + 'audio'\n  }\n\n  subscribe(store: Store<any>, sound: Sound, type: string) {\n    store.subscribe(mutation => {\n      if (mutation.type == 'SET_SETTING_FIELD_VALUE') {\n        if (mutation.payload.name == type) {\n          if (store.getters.getSettingsValueByName(type)) {\n            if (sound && !sound.isPlaying) {\n              sound.play()\n            }\n          } else {\n            if (sound && sound.isPlaying) {\n              sound.stop()\n            }\n          }\n        }\n      }\n    })\n  }\n}","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\nimport { Store } from 'vuex'\n\nexport default class Music extends SoundMain {\n  filePath: string\n  sound: Sound\n  store: Store<any>\n  \n  constructor () {\n    super()\n    this.store = store\n    this.filePath = this.path + '/level_' + this.store.state.level.levelId + '/music.wav'\n\n    this.sound = new Sound('Music', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'music')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('music'),\n      volume: 0.5\n    })\n  }\n}\n\n","import { Sound } from '@babylonjs/core'\nimport store from '@/store'\nimport SoundMain from '@/models/sounds/SoundMain'\n\nexport default class Background extends SoundMain {\n  filePath: string\n  sound: Sound\n\n  constructor () {\n    super()\n    this.filePath = this.path + '/' + 'cosmos.wav'\n\n    this.sound = new Sound('Cosmos', this.filePath, globalThis.scene, () => {\n      this.subscribe(store, this.sound, 'sound')\n    }, {\n      loop: true,\n      autoplay: store.getters.getSettingsValueByName('sound')\n    })\n  }\n}\n\n","import { Engine } from '@babylonjs/core'\nimport Music from '@/models/sounds/Music'\nimport Background from '@/models/sounds/Background'\nimport store from '@/store'\n\nexport default class Audio {\n  music: any\n  isLevelRun: boolean\n  pathAudio: string\n\n  constructor () {\n    this.isLevelRun = false\n    this.pathAudio = 'resources/audio'\n    const audioEngine = Engine.audioEngine\n    if (audioEngine) {\n\n      audioEngine.useCustomUnlockedButton = true\n\n      store.subscribe(mutation => {\n        if (mutation.type == 'SET_PLAY' && !this.isLevelRun) {\n          const context = audioEngine.audioContext\n\n          if (context) {\n            context.resume()\n          }\n\n          this.isLevelRun = true\n          audioEngine.unlock()\n\n          new Music()\n          new Background()\n        }\n      })\n    }\n\n  }\n}","import store from \"@/store\";\nimport { isEqual } from 'lodash'\n\nexport default class SubscribeStore {\n  playerId: string\n  store: any\n  unsubscribes: Array<any>\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.unsubscribes = []\n    \n    this.dispose()\n  }\n  \n  move (callbackEvent: any) {\n    let oldMove = {}\n    \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n      const equal = isEqual(oldMove, stateMove)\n      \n      if (!equal) {\n        oldMove = { ...stateMove }\n        callbackEvent(stateMove)\n      }\n    })\n    \n    this.unsubscribes.push({\n      name: 'move',\n      unsubscribe\n    })\n  }\n\n  forward (callbackEvent: any) {\n    let oldForward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateForward = state.move.forward\n      const equal = isEqual(oldForward, stateForward)\n\n      if (!equal) {\n        oldForward = { ...stateForward }\n        callbackEvent(stateForward)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'forward',\n      unsubscribe\n    })\n  }\n\n  jump (callbackEvent: any) {\n    let oldStateJump = false\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateJump !== stateMove.jump) {\n        oldStateJump = stateMove.jump\n  \n        callbackEvent(stateMove.jump)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'jump',\n      unsubscribe\n    })\n  }\n  \n  pressEvent (callbackEvent: any) {\n    let oldStatePressEvent = false\n    \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const statePress = state.event.press\n      \n      if (oldStatePressEvent !== statePress) {\n        oldStatePressEvent = statePress\n        \n        callbackEvent(statePress)\n      }\n    })\n    \n    this.unsubscribes.push({\n      name: 'pressEvent',\n      unsubscribe\n    })\n  }\n\n  fly (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'fly',\n      unsubscribe\n    })\n  }\n\n  flyEnd (callbackEvent: any) {\n    let oldState = true\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldState !== stateMove.isFly) {\n        oldState = stateMove.isFly\n        \n        if (!stateMove.isFly) {\n          callbackEvent(state)\n        }\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'flyEnd',\n      unsubscribe\n    })\n  }\n\n  rotate (callbackEvent: any) {\n    const oldStateRotate = {\n      rotateX: 0,\n      rotateY: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n      \n      const stateMove = state.move\n\n      if (oldStateRotate.rotateX !== stateMove.rotate.x || oldStateRotate.rotateY !== stateMove.rotate.y) {\n        oldStateRotate.rotateX = stateMove.rotate.x\n        oldStateRotate.rotateY = stateMove.rotate.y\n        callbackEvent(stateMove.rotate.x, stateMove.rotate.y)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotate',\n      unsubscribe\n    })\n  }\n\n  position (callbackEvent: any) {\n    let oldStatePosition = {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const statePosition = stateMove.syncData.position\n\n      if (!isEqual(statePosition, oldStatePosition)) {\n        oldStatePosition = { ...statePosition }\n        callbackEvent(statePosition)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'position',\n      unsubscribe\n    })\n  }\n\n  rotation (callbackEvent: any) {\n    let oldStateRotation = {\n      x: 0,\n      y: 0\n    }\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const stateRotation = stateMove.syncData.rotation\n\n      if (!isEqual(stateRotation, oldStateRotation)) {\n        oldStateRotation = { ...stateRotation }\n        callbackEvent(stateRotation)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'rotation',\n      unsubscribe\n    })\n  }\n  \n  syncData (callbackEvent: any) {\n    let oldSyncData = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n  \n      const stateMove = state.move\n      const syncData = stateMove.syncData\n    \n      if (!isEqual(syncData, oldSyncData)) {\n        oldSyncData = {...syncData}\n        callbackEvent(syncData)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncData',\n      unsubscribe\n    })\n  }\n  \n  syncPlayer (callbackEvent: any) {\n    let oldPlayer = {}\n  \n    const unsubscribe = this.store.subscribe(() => {\n      const state = this.getPlayerById()\n      if (!state) {\n        return null\n      }\n    \n      if (!isEqual(state, oldPlayer)) {\n        oldPlayer = JSON.parse(JSON.stringify(state))\n        callbackEvent(state)\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'syncPlayer',\n      unsubscribe\n    })\n  }\n\n  getPlayerById () {\n    const state = store.getters.getPlayerById(this.playerId)\n    \n    if (!state) {\n      console.info('SubscribeStore: not found state by playerId: ' + this.playerId)\n      this.unsubscribeAll()\n    }\n    \n    return state\n  }\n  \n  private dispose()\n  {\n    const unsubscribe = this.store.subscribe(() => {\n      const player = store.getters.getPlayerById(this.playerId)\n      \n      if (!player) {\n        this.unsubscribeAll()\n      }\n    })\n  \n    this.unsubscribes.push({\n      name: 'dispose',\n      unsubscribe\n    })\n  }\n  \n  unsubscribeAll() {\n    this.unsubscribes.forEach((item) => {\n      item.unsubscribe()\n    })\n  }\n}\n","import * as Colyseus from 'colyseus.js'\nimport store from '@/store'\nimport SubscribeStore from '@/models/сommon/SubscribeStore'\n\nexport default class ServerClient {\n  sessionId: string | null\n  playerId?: string\n  room?: Colyseus.Room | null\n  subscribeStore?: SubscribeStore\n  \n  constructor (playerId: string) {\n    this.sessionId = null\n    this.room = null\n    this.playerId = playerId\n  }\n  \n  init () {\n    const client = new Colyseus.Client(process.env.VUE_APP_SERVER_DOMAIN)\n    \n    client.joinOrCreate('my_room').then(room => {\n      this.room = room\n      this.room.state.players.onAdd = (player: any) => {\n        store.commit('ADD_PLAYER', player)\n      }\n  \n      this.room.state.players.onRemove = (player: any) => {\n        store.commit('REMOVE_PLAYER', player.id)\n      }\n      \n      console.info('Joined to server room')\n      \n      this.room.send('createPlayer', { playerId: this.playerId })\n      \n      this.room.onMessage('syncPlayer', (message) => {\n        store.commit('SYNC_PLAYER', message.player)\n      })\n      \n      this.room.onMessage('errorIdPlayer', (message) => {\n        if (message === 500) {\n          alert('A player with this ID will not find!')\n        }\n      })\n    })\n  }\n  \n  public syncPlayer () {\n    if (this.playerId && this.room && typeof this.room !== 'undefined') {\n      this.subscribeStore = new SubscribeStore(this.playerId)\n      \n      this.subscribeStore.syncPlayer((player: any) => {\n        this.room?.send('syncPlayer', { playerId: this.playerId, player })\n      })\n    }\n  }\n}","import { Settings } from '@/models/storage/Settings'\n\nexport default class DevMode {\n  constructor () {\n    if (Settings.getValueByName('dev_mode')) {\n      this.enabled()\n    }\n  }\n  \n  enabled () {\n    const globalRoot = document.getElementsByTagName('body')[0]\n    if (globalRoot) {\n      scene.debugLayer.show({overlay: true, globalRoot: globalRoot})\n    }\n  }\n}","import { MeshBuilder, Vector3, Tags, Observer, Nullable, Scene } from '@babylonjs/core'\n\nexport default class Body {\n  playerId: string\n  meshHeadId: string\n  meshFootId: string\n  observer: Nullable<Observer<Scene>>\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.meshHeadId = 'playerHead_' + playerId\n    this.meshFootId = 'playerFoot_' + playerId\n    this.observer = null\n    this.add()\n  }\n  \n  private add () {\n    const scene = globalThis.scene\n    const size = 0.5\n    const meshHead = MeshBuilder.CreateBox(this.meshHeadId, { size: size }, scene)\n    const meshFoot = MeshBuilder.CreateBox(this.meshFootId, { size: size }, scene)\n  \n    Tags.AddTagsTo(meshFoot, 'foot')\n    \n    meshFoot.ellipsoid = new Vector3(size / 2, size, size / 2)\n    meshFoot.ellipsoidOffset = new Vector3(0, 0.3, 0)\n\n    meshHead.rotation.x = 0\n    meshHead.rotation.z = 0\n    \n    meshFoot.position.y = 10\n  \n    const meshCoordinator = scene.getMeshById('player')\n    \n    if (meshCoordinator) {\n      meshFoot.position.z = meshCoordinator.position.z\n      meshFoot.position.x = meshCoordinator.position.x\n    }\n\n    meshFoot.rotation = new Vector3()\n\n    meshHead.visibility = 0\n    meshFoot.visibility = 0\n\n    meshHead.checkCollisions = false\n    meshFoot.checkCollisions = false\n\n    meshHead.isPickable = false\n    meshFoot.isPickable = false\n\n    meshHead.isPickable = false\n\n   this.observer = scene.onBeforeRenderObservable.add(() => {\n      meshHead.position.x = meshFoot.position.x\n      meshHead.position.y = meshFoot.position.y + 2\n      meshHead.position.z = meshFoot.position.z\n      meshHead.rotation.y = meshFoot.rotation.y\n    })\n  }\n  \n  dispose () {\n    if (this.observer !== null) {\n      scene.onBeforeRenderObservable.remove(this.observer)\n    }\n  }\n}\n","import {\n  Mesh,\n  Vector3,\n  RollingAverage,\n  Scene,\n  AbstractMesh,\n  Animation,\n  SineEase,\n  EasingFunction,\n  Tools, Nullable, Observer\n} from '@babylonjs/core'\nimport Collisions from '../mehanics/Collisions'\nimport store from '@/store/index'\nimport { Forward } from '@/store/players/types'\nimport { Helpers } from '@/models/Helpers'\n\nconst DEFAULT_SPEED = 0.07\nconst SPRINT_SPEED = 0.12\nconst GRAVITY = 0.08\nconst JUMP_HEIGHT = 1.5\n\nexport default class Move {\n  meshHead: Mesh\n  meshFoot: Mesh\n  speed: number\n  scene: Scene\n  footIsCollision: AbstractMesh | boolean\n  jumpAnimation: Animation | boolean\n  animationJumpFrames: number\n  modelCollisions: Collisions\n  store: any\n  forward: Forward\n  fly: boolean\n  flyUp: boolean\n  playerId: string\n  flyModeTimerId: number\n  observerBefore?: Nullable<Observer<Scene>>\n  observerAfter?: Nullable<Observer<Scene>>\n  rollingAverage: RollingAverage\n  \n  constructor (playerId: string, scene: Scene) {\n    this.scene = scene\n    this.store = store\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshHead = this.scene.getMeshById('playerHead_' + playerId) as Mesh\n    this.modelCollisions = globalThis.collisions\n    \n    this.fly = true\n    this.flyModeTimerId = 0\n    this.flyUp = false\n    this.playerId = playerId\n    this.animationJumpFrames = 55\n    this.footIsCollision = false\n    this.jumpAnimation = false\n    this.rollingAverage = new RollingAverage(60)\n    \n    this.forward = {\n      left: false,\n      right: false,\n      front: false,\n      back: false,\n      isMoving: false,\n      sprint: false\n    }\n    \n    this.speed = DEFAULT_SPEED\n    this.createJumpAnimation()\n    \n    this.observerBefore = this.scene.onBeforeRenderObservable.add(() => {\n      this.beforeRender()\n    })\n  \n    this.observerAfter = this.scene.onAfterRenderObservable.add(() => {\n      this.afterRender()\n    })\n  }\n  \n  private createJumpAnimation () {\n    this.jumpAnimation = new Animation('jump', 'position.y', 100,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CYCLE\n    )\n    \n    const easingFunction = new SineEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEOUT)\n    this.jumpAnimation.setEasingFunction(easingFunction)\n  }\n  \n  private setAverage () {\n    this.rollingAverage.add(this.scene.getAnimationRatio())\n  }\n  \n  private move () {\n    if (!this.forward.isMoving) {\n      return null\n    }\n\n    this.changeSpeed()\n    \n    const nextStep = Vector3.Zero()\n    const average = this.rollingAverage.average\n    \n    if (this.forward.front) {\n      nextStep.z = Helpers.numberFixed(average * this.speed)\n    }\n    \n    if (this.forward.back) {\n      nextStep.z = Helpers.numberFixed(average * -this.speed)\n    }\n    \n    if (this.forward.left) {\n      nextStep.x = Helpers.numberFixed( average * -this.speed)\n    }\n    \n    if (this.forward.right) {\n      nextStep.x = Helpers.numberFixed(average * this.speed)\n    }\n    \n    this.setNewPosition(nextStep)\n  }\n  \n  private gravity () {\n    if (!this.footIsCollision) {\n      const nextStep = Vector3.Zero()\n      \n      nextStep.y = Helpers.numberFixed(this.rollingAverage.average * -GRAVITY, 4)\n      this.setNewPosition(nextStep)\n      \n      if (!this.fly && !this.flyModeTimerId) {\n        //Маленькие полеты не считаем за полет\n        this.flyModeTimerId = setTimeout(() => {\n          this.fly = true\n        }, 100)\n      }\n    } else {\n      clearTimeout(this.flyModeTimerId)\n      this.flyModeTimerId = 0\n      \n      if (this.fly) {\n        this.fly = false\n      }\n    }\n  }\n  \n  jump () {\n    if (typeof this.jumpAnimation !== 'object') {\n      console.error('Jump not set animation')\n      return\n    }\n    \n    if (this.footIsCollision) {\n      const keys = [\n        { frame: 0, value: this.meshFoot.position.y },\n        { frame: this.animationJumpFrames, value: this.meshFoot.position.y + JUMP_HEIGHT }\n      ]\n      \n      this.jumpAnimation.setKeys(keys)\n      this.meshFoot.animations = [this.jumpAnimation]\n      this.flyUp = true\n      this.scene.beginDirectAnimation(\n        this.meshFoot,\n        [this.jumpAnimation],\n        0,\n        this.animationJumpFrames,\n        false,\n        1.8,\n        () => {\n          this.flyUp = false\n        })\n    }\n  }\n  \n  private setNewPosition (nextStep: Vector3) {\n    const matrix = this.meshFoot.getWorldMatrix()\n    const vector = Vector3.TransformNormal(nextStep, matrix)\n    this.meshFoot.moveWithCollisions(vector)\n  }\n  \n  rotate (rotateX: number, rotateY: number) {\n    this.meshHead.rotation.x += rotateX\n    this.meshFoot.rotation.y += rotateY\n    \n    if (this.meshHead.rotation.x > Tools.ToRadians(90)) {\n      this.meshHead.rotation.x = Tools.ToRadians(90)\n    }\n    \n    if (this.meshHead.rotation.x < -Tools.ToRadians(45)) {\n      this.meshHead.rotation.x = -Tools.ToRadians(45)\n    }\n  }\n  \n  private changeSpeed () {\n    this.speed = this.forward.sprint ? SPRINT_SPEED : DEFAULT_SPEED\n  }\n  \n  private beforeRender () {\n    this.setAverage()\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.move()\n  }\n  \n  private afterRender () {\n    this.footIsCollision = this.modelCollisions.checkCollisionFloor(this.meshFoot)\n    this.gravity()\n  }\n  \n  dispose () {\n    if (this.observerBefore) {\n      this.scene.onBeforeRenderObservable.remove(this.observerBefore)\n    }\n  \n    if (this.observerAfter) {\n      this.scene.onBeforeRenderObservable.remove(this.observerAfter)\n    }\n  }\n}\n","import MoveCommon from '../сommon/Move'\nimport { Scene } from '@babylonjs/core'\nimport { isEqual } from 'lodash'\n\nexport default class Move extends MoveCommon {\n  constructor (playerId: string, scene: Scene) {\n    super(playerId, scene)\n\n    this.updatePositionToState()\n    this.updateRotationToState()\n    this.updateFly()\n  }\n\n  private updatePositionToState () {\n    let oldPosition = {\n      x: this.meshFoot.position.x,\n      y: this.meshFoot.position.y,\n      z: this.meshFoot.position.z\n    }\n    \n    setInterval(() => {\n      const position = {\n        x: this.meshFoot.position.x,\n        y: this.meshFoot.position.y,\n        z: this.meshFoot.position.z\n      }\n      \n      if (!isEqual(oldPosition, position)) {\n        this.store.commit('UPDATE_POSITION',  { playerId: this.playerId, position })\n        oldPosition = { ...position }\n      }\n     \n    }, 100)\n  }\n\n  private updateRotationToState () {\n    let oldRotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n    \n    setInterval(() => {\n      const rotation = {x: this.meshFoot.rotation.x, y: this.meshFoot.rotation.y}\n      \n      if (!isEqual(rotation, oldRotation)) {\n        const data = { playerId: this.playerId, x: rotation.x, y: rotation.y }\n        this.store.commit('UPDATE_ROTATION', data)\n        oldRotation = { ...rotation }\n      }\n      \n    }, 100)\n  }\n\n  private updateFly () {\n    let oldFly = false\n    let oldFlyUp = false\n\n    this.scene.onBeforeRenderObservable.add(() => {\n      if (oldFly !== this.fly) {\n        if (this.fly) {\n          this.store.commit('FLY_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_DISABLED', this.playerId)\n          this.store.commit('JUMP_DISABLED', this.playerId)\n        }\n\n        oldFly = this.fly\n      }\n\n      if (oldFlyUp !== this.flyUp) {\n        if (this.flyUp) {\n          this.store.commit('FLY_UP_ENABLED', this.playerId)\n        } else {\n          this.store.commit('FLY_UP_DISABLED', this.playerId)\n        }\n\n        oldFlyUp = this.flyUp\n      }\n    })\n  }\n}\n","import { Scene, KeyboardEventTypes } from '@babylonjs/core'\nimport Move from './Move'\nimport store from '@/store'\nimport { isEqual } from 'lodash'\n\nexport default class Controller {\n  sensitiveMouse: number\n  mouseIsCaptured: boolean | Element\n  store: any\n  scene: Scene\n  playerId: string\n  move: Move\n  \n  constructor () {\n    this.sensitiveMouse = 0.002\n    this.mouseIsCaptured = false\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = store.state.player.id\n    this.move = new Move(this.playerId, scene)\n    \n    this.mouseEvent()\n    \n    this.scene.onKeyboardObservable.add(event => {\n      this.keyEvent(event)\n    })\n  }\n  \n  private keyEvent (e: any) {\n    const state = store.getters.getPlayerById(this.playerId)\n    const stateMove = state.move\n    const eventCode = e.event.code\n    const eventType = e.type\n    let jump = false\n    \n    if (KeyboardEventTypes.KEYDOWN === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = true\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = true\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = true\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = true\n      }\n      \n      if (eventCode === 'Space') {\n        jump = true\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = true\n      }\n  \n      if (eventCode === 'KeyE') {\n        this.store.commit('SET_EVENT_PRESS', { playerId: this.playerId, status: true })\n      }\n    }\n    \n    if (KeyboardEventTypes.KEYUP === eventType) {\n      if (eventCode === 'KeyW') {\n        this.move.forward.front = false\n      }\n      \n      if (eventCode === 'KeyS') {\n        this.move.forward.back = false\n      }\n      \n      if (eventCode === 'KeyA') {\n        this.move.forward.left = false\n      }\n      \n      if (eventCode === 'KeyD') {\n        this.move.forward.right = false\n      }\n      \n      if (eventCode === 'Space') {\n        this.store.commit('JUMP_DISABLED', this.playerId)\n      }\n\n      if (eventCode === 'ShiftLeft') {\n        this.move.forward.sprint = false\n      }\n  \n      if (eventCode === 'KeyE') {\n        this.store.commit('SET_EVENT_PRESS', { playerId: this.playerId, status: false })\n      }\n    }\n    \n    this.move.forward.isMoving = !(\n      !this.move.forward.left &&\n      !this.move.forward.right &&\n      !this.move.forward.back &&\n      !this.move.forward.front\n    )\n    \n    const equal = isEqual(this.move.forward, stateMove.forward)\n    \n    if (!equal) {\n      this.store.commit('SET_FORWARD', { playerId: this.playerId, forward: { ...this.move.forward } })\n    }\n    \n    if (jump && !this.move.fly) {\n      this.move.jump()\n      this.store.commit('JUMP_ENABLED', this.playerId)\n    }\n  }\n  \n  private mouseEvent () {\n    const elementContent = document.getElementById('level') as HTMLElement\n    \n    elementContent.addEventListener('click', (e) => {\n      const checkFocusAvailable = e.composedPath().find((item) => {\n        const itemChecked = item as HTMLElement\n        if(itemChecked.tagName !== undefined) {\n          return itemChecked.classList.contains('no_focus_game')\n        }\n        \n        return false\n      })\n      \n      if (!checkFocusAvailable) {\n        this.mouseIsCaptured = true\n        const canvas = document.getElementById('canvas')\n        \n        if (canvas) {\n          canvas.requestPointerLock()\n        }\n      }\n      \n    })\n    \n    const pointerlockchange = () => {\n      this.mouseIsCaptured = document.pointerLockElement || false\n    }\n    \n    document.addEventListener('pointerlockchange', pointerlockchange, false)\n    \n    window.addEventListener('pointermove', (e) => {\n      if (this.mouseIsCaptured) {\n        const rotateX = e.movementY * this.sensitiveMouse\n        const rotateY = e.movementX * this.sensitiveMouse\n        \n        this.move.rotate(rotateX, rotateY)\n        this.store.commit('UPDATE_ROTATE', { playerId: this.playerId, rotate: { x: rotateX, y: rotateY } })\n      }\n    })\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Idle implements AnimationGroupInterface {\n  playerId: string\n  animation: AnimationGroup | null\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 1\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Idle_' + playerId)\n\n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find Idle animation')\n      return\n    }\n\n    this.animation.name = 'Idle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Run implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Run_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Run animation')\n      return\n    }\n    \n    this.animation.name = 'Run_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpMiddle implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  //TODO: классы получились очень похожие, можно наследовать эти методы у общего класса\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpMiddle_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpMiddle animation')\n      return\n    }\n\n    this.animation.name = 'JumpMiddle_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class JumpFinish implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = false\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('JumpFinish_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find JumpFinish animation')\n      return\n    }\n    \n    this.animation.name = 'JumpFinish_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.stop()\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Sprint implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Sprint_' + playerId)\n    \n    this.setAnimations()\n  }\n  \n  setAnimations () {\n    if (this.animation === null) {\n      console.error('Not find Sprint animation')\n      return\n    }\n    \n    this.animation.name = 'Sprint_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import { AnimationGroup, Scene } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './AnimationGroupInterface'\n\nexport default class Picking implements AnimationGroupInterface {\n  animation: AnimationGroup | null\n  playerId: string\n  weight: number\n  autoPlayLoop: boolean\n  scene: Scene\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.weight = 0\n    this.autoPlayLoop = true\n    this.scene = globalThis.scene\n    this.animation = this.scene.getAnimationGroupByName('Picking_' + playerId)\n\n    this.setAnimations()\n  }\n\n  setAnimations () {\n    if (!this.animation) {\n      console.error('Not find Picking animation')\n      return\n    }\n    \n    this.animation.name = 'Picking_' + this.playerId\n    this.animation.setWeightForAllAnimatables(this.weight)\n    this.animation.play(true)\n  }\n}\n","import SubscribeStore from '../SubscribeStore'\nimport { Scalar, Scene, AnimationEvent } from '@babylonjs/core'\nimport { AnimationGroupInterface } from './animation_groups/AnimationGroupInterface'\nimport Idle from './animation_groups/Idle'\nimport Run from './animation_groups/Run'\nimport JumpMiddle from './animation_groups/JumpMiddle'\nimport JumpFinish from './animation_groups/JumpFinish'\nimport store from '@/store'\nimport { Move } from '@/store/players/types'\nimport Sprint from '@/models/сommon/character/animation_groups/Sprint'\nimport Picking from '@/models/сommon/character/animation_groups/Picking'\n\nexport default class Animation {\n  playerId: string\n  animationGroupCurrent: AnimationGroupInterface | undefined\n  animationGroups: Array<AnimationGroupInterface>\n  store: any\n  scene: Scene\n  observableBeforeAnimation: any\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.store = store\n    this.scene = globalThis.scene\n    this.animationGroups = []\n    this.animationGroupCurrent = undefined\n\n    this.setAnimationGroups()\n\n    this.observableBeforeAnimation = () => {\n      this.onBeforeAnimation()\n    }\n  }\n\n  private setAnimationGroups () {\n    const idle = new Idle(this.playerId)\n    this.pushAnimation(idle)\n    this.pushAnimation(new Run(this.playerId))\n    this.pushAnimation(new Sprint(this.playerId))\n    this.pushAnimation(new JumpMiddle(this.playerId))\n    this.pushAnimation(new JumpFinish(this.playerId))\n    this.pushAnimation(new Picking(this.playerId))\n    \n    if (idle.animation) {\n      this.animationGroupCurrent = this.getAnimationByName('Idle_' + this.playerId)\n      this.subscribe()\n    }\n  }\n  \n  private pushAnimation (animation: AnimationGroupInterface) {\n    if (animation.animation) {\n      this.animationGroups.push(animation)\n    }\n  }\n\n  private getAnimationByName (name: string) {\n    return this.animationGroups.find(group => group.animation && group.animation.name.includes(name)) as AnimationGroupInterface\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n    const animationJumpMiddle = this.getAnimationByName('JumpMiddle_' + this.playerId)\n    const animationJumpFinish = this.getAnimationByName('JumpFinish_' + this.playerId)\n  \n    this.subscribeStore.move((move: Move) => {\n      if (!move.isFly && !move.jump) {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      }\n    })\n  \n    this.subscribeStore.fly(() => {\n      this.blending(animationJumpMiddle)\n    })\n  \n    if (animationJumpFinish && animationJumpFinish.animation) {\n      this.subscribeStore.flyEnd(() => {\n        this.blending(animationJumpFinish)\n        if (animationJumpFinish.animation) {\n          animationJumpFinish.animation.play()\n        }\n        \n      })\n  \n      const jumpFinishAnimation = animationJumpFinish.animation.targetedAnimations[0].animation\n  \n      const JumpFinishAnimationEvent = new AnimationEvent(25, () => {\n        const animation = this.getAnimationByState()\n        if (animation) {\n          this.blending(animation)\n        }\n      })\n  \n      jumpFinishAnimation.addEvent(JumpFinishAnimationEvent)\n    }\n  }\n  \n  private getAnimationByState() {\n    const statePlayer = store.getters.getPlayerById(this.playerId)\n    if (!statePlayer) {\n      return null\n    }\n    \n    const move = statePlayer.move\n    const animationIdle = this.getAnimationByName('Idle_' + this.playerId)\n    const animationRun = this.getAnimationByName('Run_' + this.playerId)\n    const animationSprint = this.getAnimationByName('Sprint_' + this.playerId)\n    const animationPicking = this.getAnimationByName('Picking_' + this.playerId)\n    \n    let animation = animationIdle\n  \n    if (move.forward.isMoving) {\n      animation = animationRun\n      if (move.forward.sprint) {\n        animation = animationSprint\n      }\n    }\n    \n    if (statePlayer.event.isFocused) {\n      animation = animationPicking\n    }\n    \n    return animation\n  }\n\n  private blending (animationGroup: AnimationGroupInterface) {\n    if (this.animationGroupCurrent === animationGroup) {\n      return\n    }\n\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n\n    this.animationGroupCurrent = animationGroup\n    this.scene.onBeforeAnimationsObservable.add(this.observableBeforeAnimation)\n  }\n\n  private onBeforeAnimation () {\n    if (this.animationGroupCurrent && this.animationGroupCurrent.animation) {\n      const weight = Scalar.Clamp(this.animationGroupCurrent.weight + 0.08, 0, 1)\n      this.animationGroupCurrent.weight = Number(weight.toFixed(2))\n      this.animationGroupCurrent.animation.setWeightForAllAnimatables(this.animationGroupCurrent.weight)\n    }\n\n    this.animationGroups.forEach(animationGroup => {\n      if (animationGroup.animation &&animationGroup.weight !== 0 && animationGroup !== this.animationGroupCurrent) {\n        const weight = Scalar.Clamp(animationGroup.weight - 0.08, 0, 1)\n        animationGroup.weight = Number(weight.toFixed(2))\n        animationGroup.animation.setWeightForAllAnimatables(animationGroup.weight)\n\n        if (!animationGroup.autoPlayLoop && animationGroup.weight === 0) {\n          animationGroup.animation.stop()\n        }\n      }\n    })\n\n    if (this.animationGroupCurrent && this.animationGroupCurrent.weight === 1) {\n      this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n    }\n  }\n  \n  dispose () {\n    this.scene.onBeforeAnimationsObservable.removeCallback(this.observableBeforeAnimation)\n  }\n}\n","import { AbstractMesh, Animation, CubicEase, EasingFunction, Scene, Tools } from '@babylonjs/core'\nimport SubscribeStore from '../SubscribeStore'\nimport store from '@/store'\n\nexport default class Rotation {\n  animation: Animation | undefined\n  scene: Scene\n  playerId: string\n  angle: number\n  meshCharacter: AbstractMesh\n  meshFoot: AbstractMesh\n  subscribeStore?: SubscribeStore\n  animatable: any\n  forwardAngle: number\n  isAnimated: boolean\n  syncIntervalId: any\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.angle = 0\n    // TODO: вывести в константы признак meshId\n    this.meshCharacter = this.scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as AbstractMesh\n    this.animation = undefined\n    this.animatable = undefined\n    this.isAnimated = false\n    this.forwardAngle = 0\n\n    this.setAnimation()\n    this.subscribe()\n  }\n\n  private setAnimation () {\n    this.animation = new Animation(\n      'rotateMesh',\n      'rotation.y',\n      20,\n      Animation.ANIMATIONTYPE_FLOAT\n    )\n\n    const easingFunction = new CubicEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEINOUT)\n    this.animation.setEasingFunction(easingFunction)\n  }\n\n  private setAngle () {\n    const state = store.getters.getPlayerById(this.playerId)\n    if (!state) {\n      return null\n    }\n    \n    const stateForward = state.move.forward\n\n    if (!stateForward.isMoving) {\n      return null\n    }\n\n    let angleNew = 0\n\n    if (stateForward.left) {\n      angleNew = 270\n    }\n\n    if (stateForward.right) {\n      angleNew = 90\n    }\n\n    if (stateForward.front) {\n      angleNew = 0\n\n      if (stateForward.left) {\n        angleNew = 305\n      }\n\n      if (stateForward.right) {\n        angleNew = 45\n      }\n    }\n\n    if (stateForward.back) {\n      angleNew = 180\n\n      if (stateForward.left) {\n        angleNew = 225\n      }\n\n      if (stateForward.right) {\n        angleNew = 135\n      }\n    }\n  \n    let radianNew = Tools.ToRadians(angleNew) + this.meshFoot.rotation.y\n    const radianOld = this.meshCharacter.rotation.y\n  \n    const angleOld = Tools.ToDegrees(radianOld)\n    angleNew = Tools.ToDegrees(radianNew)\n  \n    const diff = (angleNew - angleOld + 180) % 360 - 180\n    const shortWayAngle = diff < -180 ? diff + 360 : diff\n    radianNew = radianOld + Tools.ToRadians(shortWayAngle)\n    \n    const diffAngle = Math.abs(radianNew - radianOld) / (Math.PI / 180)\n  \n    if (diffAngle > 10) {\n      if (!this.isAnimated) {\n        this.stopAnimation()\n        this.play(radianNew, radianOld)\n        this.isAnimated = true\n      }\n    } else {\n      this.meshCharacter.rotation.y = radianNew\n    }\n  }\n\n  private play (radianNew: number, radianOld: number) {\n    if (this.animation === undefined) {\n      console.error('Not set animation rotate')\n      return\n    }\n\n    const keys = []\n    const frames = 10\n\n    keys.push({\n      frame: 0,\n      value: radianOld\n    })\n\n    keys.push({\n      frame: frames,\n      value: radianNew\n    })\n    \n    this.animation.setKeys(keys)\n    this.meshCharacter.animations = []\n    this.meshCharacter.animations.push(this.animation)\n  \n    this.isAnimated = true\n    this.animatable = this.scene.beginAnimation(this.meshCharacter, 0, frames, false, 1.15, () => {\n      this.isAnimated = false\n    })\n  }\n\n  private subscribe () {\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  \n    this.subscribeStore.rotate(() => {\n      const stateForward = store.getters.getPlayerById(this.playerId).move.forward\n      \n      if (stateForward.isMoving) {\n        this.setAngle()\n      }\n    })\n  \n    this.subscribeStore.forward(() => {\n      this.setAngle()\n    })\n  \n    this.syncIntervalId = setInterval(() => {\n      this.setAngle()\n    }, 100)\n  }\n  \n  private stopAnimation()\n  {\n    if (this.animatable !== undefined) {\n      this.animatable.stop()\n    }\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    \n    if (this.syncIntervalId) {\n      clearInterval(this.syncIntervalId)\n    }\n  }\n}\n","import { AbstractMesh, Mesh } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport { sortBy } from 'lodash'\n\ninterface LOD {\n  mesh: any\n  distance: number\n}\n\nexport default class LODs {\n  static getLODs(meshes: Array<AbstractMesh>)\n  {\n    const arrayLODs = [] as Array<LOD>\n    \n    meshes.forEach(mesh => {\n      const tags = Helpers.getTagsFromMesh(mesh)\n    \n      if (!tags || !tags.find((tag: string) => tag === 'lod')) {\n        return\n      }\n    \n      const tagDistance = tags.find((tag: string) => tag.indexOf('distance') !== -1)\n      const distance = tagDistance ? Number(tagDistance.split('_')[1]) : 0\n    \n      mesh.isVisible = false\n  \n      arrayLODs.push({\n        mesh: mesh,\n        distance: distance\n      })\n    })\n    \n    return sortBy(arrayLODs, 'distance').reverse()\n  }\n  \n  static addLevels(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes) as Array<LOD>\n    \n    if (arrayLODs.length) {\n      const mainLod = arrayLODs[0]\n      const mainLODMesh = mainLod.mesh as Mesh\n      \n      mainLODMesh.useLODScreenCoverage = false\n      \n      for (let i = 1; i < arrayLODs.length; i++) {\n        const LOD = arrayLODs[i]\n        mainLODMesh.addLODLevel(LOD.distance, LOD.mesh)\n      }\n  \n      mainLod.mesh.addLODLevel(mainLod.distance, null)\n    }\n  }\n  \n  static showOnlyMainLod(meshes: Array<AbstractMesh>) {\n    const arrayLODs = LODs.getLODs(meshes)\n    \n    if (arrayLODs.length) {\n      arrayLODs.forEach((LOD) => {\n        LOD.mesh.isVisible = false\n      })\n  \n      arrayLODs[0].mesh.isVisible = true\n    }\n  }\n}\n","import { AssetContainer, InstantiatedEntries, Mesh, SceneLoader, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport LODs from '@/models/scene/LODs'\n\nexport interface Container {\n  name: string\n  data: AssetContainer\n}\n\nexport default class ContainerManager {\n  static async getContainer(name: string, path: string): Promise<InstantiatedEntries | null> {\n    const filePath = path + name;\n    \n    if (!Helpers.isFile(filePath)) {\n      console.error('Not found file container: ' + filePath)\n      return null\n    }\n    \n    const container = globalThis.assetContainers.find((container: Container) => container.name === name)\n    \n    if (container) {\n      const instanceData = this.getInstance(container.data)\n      const meshes = instanceData.rootNodes[0].getChildMeshes()\n  \n      LODs.showOnlyMainLod(meshes)\n      \n      globalThis.collisions.appendCollisionByMeshes(meshes)\n      \n      return instanceData\n    }\n    \n    const timestamp = await Helpers.getFileTimestamp(filePath)\n  \n    const loadedContainer = await SceneLoader.LoadAssetContainerAsync(  path, name + '?timestamp=2' + timestamp, globalThis.scene)\n    \n    if (loadedContainer) {\n      LODs.addLevels(loadedContainer.meshes)\n      \n      loadedContainer.removeAllFromScene()\n      \n      const newContainer = { name, data: loadedContainer }\n      globalThis.assetContainers.push(newContainer)\n      \n      const instancesData = this.getInstance(newContainer.data)\n      \n      const meshes = instancesData.rootNodes[0].getChildMeshes()\n      globalThis.collisions.appendCollisionByMeshes(meshes)\n      \n      LODs.showOnlyMainLod(meshes)\n      \n      return instancesData\n    }\n\n    return null\n  }\n  \n  static getInstance(assetContainer: AssetContainer)\n  {\n    const result = assetContainer.instantiateModelsToScene((name) => {\n      return name\n    }, false, { doNotInstantiate: false })\n    \n    const meshes = result.rootNodes[0].getChildMeshes()\n  \n    meshes.forEach(mesh => {\n      const assetMesh = assetContainer.meshes.find(assetMesh => assetMesh.name === mesh.name) as Mesh\n      \n      if (assetMesh) {\n        const tags = Tags.GetTags(assetMesh)\n        Tags.AddTagsTo(mesh, tags)\n      }\n    })\n    \n    return result\n  }\n}\n","import { AbstractMesh, Scene } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\nimport store from '@/store/index'\nimport { Item, Player } from '@/store/players/types'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport default class Items {\n  characterMeshes: AbstractMesh[]\n  placeholders: AbstractMesh[]\n  playerId: string\n  scene: Scene\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.scene = globalThis.scene\n    \n    const bodyMesh = scene.getMeshById('characterBody_' + this.playerId) as AbstractMesh\n    this.characterMeshes = bodyMesh.getChildMeshes()\n    this.placeholders = []\n    \n    this.setPlaceholders()\n    this.setItems()\n  }\n  \n  private setPlaceholders () {\n    this.characterMeshes.forEach(mesh => {\n      if (Helpers.IsName(mesh.id, 'placeholder', true)) {\n        mesh.isVisible = false\n        this.placeholders.push(mesh)\n      }\n    })\n  }\n  \n  private setItems () {\n    const storePlayer = store.getters.getPlayerById(this.playerId) as Player\n    \n    storePlayer.items.forEach((item: Item) => {\n      const placeholder = this.placeholders.find(placeholder => {\n        return Helpers.IsName(placeholder.id, item.type, true)\n      })\n      \n      if (!placeholder) {\n        return null\n      }\n      \n      const path = '/resources/graphics/items/'\n      const assetContainer = ContainerManager.getContainer(item.flavour + '.gltf', path)\n      \n      if (!assetContainer) {\n        console.error('Container item not load :' + item.flavour)\n        return null\n      }\n      \n      // const rootId = '__root__item_' + item.flavour + '_' + this.playerId\n      \n     /* assetContainer.then((container) => {\n        if (!container) {\n          return null\n        }\n        \n        const resources = container.instantiateModelsToScene((sourceName) => {\n          if (sourceName == '__root__') {\n            return rootId\n          }\n          \n          return sourceName + '_' + this.playerId\n        })\n        \n        const rootMesh = resources.rootNodes[0]\n        rootMesh.id = rootMesh.name\n        \n        const meshes = rootMesh.getChildMeshes()\n        \n        meshes.forEach(mesh => {\n          mesh.id = mesh.name\n          mesh.isPickable = false\n          mesh.checkCollisions = false\n        })\n        \n        if (placeholder) {\n          rootMesh.parent = placeholder\n        }\n      })*/\n      \n    })\n  }\n}","import { AbstractMesh, DirectionalLight, Mesh, Nullable, Observer, Scene, ShadowGenerator, } from '@babylonjs/core'\nimport Animation from './Animation'\nimport Rotation from './Rotation'\nimport store from '@/store/index'\nimport ContainerManager from '@/models/scene/ContainerManager'\nimport { Helpers } from '@/models/Helpers'\nimport { Property } from '@/store/players/types'\nimport Items from '@/models/сommon/character/Items'\n\nexport default class Character {\n  scene: Scene\n  mesh: AbstractMesh | undefined\n  meshFoot: Mesh | undefined\n  meshBody?: AbstractMesh\n  meshRoot?: AbstractMesh\n  playerId: string\n  meshBodyId: string\n  meshRootId: string\n  observer?: Nullable<Observer<Scene>>\n  animation?: Animation\n  rotation?: Rotation\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + playerId) as Mesh\n    this.meshBodyId = 'characterBody_' + this.playerId\n    this.meshRootId = 'characterRoot_' + this.playerId\n  }\n  \n  load (callback: any) {\n    const path = process.env.VUE_APP_RESOURCES_PATH + 'graphics/characters/'\n    // TODO: взять из store название gltf\n    const assetContainer = ContainerManager.getContainer('BTLMN_Lemon.gltf', path)\n    \n    assetContainer.then((container) => {\n      if (!container) {\n        throw 'Not found container ' + path + 'BTLMN_Lemon.gltf'\n      }\n      \n      const rootMesh = container.rootNodes[0]\n      rootMesh.id = this.meshRootId\n  \n      container.rootNodes[0].getChildMeshes().forEach((mesh) => {\n          if (mesh.name == 'Body') {\n            mesh.id = this.meshBodyId\n            mesh.name = this.meshBodyId\n            return\n          }\n  \n          mesh.id = mesh.id + '_' + this.playerId\n          mesh.name = mesh.name + '_' + this.playerId\n      })\n      \n      container.animationGroups.forEach((animationGroup) => {\n        animationGroup.name = animationGroup.name + '_' + this.playerId\n      })\n      \n      this.setMeshes()\n      this.setAnimations()\n      this.setItems()\n      this.setShadow()\n  \n      callback()\n  \n      this.observer = this.scene.onBeforeRenderObservable.add(() => {\n        this.beforeRender()\n      })\n    })\n  }\n  \n  setMeshes() {\n    const meshBody = this.scene.getMeshById(this.meshBodyId)\n    const meshRoot = this.scene.getMeshById(this.meshRootId)\n  \n    if (!meshBody) {\n      throw 'Not found mesh Player Body'\n    }\n  \n    if (!this.meshFoot) {\n      throw 'Not found mesh Player Foot'\n    }\n  \n    if (!meshRoot) {\n      throw 'Not found mesh Root'\n    }\n  \n    this.meshBody = meshBody\n    this.meshBody.rotationQuaternion = null\n    this.meshBody.resetLocalMatrix()\n    this.meshBody.isVisible = false\n    \n    this.meshRoot = meshRoot\n    this.meshRoot.id = this.meshRoot.name\n    this.meshRoot.rotationQuaternion = null\n    this.meshRoot.resetLocalMatrix()\n    \n    this.meshRoot.getChildMeshes().forEach(mesh => {\n      mesh.id = mesh.name\n      mesh.isPickable = false\n      mesh.checkCollisions = false\n    })\n  \n    this.disposeNotActiveProperties()\n  }\n  \n  filterProperties (mesh: AbstractMesh) {\n      const playerStore = store.getters.getPlayerById(this.playerId)\n      const properties = playerStore.properties\n      \n      if (!Helpers.IsName(mesh.name,'placeholder', true)) {\n        return properties.find((property: Property) => {\n          return Helpers.IsName(mesh.name, property.flavour, true)\n        })\n      }\n  \n    return true\n  }\n  \n  private disposeNotActiveProperties()\n  {\n    this.meshBody?.getChildMeshes().forEach((mesh) => {\n      if (!this.filterProperties(mesh)) {\n        mesh.dispose()\n      }\n    })\n  }\n  \n  private setItems()\n  {\n    new Items(this.playerId)\n  }\n  \n  private setAnimations () {\n    this.animation = new Animation(this.playerId)\n    this.rotation = new Rotation(this.playerId)\n  }\n  \n  private setShadow () {\n    const light = this.scene.getLightById('MainDirectionLight') as DirectionalLight\n    \n    if (light) {\n      const shadowGenerator = light.getShadowGenerator() as ShadowGenerator\n      \n      if (this.meshBody && shadowGenerator) {\n        shadowGenerator.addShadowCaster(this.meshBody)\n      }\n      \n    }\n  }\n  \n  private beforeRender () {\n    if (this.meshRoot && this.meshFoot) {\n      this.meshRoot.position.x = this.meshFoot.position.x\n      this.meshRoot.position.z = this.meshFoot.position.z\n      this.meshRoot.position.y = this.meshFoot.position.y - 0.24\n    }\n  }\n  \n  dispose () {\n    this.rotation?.dispose()\n    this.animation?.dispose()\n    \n    if (this.observer) {\n      this.scene.onBeforeRenderObservable.remove(this.observer)\n    }\n    \n    this.scene.getMeshById('characterRoot_' + this.playerId)?.dispose()\n  }\n}\n","import {\n  Vector3,\n  UniversalCamera,\n  Scene,\n  UniversalCamera as BabylonCamera,\n  Ray,\n  AbstractMesh, Axis, Scalar\n} from '@babylonjs/core'\nimport store from '@/store'\nimport { Player } from '@/store/players/types'\n\ninterface CalculateDistance {\n  distance: number;\n  amount: number;\n}\n\nconst MAX_DIST_CAMERA_Z = 4.5\nconst MAX_DIST_CAMERA_Y = 0.5\n\nexport default class Camera {\n  scene: Scene\n  babylonCamera: BabylonCamera\n  meshHead: AbstractMesh\n  actualDistance: number\n  calculateDistance: CalculateDistance\n  isMoving: boolean\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.babylonCamera = new UniversalCamera('playerCamera', Vector3.Zero(), this.scene)\n    this.meshHead = this.scene.getMeshById('playerHead_' + store.state.player.id) as AbstractMesh\n    this.actualDistance = -MAX_DIST_CAMERA_Z\n    this.isMoving = false\n    \n    this.calculateDistance = {\n      amount: 0,\n      distance: 0\n    }\n    \n    this.init()\n  }\n  \n  private init () {\n    this.babylonCamera.maxZ = 350\n    this.babylonCamera.minZ = 0.2\n    this.babylonCamera.name = 'player'\n    this.scene.activeCamera = this.babylonCamera\n    this.attachCamera()\n    this.setIsMovingInterval()\n  }\n  \n  private attachCamera () {\n    this.scene.registerBeforeRender(() => {\n      this.setDistance()\n      this.babylonCamera.position = this.meshHead.position\n      \n      this.babylonCamera.rotation.x = Number(Scalar.Lerp(this.babylonCamera.rotation.x, this.meshHead.rotation.x, 0.4).toFixed(5))\n      this.babylonCamera.rotation.y = Number(Scalar.Lerp(this.babylonCamera.rotation.y, this.meshHead.rotation.y, 0.25).toFixed(5))\n      \n      this.actualDistance = Number(Scalar.Lerp(this.actualDistance, this.calculateDistance.distance, this.calculateDistance.amount).toFixed(5))\n      \n      const dirZ = this.babylonCamera.getDirection(Axis.Z)\n      this.babylonCamera.position.addInPlace(dirZ.scaleInPlace(this.actualDistance))\n      \n      const dirY = this.babylonCamera.getDirection(Axis.Y)\n      this.babylonCamera.position.addInPlace(dirY.scaleInPlace(-MAX_DIST_CAMERA_Y))\n    })\n  }\n  \n  private setDistance () {\n    const headPosition = this.meshHead.position\n    let forward = new Vector3(0, -MAX_DIST_CAMERA_Y, -MAX_DIST_CAMERA_Z)\n    const m = this.meshHead.getWorldMatrix()\n    forward = Vector3.TransformCoordinates(forward, m)\n    const direction = Vector3.Normalize(forward.subtract(headPosition))\n    \n    const ray = new Ray(headPosition, direction, MAX_DIST_CAMERA_Z)\n    \n    const pickResult = this.scene.pickWithRay(ray, (mesh) => {\n      return mesh.checkCollisions\n    })\n    \n    let distance = -MAX_DIST_CAMERA_Z\n    let amount = 0.02\n   \n    if (this.isMoving) {\n      distance = -MAX_DIST_CAMERA_Z - 1.2\n    }\n    \n    if (pickResult && pickResult.pickedMesh) {\n      distance = -(pickResult.distance + 0.2)\n      amount = 0.5\n    }\n  \n    this.calculateDistance.distance = distance\n    this.calculateDistance.amount = amount\n  }\n  \n  private setIsMovingInterval()\n  {\n    setInterval(() => {\n      this.isMoving = Camera.getIstMoving()\n    }, 100)\n  }\n  \n  private static getIstMoving()\n  {\n    const playerState = store.getters.getPlayerById(store.state.player.id) as Player // TODO: дописать interval на смену move\n    return playerState.move.forward.isMoving\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from '../playerSelf/Controller'\nimport { Scene } from '@babylonjs/core'\nimport Character from '@/models/сommon/character/Character'\nimport Camera from '@/models/playerSelf/Camera'\n\nexport default class Player {\n  scene: Scene\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.scene = globalThis.scene\n    this.playerId = playerId\n  \n    new Body(this.playerId)\n  \n    const character = new Character(this.playerId)\n    character.load(() => {\n      new Controller()\n      new Camera()\n    })\n  }\n}\n","import MoveCommon from '../сommon/Move'\n\nexport default class Move extends MoveCommon {\n\n}\n","import Move from './Move'\nimport SubscribeStore from '../сommon/SubscribeStore'\nimport { Scalar } from '@babylonjs/core'\nimport { Forward } from '@/store/players/types'\n\nexport default class Controller {\n  move: Move\n  playerId: string\n  subscribeStore?: SubscribeStore | null\n\n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.move = new Move(playerId, globalThis.scene)\n    this.subscribeStore = new SubscribeStore(this.playerId)\n  }\n\n  subscribe () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotate((rotateX: number, rotateY: number) => {\n      this.move.rotate(rotateX, rotateY)\n    })\n\n    this.subscribeStore.forward((forward: Forward) => {\n      this.move.forward = {...forward}\n    })\n\n    this.subscribeStore.jump((jump: boolean) => {\n      if (jump) {\n        this.move.jump()\n      }\n    })\n\n    this.syncPosition()\n    this.syncRotation()\n  }\n  \n  dispose () {\n    this.subscribeStore?.unsubscribeAll()\n    this.move.dispose()\n  }\n\n  private syncPosition () {\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    let observerSyncCoordinate: any = null\n    \n    this.subscribeStore.position((position: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshFoot = this.move.meshFoot\n      const endX = Number(position.x.toFixed(5))\n      const endY = Number(position.y.toFixed(5))\n      const endZ = Number(position.z.toFixed(5))\n      const startX = Number(meshFoot.position.x.toFixed(5))\n      const startY = Number(meshFoot.position.y.toFixed(5))\n      const startZ = Number(meshFoot.position.z.toFixed(5))\n\n      if (!this.move.forward.isMoving &&\n        (\n          endX !== startX ||\n          endY !== startY ||\n          endZ !== startZ\n        )\n      ) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshFoot.position.x = Scalar.Lerp(meshFoot.position.x, endX, 0.4)\n          meshFoot.position.y = Scalar.Lerp(meshFoot.position.y, endY, 0.4)\n          meshFoot.position.z = Scalar.Lerp(meshFoot.position.z, endZ, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.position.x.toFixed(5)) === endX &&\n            Number(meshFoot.position.y.toFixed(5)) === endY &&\n            Number(meshFoot.position.z.toFixed(5)) === endZ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n\n  private syncRotation () {\n    let observerSyncCoordinate: any = null\n    if (!this.subscribeStore) {\n      return false\n    }\n    \n    this.subscribeStore.rotation((rotation: any) => {\n      if (observerSyncCoordinate) {\n        this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n        observerSyncCoordinate = null\n      }\n\n      const meshHead = this.move.meshHead\n      const meshFoot = this.move.meshFoot\n\n      const endX = Number(rotation.x.toFixed(5))\n      const endY = Number(rotation.y.toFixed(5))\n      const startX = Number(meshHead.rotation.x.toFixed(5))\n      const startY = Number(meshFoot.rotation.y.toFixed(5))\n\n      if (endX !== startX || endY !== startY) {\n        observerSyncCoordinate = this.move.scene.onBeforeRenderObservable.add(() => {\n          meshHead.rotation.x = Scalar.Lerp(meshHead.rotation.x, endX, 0.4)\n          meshFoot.rotation.y = Scalar.Lerp(meshFoot.rotation.y, endY, 0.4)\n\n          if (\n            observerSyncCoordinate &&\n            Number(meshFoot.rotation.x.toFixed(5)) === endX &&\n            Number(meshFoot.rotation.y.toFixed(5)) === endY\n          ) {\n            this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n            observerSyncCoordinate = null\n          }\n        })\n      } else {\n        if (observerSyncCoordinate) {\n          this.move.scene.onBeforeRenderObservable.remove(observerSyncCoordinate)\n          observerSyncCoordinate = null\n        }\n      }\n    })\n  }\n}\n","import Body from '../сommon/Body'\nimport Controller from './Controller'\nimport Character from '@/models/сommon/character/Character'\n\nexport default class Player {\n  body: Body\n  character: Character\n  controller?: Controller\n  playerId: string\n  \n  constructor (playerId: string) {\n    this.playerId = playerId\n    this.body = new Body(playerId)\n    this.character = new Character(playerId)\n  \n    this.character.load(() => {\n      this.controller = new Controller(playerId)\n      this.controller.subscribe()\n    })\n  }\n  \n  dispose() {\n    console.log('try desp')\n    this.controller?.dispose()\n    this.character.dispose()\n    this.body.dispose()\n  }\n}\n","import { AbstractMesh, InstantiatedEntries, Scene } from '@babylonjs/core'\nimport ContainerManager from '@/models/scene/ContainerManager'\n\nexport interface PrefabItem {\n  id: number;\n  container: InstantiatedEntries;\n}\n\nexport default class Prefabs {\n  prefabs: AbstractMesh[]\n  scene: Scene\n  \n  constructor (callback: any) {\n    this.scene = globalThis.scene\n    this.prefabs = []\n    \n    this.setPrefabs()\n    this.setItems().then(() => {\n      console.info('All prefabs loaded!')\n      callback()\n    })\n  }\n  \n  private setPrefabs () {\n    const meshes = this.scene.getMeshesByTags('prefab')\n  \n    meshes.forEach(mesh => {\n      mesh.isVisible = false\n      this.prefabs.push(mesh)\n    })\n  }\n  \n  private async setItems() {\n    let id = 0\n    globalThis.prefabs = []\n    \n    for (const prefab of this.prefabs) {\n      const nameModel = `BTLMN_Prop_${prefab.id.replace('Prefab_', '')\n        .replace(/\\.[^/.]+$/, '')}.gltf`\n      \n      const path = `${process.env.VUE_APP_RESOURCES_PATH}graphics/prefabs/`\n      \n      try {\n        const container = await ContainerManager.getContainer(nameModel, path)\n        \n        if (!container) {\n          console.error(`Error loading container ${nameModel}:`)\n          continue\n        }\n        \n        const rootMesh = container.rootNodes[0]\n        rootMesh.parent = prefab\n        prefab.id = 'prefab_' + id\n  \n        const loopAnimation = container.animationGroups.find(group => group.name === 'start')\n        \n        if (loopAnimation) {\n          loopAnimation.play(true)\n        }\n        \n        globalThis.prefabs.push({\n          id: id,\n          container: container\n        })\n        \n        id++\n        \n      } catch (error) {\n        console.error(`Error loading container ${nameModel}:`, error)\n      }\n    }\n  }\n}","import { IGLTFLoaderExtension } from '@babylonjs/loaders/glTF'\nimport { GLTFLoader } from '@babylonjs/loaders/glTF/2.0'\nimport { Tags, TransformNode } from '@babylonjs/core'\n\nclass TagsExtension implements IGLTFLoaderExtension {\n  public readonly name = 'MyTagsExtension'\n  public enabled = true\n  \n  constructor(private _loader: GLTFLoader) {}\n  \n  public loadNodeAsync(context: string, node: any, assign: (babylonTransformNode: any) => void): Promise<TransformNode> {\n    return this._loader.loadNodeAsync(context, node,  (babylonTransformNode) => {\n      if (this._loader.gltf.meshes) {\n        const mesh = this._loader.gltf.meshes[node.mesh]\n        \n        if (mesh && mesh.extras) {\n          if (mesh.extras.tags) {\n            Tags.AddTagsTo(babylonTransformNode, mesh.extras.tags)\n          }\n        }\n      }\n\n      assign(babylonTransformNode)\n    });\n  }\n  \n  public dispose(): void {\n    // Add code to dispose any resources used by the extension\n  }\n}\n\nexport default function RegisterTagsExtension () {\n  GLTFLoader.RegisterExtension('MyTagsExtension', (loader: GLTFLoader) => {\n    return new TagsExtension(loader)\n  })\n}\n","import { AbstractMesh, Scene, Tags } from '@babylonjs/core'\nimport { Helpers } from '@/models/Helpers'\n\nexport default class Collisions {\n  listCollisions: AbstractMesh[]\n  listCollisionsFloor: AbstractMesh[]\n  scene: Scene\n\n  constructor () {\n    this.scene = globalThis.scene\n    this.listCollisions = []\n    this.listCollisionsFloor = []\n    \n    this.setCollisions()\n  }\n  \n  private setCollisions()\n  {\n    this.listCollisions = this.scene.meshes.filter(mesh => mesh.checkCollisions || Helpers.hasTag(mesh, 'collision'))\n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n    \n    this.listCollisions.forEach((mesh) => {\n      mesh.isVisible = false\n      mesh.isPickable = true\n    })\n  \n    this.scene.getMeshesByTags('visible_force').forEach((mesh) => {\n      mesh.isVisible = true\n    })\n  }\n  \n  private static checkCollisionList(mesh: AbstractMesh, list: Array<AbstractMesh>)\n  {\n    for (const keyMesh in list) {\n      const listMesh = list[keyMesh]\n      \n      if (listMesh !== mesh && mesh.intersectsMesh(listMesh, Tags.MatchesQuery(listMesh, 'precise'))) {\n        return listMesh\n      }\n    }\n  \n    return false\n  }\n  \n  checkCollisionFloor(mesh: AbstractMesh) {\n    return Collisions.checkCollisionList(mesh, this.listCollisionsFloor)\n  }\n  \n  appendCollisionByMeshes(meshes: Array<AbstractMesh>) {\n    meshes.forEach(mesh => {\n      if (mesh.checkCollisions || Helpers.hasTag(mesh, 'collision')) {\n        mesh.checkCollisions = true\n        mesh.isVisible = false\n        mesh.isPickable = false\n        \n        this.listCollisions.push(mesh)\n      }\n    })\n  \n    this.listCollisionsFloor = this.scene.getMeshesByTags('ground')\n  }\n}\n","import {\n  AbstractMesh,\n  Mesh,\n  MeshBuilder,\n  Ray,\n  RayHelper,\n  Scene,\n  Vector3\n} from '@babylonjs/core'\nimport { Rectangle } from '@babylonjs/gui/2D'\nimport store from '@/store/index'\nimport { PrefabItem } from '@/models/scene/Prefabs'\n\ninterface Item {\n  meshEventId: string;\n  prefabItem: PrefabItem;\n}\n\nexport default class IceMeteor {\n  items: Array<Item>\n  scene: Scene\n  store: any\n  playerId: string\n  meshHead: Mesh\n  meshFoot: Mesh\n  showRay: boolean\n  rays: Array<Ray>\n  rectLabel: Rectangle\n  isFocused: boolean\n  currentPrefabId: number|null\n  \n  constructor () {\n    this.scene = globalThis.scene\n    this.store = store\n    this.playerId = this.store.state.player.id\n    this.meshHead = this.scene.getMeshById('characterBody_' + this.playerId) as Mesh\n    this.meshFoot = this.scene.getMeshById('playerFoot_' + this.playerId) as Mesh\n    this.showRay = false\n    this.items = []\n    this.rays = []\n    this.rectLabel = new Rectangle()\n    this.isFocused = false\n    this.currentPrefabId = null\n    \n    this.initItems()\n    // this.initLabel()\n    this.initCastRays()\n    \n    console.log(this.scene.getMeshesByTags('event_ice_meteor'))\n  }\n  \n  private initItems () {\n    this.scene.getMeshesByTags('event_ice_meteor').forEach((mesh: Mesh, index) => {\n      if (mesh) {\n        console.log(mesh)\n        mesh.isPickable = false\n        mesh.isVisible = false\n        \n        const meshEventId = mesh.id + '_event_mesh_' + index\n        \n        const boundingInfo = mesh.getBoundingInfo()\n        const size = boundingInfo.boundingBox.extendSize.scale(2) // extendSize - это половина размера ограничивающего объема, поэтому умножаем на 2\n        \n        const invisibleMesh = MeshBuilder.CreateBox(meshEventId, {height: size.y, width: size.x, depth: size.z}, scene);\n        invisibleMesh.parent = mesh\n        invisibleMesh.visibility = 0\n        invisibleMesh.isVisible = true\n        \n        const prefabId = this.getPrefabIdByMesh(mesh)\n        \n        if (prefabId) {\n          const prefabItem = globalThis.prefabs.find((prefab) => prefab.id == prefabId)\n          \n          if (prefabItem) {\n            prefabItem.container.animationGroups.forEach((animationGroup) => {\n              animationGroup.stop()\n            })\n  \n            this.items.push({\n              meshEventId,\n              prefabItem\n            })\n          } else {\n            console.error('Not found prefabId')\n          }\n          \n        } else {\n          console.error('Not found prefabId')\n        }\n       \n      }\n    })\n  }\n  \n  private buildRays () {\n    const cellSize = 0.25\n    const areaSize = 1\n    \n    const countCells = Math.round((areaSize * areaSize) / (cellSize * cellSize))\n    let cellStartX = 0 - (cellSize + (cellSize / 2))\n    const cellFinishX = cellStartX + areaSize\n    let cellY = cellSize + (cellSize / 2)\n    \n    let i = 0\n    while (i < countCells) {\n      const rayX = cellStartX + (cellSize / 2)\n      const rayY = cellY - (areaSize / 2)\n      \n      const length = 1\n      const ray = new Ray(Vector3.Zero(), Vector3.Zero())\n      const rayHelper = new RayHelper(ray)\n      rayHelper.attachToMesh(this.meshHead, new Vector3(rayX, rayY, length), new Vector3(0, 0.2, 0.2), length)\n      \n      if (this.showRay) {\n        rayHelper.show(this.scene)\n      }\n      \n      cellStartX += cellSize\n      if (cellFinishX < cellStartX + cellSize) {\n        cellStartX = 0 - (cellSize + (cellSize / 2))\n        cellY += cellSize\n      }\n      \n      this.rays.push(ray)\n      \n      i++\n    }\n  }\n  \n  private castRay (ray: Ray) {\n    const hit = this.scene.pickWithRay(ray)\n  \n    const playerState = this.store.getters.getPlayerById(this.playerId)\n    if (!playerState) {\n      return null\n    }\n    \n    if (hit && hit.pickedMesh) {\n        const pickMesh = hit.pickedMesh\n        const item = this.items.find(item => item.meshEventId == pickMesh.id)\n      \n        if (item) {\n          if (!playerState.event.isFocused) {\n            this.store.commit('SET_EVENT_IS_FOCUSED', { playerId: this.playerId, status: true })\n            this.currentPrefabId = item.prefabItem.id\n  \n            item.prefabItem.container.animationGroups.forEach((animationGroup) => {\n              animationGroup.play(true)\n            })\n          }\n          \n          return true\n        }\n    }\n  \n    if (playerState.event.isFocused) {\n      this.store.commit('SET_EVENT_IS_FOCUSED', { playerId: this.playerId, status: false })\n  \n      if (this.currentPrefabId !== null) {\n        const item = this.items.find(item => item.prefabItem.id == this.currentPrefabId)\n    \n        if (item) {\n          item.prefabItem.container.animationGroups.forEach((animationGroup) => {\n            animationGroup.stop()\n          })\n        }\n      }\n    }\n    \n    return false\n  }\n  \n  private castRays () {\n    //TODO: проверить every\n    this.rays.forEach(ray => {\n      return !this.castRay(ray)\n    })\n  }\n  \n  private initCastRays () {\n    this.buildRays()\n    \n    setInterval(() => {\n      this.castRays()\n    }, 100)\n  }\n  \n  getPrefabIdByMesh(mesh: AbstractMesh)\n  {\n    const prefabMesh = mesh.parent?.parent\n    \n    if (prefabMesh) {\n      return Number(prefabMesh.id.split('_')[1])\n    }\n    \n    return null\n  }\n}\n","import { Engine } from '@babylonjs/core'\nimport Scene from './scene/Scene'\nimport store from '@/store/index'\nimport Audio from '@/models/sounds/Audio'\nimport ServerClient from './ServerClient'\nimport DevMode from '@/models/scene/DevMode'\nimport PlayerSelf from '@/models/playerSelf/Player'\nimport Player from '@/models/player/Player'\nimport { v4 as uuidv4 } from 'uuid'\nimport Prefabs from '@/models/scene/Prefabs'\nimport RegisterTagsExtension from '@/models/scene/TagsExtansion'\nimport Collisions from '@/models/mehanics/Collisions'\nimport IceMeteor from '@/models/events/IceMeteor'\n\nexport default class Game {\n  players?: Array<Player>\n  \n  init () {\n    globalThis.assetContainers = []\n    this.players = []\n    const canvas = document.getElementById('canvas') as HTMLCanvasElement\n    canvas.width = window.innerWidth\n    canvas.height = window.innerHeight\n    \n    const engine = new Engine(canvas, true, { preserveDrawingBuffer: false, stencil: true })\n    const sceneModel = new Scene(engine)\n    const playerId = this.getPlayerId()\n    store.commit('SET_SELF_PLAYER_ID', playerId)\n    \n    sceneModel.load(async () => {\n      new Audio()\n      sceneModel.setEnvironment()\n      \n      const serverClient = new ServerClient(playerId)\n      serverClient.init()\n      \n      store.subscribe(mutation => {\n        if (mutation.type === 'ADD_PLAYER') {\n          if (mutation.payload.id === playerId) {\n            new PlayerSelf(playerId)\n            \n            this.setClassesGame(() => {\n              store.commit('LOADING_TOGGLE')\n  \n              console.info('Game loaded')\n              console.info('Self player ' + playerId + ' created')\n            })\n  \n            serverClient.syncPlayer()\n \n          } else {\n            this.players?.push(new Player(mutation.payload.id))\n            console.info('Player ' + playerId + ' created')\n          }\n        }\n      })\n    })\n  \n    store.subscribe(mutation => {\n      if (mutation.type === 'REMOVE_PLAYER') {\n        const player = this.players?.find(player => player.playerId === mutation.payload)\n\n        if (player) {\n          player.dispose()\n          console.info('Player ' + player.playerId + ' removed')\n        }\n      }\n    })\n  }\n  \n  setClassesGame (callback: any) {\n   // new LightPoints()\n    RegisterTagsExtension()\n    \n    new DevMode()\n    globalThis.collisions = new Collisions()\n    \n    new Prefabs(() => {\n      callback()\n      new IceMeteor()\n    })\n  }\n  \n  getPlayerId () {\n    const queryString = window.location.search\n    const urlParams = new URLSearchParams(queryString)\n    let playerId = urlParams.get('playerId')\n    \n    if (!playerId) {\n      playerId = 'guest_' + uuidv4()\n    }\n    \n    return playerId\n  }\n}","<template>\n    <div id=\"top_bar\" class=\"no_focus_game\">\n        <div id=\"menu_button\">\n            <div class=\"menu_button\" @click=\"openMenu\"></div>\n        </div>\n\n      <meta-mask></meta-mask>\n    </div>\n</template>\n\n<script>\n  import MetaMask from '@/views/gui/topbar/MetaMask'\n\n  export default {\n    components: {\n      MetaMask\n    },\n    methods: {\n      openMenu() {\n        this.$store.commit('SET_OPEN_MENU', true)\n      }\n    }\n  }\n</script>","<template>\n  <button @click=\"connectOrChangeWallet\" class=\"wkit-button\">\n    {{ isConnected ? walletAddress.slice(0, 6) + '...' + walletAddress.slice(-4) : 'Connect' }}\n  </button>\n</template>\n\n<script>\nimport Web3 from 'web3'\nimport '../../../styles/suiet.sass'\n\nexport default {\n  data() {\n    return {\n      isConnected: false,\n      walletAddress: '',\n      web3: null\n    }\n  },\n  async created() {\n    if (window.ethereum) {\n      this.web3 = new Web3(window.ethereum)\n      const accounts = await this.web3.eth.getAccounts()\n      if (accounts.length > 0) {\n        this.isConnected = true\n        this.walletAddress = accounts[0]\n      }\n      window.ethereum.on('accountsChanged', (accounts) => {\n        if (accounts.length === 0) {\n          this.isConnected = false\n        } else {\n          this.walletAddress = accounts[0]\n        }\n      })\n    } else {\n      console.log('Metamask is not installed. Please consider installing it: https://metamask.io/download.html')\n    }\n  },\n  methods: {\n    async connectOrChangeWallet() {\n      if (window.ethereum) {\n        if (this.isConnected) {\n         //  window.ethereum.disconnect()\n          this.isConnected = false\n        } else {\n          try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n            this.isConnected = true\n            this.walletAddress = accounts[0]\n          } catch (error) {\n            console.error('User rejected connection:', error)\n          }\n        }\n      }\n    }\n  }\n}\n</script>","import { render } from \"./MetaMask.vue?vue&type=template&id=72f35d85\"\nimport script from \"./MetaMask.vue?vue&type=script&lang=js\"\nexport * from \"./MetaMask.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TopBar.vue?vue&type=template&id=0780d5ea\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"level_preview\" }\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"text\" }, \" Are you ready? \", -1)\nconst _hoisted_4 = { class: \"container_button\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.play && _ctx.play(...args))),\n          class: \"button\"\n        }, \"play\")\n      ])\n    ])\n  ], 512)), [\n    [_vShow, !this.$store.state.level.loading && this.show]\n  ])\n}","\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'LevelPreview',\n  methods: {\n    play () {\n      this.$store.commit('SET_PLAY')\n      this.show = false\n    }\n  },\n  data () {\n    return {\n      show: true\n    }\n  }\n})\n","import { render } from \"./LevelPreview.vue?vue&type=template&id=17485c69&ts=true\"\nimport script from \"./LevelPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LevelPreview.vue?vue&type=script&lang=ts\"\n\nimport \"./LevelPreview.vue?vue&type=style&index=0&id=17485c69&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"menu\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Menu\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"li\", null, [\n  /*#__PURE__*/_createElementVNode(\"a\", { href: \"/home\" }, \"Exit\")\n], -1)\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"a\", {\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.openSettings && _ctx.openSettings(...args)))\n            }, \"Settings\")\n          ]),\n          _hoisted_6\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.closeMenu && _ctx.closeMenu(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.level.isMenuOpen]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    methods: {\n      closeMenu() {\n        this.$store.commit('SET_OPEN_MENU', false)\n      },\n      openSettings() {\n        this.$store.commit('SET_SETTINGS_OPEN', true)\n      }\n    }\n  })\n","import { render } from \"./MenuLevel.vue?vue&type=template&id=621e8932&ts=true\"\nimport script from \"./MenuLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuLevel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"settings\",\n  class: \"modal no_focus_game\"\n}\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"title margin_bottom\" }, \"Settings\", -1)\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = [\"onChange\", \"checked\"]\nconst _hoisted_7 = { class: \"button_bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.fields, (field, index) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: index }, [\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  onChange: ($event: any) => (_ctx.saveField(field.name, $event)),\n                  checked: field.value\n                }, null, 40, _hoisted_6),\n                _createTextVNode(\" \" + _toDisplayString(field.name), 1)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.close && _ctx.close(...args))),\n            class: \"button\"\n          }, \"Close\")\n        ])\n      ])\n    ])\n  ], 512)), [\n    [_vShow, this.$store.state.settings.open]\n  ])\n}","\n  import { defineComponent } from 'vue'\n\n  export default defineComponent({\n    name: 'game-home',\n    computed: {\n      fields(): any {\n        return this.$store.getters.settingFields\n      }\n    },\n    methods: {\n      saveField (name: string, event: any) {\n        this.$nextTick(() => {\n          this.$store.commit('SET_SETTING_FIELD_VALUE', {name, value: event.target.checked})\n        })\n\n\n      },\n      close () {\n        this.$store.commit('SET_SETTINGS_OPEN', false)\n      }\n    },\n    data: function () {\n      return {\n        soundEnable: true\n      }\n    }\n  })\n","import { render } from \"./Settings.vue?vue&type=template&id=00492990&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\n  import { defineComponent } from 'vue'\n  import Game from '@/models/Game'\n  import TopBar from '@/views/gui/topbar/TopBar.vue'\n  import LevelPreview from '@/views/LevelPreview.vue'\n  import MenuLevel from '@/views/gui/MenuLevel.vue'\n  import Settings from '@/views/gui/Settings.vue'\n  import { mapGetters } from 'vuex'\n\n  export default defineComponent({\n    name: 'game-level',\n    mounted (): void {\n      this.$nextTick(() => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const level = urlParams.get('level')\n        this.$store.commit('SET_LEVEL', level ? level : 1)\n        const game = new Game()\n        game.init()\n      })\n    },\n    computed: {\n      ...mapGetters([\n        'finish'\n      ])\n    },\n    watch: {\n      finish(value) {\n        if (value) {\n          window.location.href = '/finish'\n        }\n      }\n    },\n    components: {\n      TopBar,\n      LevelPreview,\n      MenuLevel,\n      Settings\n    }\n  })\n","import { render } from \"./App.vue?vue&type=template&id=340def46&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=340def46&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/dmitryalferof/PhpstormProjects/battlemon/babylonjs-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-340def46\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\n/* Theme variables */\nimport './styles/app.sass'\n\nimport store from '@/store/index'\n\ncreateApp(App)\n  .use(store)\n  .mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbabylon_js\"] = self[\"webpackChunkbabylon_js\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4158); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","id","_hoisted_2","_createElementVNode","_hoisted_3","key","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_TopBar","_resolveComponent","_component_MenuLevel","_component_Settings","_component_LevelPreview","_openBlock","_createElementBlock","_createVNode","this","$store","state","level","loading","_createCommentVNode","mutations","SET_PRESS_MOVE_RIGHT","payload","right","SET_PRESS_MOVE_LEFT","left","SET_PRESS_MOVE_UP","up","SET_PRESS_MOVE_DOWN","down","SET_MOVE_LAST_EVENT","lastEvent","SET_IS_USED_MOVE_CONTROLLER","isUsed","getters","controllerMoveIsUsed","controllerMove","SET_PRESS_ROTATE_RIGHT","SET_PRESS_ROTATE_LEFT","SET_PRESS_ROTATE_UP","SET_PRESS_ROTATE_DOWN","SET_ROTATE_LAST_EVENT","SET_IS_USED_ROTATE_CONTROLLER","controllerRotate","Settings","fields","name","value","label","validateFieldName","field","find","setValueByName","getFields","settings","map","localStorage","setItem","JSON","stringify","getValueByName","settingsStorage","getItem","parse","String","oldField","settingField","SET_SETTINGS_OPEN","open","SET_SETTING_FIELD_VALUE","SettingsStorage","forEach","SettingsLocalStorage","settingFields","getSettingsFieldByName","getSettingsValueByName","Level","saveCompletedLevel","levelId","checkCompletedLevelId","levelsIds","getCompletedLevelsIds","push","join","setLastCompletedLevelId","completedLevels","split","getLastCompletedLevelId","Number","ids","SET_LEVEL","SET_PLAY","play","SET_OPEN_MENU","isMenuOpen","SET_DATE_LAST_USED_CONTROLLERS","dateLastUsedControllers","SET_IS_USED_CONTROLLERS","isUsedControllers","MAP_TOGGLE","isMapOpen","LOADING_TOGGLE","SET_LOWER_FLOOR_POSITION","lowerFloorPosition","x","y","z","SET_LOWER_FLOOR_SIZE","lowerFloorSize","width","height","ADD_KEY","keys","SET_ACTIVE_KEY","status","keysActiveCount","filter","length","CHARGE_BATTERY_UP","batteryCharge","CHARGE_BATTERY_DOWN","SET_FINISH","LevelStorage","finish","playerPosition","playerRotate","getPlayerById","playerId","list","player","playerExample","character","items","properties","move","forward","front","back","isMoving","sprint","rotate","jump","isFly","isFlyUp","syncData","position","rotation","event","press","isFocused","ADD_PLAYER","newPlayer","REMOVE_PLAYER","splice","findIndex","FLY_ENABLED","FLY_UP_ENABLED","FLY_UP_DISABLED","FLY_DISABLED","SET_FORWARD","UPDATE_ROTATE","UPDATE_ROTATION","playerState","UPDATE_POSITION","JUMP_DISABLED","JUMP_ENABLED","JUMP_SET","SYNC_PLAYER","statePlayer","SET_EVENT_PRESS","SET_EVENT_IS_FOCUSED","players","store","strict","levels","SET_SELF_PLAYER_ID","modules","Vuex","Environment","constructor","_defineProperty","scene","globalThis","shadowGenerator","setupHDR","url","process","hdrTexture","CubeTexture","hdrRotation","setReflectionTextureMatrix","Matrix","Tools","gammaSpace","environmentTexture","setupGlow","gl","GlowLayer","mainTextureFixedSize","blurKernelSize","intensity","setupFog","fogColor","Color3","fogDensity","fogMode","Scene","setupLightAndShadow","light","getLightById","ShadowGenerator","console","info","Helpers","getRandomInt","min","max","Math","ceil","floor","random","get2DCoordinatesFromMesh","mesh","camera","engine","pos","Vector3","getAbsolutePosition","getTransformMatrix","viewport","toGlobal","getRenderWidth","getRenderHeight","top","getIsSuffix","suffix","nameArray","item","IsName","text","partly","arguments","undefined","search","getMeshesByName","meshes","getMeshByName","getTime","date","Date","getAverage","rollingAverage","RollingAverage","add","getAnimationRatio","average","numberFixed","number","toFixed","getNameId","meshId","drawEllipsoid","getScene","ellipsoid","MeshBuilder","diameterX","diameterY","diameterZ","segments","onBeforeRenderObservable","copyFrom","addInPlace","ellipsoidOffset","debugmat","StandardMaterial","diffuseColor","wireframe","material","isFile","pop","indexOf","async","filePath","arr","filePathLastFolder","response","axios","manifest","data","error","getTagsFromMesh","rawTags","Tags","hasTag","tag","tags","tagCheck","BabylonScene","callbackLoad","window","addEventListener","resize","SceneLoader","fileName","timestamp","getFileTimestamp","filePathWithTimestamp","e","optimize","runRenderLoop","message","log","autoClearDepthAndStencil","meshNotAnimate","getMeshesByTags","freezeWorldMatrix","doNotSyncBoundingInfo","cullingStrategy","AbstractMesh","options","SceneOptimizerOptions","optimizer","SceneOptimizer","start","setEnvironment","environment","SoundMain","path","subscribe","sound","type","mutation","isPlaying","stop","Music","super","Sound","loop","autoplay","volume","Background","Audio","isLevelRun","pathAudio","audioEngine","Engine","useCustomUnlockedButton","context","audioContext","resume","unlock","SubscribeStore","unsubscribes","dispose","callbackEvent","oldMove","unsubscribe","stateMove","equal","isEqual","oldForward","stateForward","oldStateJump","pressEvent","oldStatePressEvent","statePress","fly","oldState","flyEnd","oldStateRotate","rotateX","rotateY","oldStatePosition","statePosition","oldStateRotation","stateRotation","oldSyncData","syncPlayer","oldPlayer","unsubscribeAll","ServerClient","sessionId","room","init","client","Colyseus","joinOrCreate","then","onAdd","onRemove","send","onMessage","alert","subscribeStore","DevMode","enabled","globalRoot","document","getElementsByTagName","debugLayer","show","overlay","Body","meshHeadId","meshFootId","observer","size","meshHead","meshFoot","meshCoordinator","getMeshById","visibility","checkCollisions","isPickable","remove","DEFAULT_SPEED","SPRINT_SPEED","GRAVITY","JUMP_HEIGHT","Move","modelCollisions","collisions","flyModeTimerId","flyUp","animationJumpFrames","footIsCollision","jumpAnimation","speed","createJumpAnimation","observerBefore","beforeRender","observerAfter","onAfterRenderObservable","afterRender","Animation","easingFunction","SineEase","setEasingMode","EasingFunction","setEasingFunction","setAverage","changeSpeed","nextStep","setNewPosition","gravity","clearTimeout","setTimeout","frame","setKeys","animations","beginDirectAnimation","matrix","getWorldMatrix","vector","moveWithCollisions","checkCollisionFloor","MoveCommon","updatePositionToState","updateRotationToState","updateFly","oldPosition","setInterval","commit","oldRotation","oldFly","oldFlyUp","Controller","sensitiveMouse","mouseIsCaptured","mouseEvent","onKeyboardObservable","keyEvent","eventCode","code","eventType","KeyboardEventTypes","elementContent","getElementById","checkFocusAvailable","composedPath","itemChecked","tagName","classList","contains","canvas","requestPointerLock","pointerlockchange","pointerLockElement","movementY","movementX","Idle","weight","autoPlayLoop","animation","getAnimationGroupByName","setAnimations","setWeightForAllAnimatables","Run","JumpMiddle","JumpFinish","Sprint","Picking","animationGroups","animationGroupCurrent","setAnimationGroups","observableBeforeAnimation","onBeforeAnimation","idle","pushAnimation","getAnimationByName","group","includes","animationJumpMiddle","animationJumpFinish","getAnimationByState","blending","jumpFinishAnimation","targetedAnimations","JumpFinishAnimationEvent","AnimationEvent","addEvent","animationIdle","animationRun","animationSprint","animationPicking","animationGroup","onBeforeAnimationsObservable","removeCallback","Scalar","Rotation","angle","meshCharacter","animatable","isAnimated","forwardAngle","setAnimation","CubicEase","setAngle","angleNew","radianNew","radianOld","angleOld","diff","shortWayAngle","diffAngle","abs","PI","stopAnimation","frames","beginAnimation","syncIntervalId","clearInterval","LODs","static","arrayLODs","tagDistance","distance","isVisible","sortBy","reverse","getLODs","mainLod","mainLODMesh","useLODScreenCoverage","i","LOD","addLODLevel","ContainerManager","container","assetContainers","instanceData","getInstance","rootNodes","getChildMeshes","showOnlyMainLod","appendCollisionByMeshes","loadedContainer","addLevels","removeAllFromScene","newContainer","instancesData","assetContainer","result","instantiateModelsToScene","doNotInstantiate","assetMesh","Items","bodyMesh","characterMeshes","placeholders","setPlaceholders","setItems","storePlayer","placeholder","getContainer","flavour","Character","meshBodyId","meshRootId","load","callback","rootMesh","setMeshes","setShadow","meshBody","meshRoot","rotationQuaternion","resetLocalMatrix","disposeNotActiveProperties","filterProperties","playerStore","property","getShadowGenerator","addShadowCaster","MAX_DIST_CAMERA_Z","MAX_DIST_CAMERA_Y","Camera","babylonCamera","UniversalCamera","actualDistance","calculateDistance","amount","maxZ","minZ","activeCamera","attachCamera","setIsMovingInterval","registerBeforeRender","setDistance","dirZ","getDirection","Axis","scaleInPlace","dirY","headPosition","m","direction","subtract","ray","Ray","pickResult","pickWithRay","pickedMesh","getIstMoving","Player","syncPosition","syncRotation","observerSyncCoordinate","endX","endY","endZ","startX","startY","startZ","body","controller","Prefabs","prefabs","setPrefabs","prefab","nameModel","replace","parent","loopAnimation","TagsExtension","_loader","loadNodeAsync","node","assign","babylonTransformNode","gltf","extras","RegisterTagsExtension","GLTFLoader","loader","Collisions","listCollisions","listCollisionsFloor","setCollisions","keyMesh","listMesh","intersectsMesh","checkCollisionList","IceMeteor","showRay","rays","rectLabel","Rectangle","currentPrefabId","initItems","initCastRays","index","meshEventId","boundingInfo","getBoundingInfo","boundingBox","extendSize","scale","invisibleMesh","depth","prefabId","getPrefabIdByMesh","prefabItem","buildRays","cellSize","areaSize","countCells","round","cellStartX","cellFinishX","cellY","rayX","rayY","rayHelper","RayHelper","attachToMesh","castRay","hit","pickMesh","castRays","prefabMesh","Game","innerWidth","innerHeight","preserveDrawingBuffer","stencil","sceneModel","getPlayerId","serverClient","PlayerSelf","setClassesGame","queryString","location","urlParams","URLSearchParams","get","uuidv4","class","onClick","openMenu","_component_meta_mask","connectOrChangeWallet","isConnected","walletAddress","slice","web3","ethereum","Web3","accounts","eth","getAccounts","on","methods","request","method","__exports__","components","MetaMask","_withDirectives","_vShow","defineComponent","_hoisted_6","href","_hoisted_7","openSettings","closeMenu","_Fragment","_renderList","onChange","$event","saveField","checked","_createTextVNode","_toDisplayString","close","computed","$nextTick","target","soundEnable","mounted","game","mapGetters","watch","TopBar","LevelPreview","MenuLevel","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","every","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}